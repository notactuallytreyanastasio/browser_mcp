import{t,_ as e,n as o,r,u as a,e as s}from"./shell-2264602c.js";import{s as i,x as d}from"./icon-82dd10b4.js";let n=class extends i{constructor(){super(...arguments),this.feature="",this.routeParams="",this.queryParams="",this.dialogId="",this.dialogContentId="",this.featureRootSelector=""}parseParams(t){try{return JSON.parse(t)}catch{return}}async showModal(){await r({name:this.feature,routeParams:this.parseParams(this.routeParams),queryParams:this.parseParams(this.queryParams),renderMode:a.Contents,root:this.featureRootSelector?document.querySelector(this.featureRootSelector)??document:document});const t=document.querySelector(`rpl-dialog#${this.dialogId}`),e=new CustomEvent("custom-feed-edit-button:dialog-loaded",{detail:{dialog:t}});this.dispatchEvent(e);const o=()=>t.portalContainer,s=()=>{const t=o();return t?.querySelectorAll('[slot="close-button"]')??[]},i=()=>t.hide(),d=()=>{s().forEach((t=>{t.addEventListener("click",i)})),o()?.addEventListener("close-dialog",i)};t.open?d():(t.addEventListener("rpl-dialog:after-show",d),t.showModal()),t.addEventListener("rpl-dialog:hide",(()=>{s().forEach((t=>{t.removeEventListener("click",i)})),o()?.removeEventListener("close-dialog",i)}))}handleKeyDown(t){"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),this.showModal())}render(){return d`<slot @click="${this.showModal}" @keydown="${this.handleKeyDown}"></slot>`}};n.styles=[t],e([o({type:String})],n.prototype,"feature",void 0),e([o({type:String,attribute:"route-params"})],n.prototype,"routeParams",void 0),e([o({type:String,attribute:"query-params"})],n.prototype,"queryParams",void 0),e([o({type:String,attribute:"dialog-id"})],n.prototype,"dialogId",void 0),e([o({type:String,attribute:"dialog-content-id"})],n.prototype,"dialogContentId",void 0),e([o({type:String,attribute:"feature-root-selector"})],n.prototype,"featureRootSelector",void 0),n=e([s("custom-feed-edit-button")],n);
