import{a as t,t as e,_ as i,n as o,J as s,ap as n,P as r,aK as a,x as l,w as d}from"./shell-2264602c.js";import{s as h,j as c,c as p,aU as m,aV as u,x as g,ao as v,aW as b,aX as A,y,aY as C,aZ as k,a_ as S,av as w,a$ as I,au as M,az as R,b0 as P,I as f,A as z}from"./icon-82dd10b4.js";import{L as H,l as L}from"./expandable-section-header-edd4c2b3.js";import{c as x}from"./content-action-button-a25cd1f9.js";import{H as D}from"./community-highlights-4f4bb401.js";import{P as E,i as B}from"./links-9b598b77.js";import{M as j,s as F,a as U,h as V,b as T,c as $,d as O,e as _,f as Q}from"./mod-verdict-47cd849f.js";import{M as q,p as J}from"./mod-actions-controller-7ff911c0.js";import"./community-picker-9f84d972.js";import"./app-selector-client-js-3a92da0e.js";import"./faceplate-bottom-sheet-header-63783c3a.js";import"./mod-dropdown-closer-16ee5434.js";import"./shreddit-comment-share-button-89112e32.js";import"./shreddit-post-share-button-1df6e2be.js";import"./all-chats-page-recommendations-client-js-e670f708.js";const K=t(h);class N extends K{constructor(){super(...arguments),this.size=H.Medium,this.appearance="content-action",this.viewContext=E.CommentsPage,this.feedViewType=n.ModQueueCompactView,this.itemState=j.UNMODERATED,this.isCurrentUserAuthor=!1,this.isDeleted=!1,this.isRemoved=!1,this.isModModeEnabled=!1,this.isAdmin=!1,this.isLocked=!1,this.isStickied=!1,this.isHighlighted=!1,this.isReportingIgnored=!1,this.areHighlightsEnabled=!1,this.hasReports=!1,this.hasRemovalReason=!1,this.isProfilePost=!1,this.isPromotedPost=!1,this.isSpamFilteredPost=!1,this.isDesktop=!1,this.permalink="",this.isContentLevelModsCommsEnabled=!1,this.pubsub=new r(this),this.modActionsController=new q(this,{getThingIdFn:()=>this.thingId||"",getUserIdFn:()=>this.userId||""}),this.getListItemClickHandler=t=>()=>(this.dropdownMenu?.close(),t())}get isPost(){return B(this.thingId||"")}get shouldAlwaysShowAction(){return!this.isModModeEnabled&&!this.isOnModqueuePage}shouldAlwaysShowApproveAction(){return this.shouldAlwaysShowAction||this.isModVerdictVisible&&this.itemState!==j.APPROVED&&this.shouldShowActionInMenu}shouldAlwaysShowRemoveAction(){return this.shouldAlwaysShowAction||this.isModVerdictVisible&&this.itemState!==j.REMOVED&&this.shouldShowActionInMenu}get isOnModqueuePage(){return this.viewContext===E.ModQueue||this.viewContext===E.ModQueueAll}get isApproved(){return this.itemState===j.APPROVED}get shouldShowConfirmRemoval(){return F(this.itemState,this.isSpamFilteredPost)}get shouldShowActionInMenu(){return!U(this.viewContext,this.feedViewType)||"hover-menu"===this.appearance}get isDistinguishable(){return this.isCurrentUserAuthor&&!this.isDeleted}get isStickyable(){return!(this.viewContext===E.ProfileFeed||this.viewContext===E.ProfileFeed2||this.isDeleted)}get isModVerdictVisible(){return V(this.verdict)&&!this.hasReports&&this.itemState!==j.FILTERED}renderApproveAction(){return this.shouldAlwaysShowApproveAction()&&T(this.itemState)?L({leadingIcon:c(),label:"Approve",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleApproveContent)}):null}renderRemoveAction(){return this.shouldAlwaysShowRemoveAction()&&$(this.itemState)?L({leadingIcon:p(),label:"Remove",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleRemoveContent)}):null}renderConfirmRemovalAction(){return this.shouldAlwaysShowRemoveAction()&&this.shouldShowConfirmRemoval?L({leadingIcon:m(),label:"Confirm Removal",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleConfirmRemoval)}):null}renderSpamAction(){return O({moderationState:this.itemState,isSpamFilteredPost:this.isSpamFilteredPost,isRemoved:this.isRemoved,isPromotedPost:this.isPromotedPost})&&this.shouldShowActionInMenu?L({leadingIcon:u(),label:"Mark as Spam",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleRemoveContentAsSpam)}):null}renderShareToModChatAction(t){return _({moderationState:this.itemState,isSpamFilteredPost:this.isSpamFilteredPost,isRemoved:this.isRemoved,isPromotedPost:this.isPromotedPost})&&this.shouldShowActionInMenu&&t?g`<reddit-chat-anchor> <a href="https://chat.reddit.com/room/!lKfTYc3TTlSC4-lBD_Namg:reddit.com" class="no-underline"> ${L({leadingIcon:v(),label:"Share to mod chat",size:this.size,onClick:async()=>{await J(window.location.origin+this.permalink)}})} </a> </reddit-chat-anchor>`:null}renderIgnoreReportsAction(){return this.isReportingIgnored||!this.hasReports?null:L({leadingIcon:b(),label:"Ignore reports and approve",size:this.size,onClick:this.getListItemClickHandler((()=>{this.modActionsController.handleIgnoreReports(),this.modActionsController.handleApproveContent()}))})}renderUnignoreReportsAction(){return this.isReportingIgnored?L({leadingIcon:A(),label:"Unignore reports",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleUnignoreReports)}):null}renderAddRemovalReasonAction(){return Q(this.itemState,this.hasRemovalReason,this.isSpamFilteredPost,this.isProfilePost)&&this.shouldShowActionInMenu?L({leadingIcon:y(),label:"Add Removal Reason",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleAddRemovalReason)}):null}renderDistinguishAction(){return this.isDistinguishable&&this.distinguishedAs!==a.Moderator?L({leadingIcon:C(),label:"Show mod label",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleDistinguish)}):null}renderUndistinguishAction(){return this.isDistinguishable&&this.distinguishedAs===a.Moderator?L({leadingIcon:k(),label:"Hide mod label",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleUndistinguish)}):null}renderStickyAction(t){return!this.isStickyable||this.isStickied||!this.shouldShowActionInMenu||this.areHighlightsEnabled||this.isPromotedPost?null:L({leadingIcon:S(),label:t,size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleSticky)})}renderUnstickyAction(t){return this.isStickyable&&this.isStickied&&this.shouldShowActionInMenu&&!this.areHighlightsEnabled&&!this.isPromotedPost?L({leadingIcon:w(),label:t,size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleUnsticky)}):null}renderAddToHighlightsAction(){return this.isStickyable&&this.shouldShowActionInMenu&&this.areHighlightsEnabled&&D.has(this.viewContext)&&!this.isHighlighted?L({leadingIcon:S(),label:"Add to highlights",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleUpdateHighlightedPost)}):null}renderRemoveFromHighlightsAction(){return this.isStickyable&&this.shouldShowActionInMenu&&this.areHighlightsEnabled&&D.has(this.viewContext)&&this.isHighlighted?L({leadingIcon:w(),label:"Remove from highlights",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleRemoveHighlightedPost)}):null}renderLockAction(t){return this.isLocked||!this.shouldShowActionInMenu?null:L({leadingIcon:I(),label:t,size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleLock)})}renderUnlockAction(t){return this.isLocked&&this.shouldShowActionInMenu?L({leadingIcon:M(),label:t,size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleUnlock)}):null}renderEditPostFlairAction(t){return!this.shouldShowActionInMenu||this.isPromotedPost||this.isDeleted?null:L({leadingIcon:R(),label:t,size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleOpenEditPostFlairModal)})}renderCopyLinkAction(){return"hover-menu"!==this.appearance?null:this.isPost?g`<shreddit-post-share-button use-menu ?is-desktop-viewport="${this.isDesktop}" permalink="${this.permalink}"></shreddit-post-share-button>`:g`<shreddit-comment-share-button use-menu ?is-desktop-viewport="${this.isDesktop}" permalink="${this.permalink}"></shreddit-comment-share-button>`}closeModal(){this.bottomSheetMenu?.close()}openModal(){this.bottomSheetMenu?.showModal()}renderMenuTrigger(){const t={leadingIcon:P({size:f.Small}),screenReaderContent:"Moderation actions menu",appearance:"secondary",attributes:{type:"button",onclick:()=>{this.openModal()},slot:"trigger"},size:l.Small};return g` <faceplate-tracker source="moderator" action="click" noun="mod_shield_menu"> ${"hover-menu"===this.appearance?d({...t,appearance:"secondary"}):x({...t,appearance:"plain"})} </faceplate-tracker> `}renderMobileActionsMenu(t){return g` ${this.renderMenuTrigger()} <faceplate-bottom-sheet> <faceplate-bottom-sheet-header slot="header" has-divider> <span slot="trailing" @click="${this.closeModal}"> ${d({attributes:{"aria-label":"Close"},appearance:"secondary",leadingIcon:p({size:f.Small}),size:l.Small})}</span> <span>Mod actions</span> </faceplate-bottom-sheet-header> <faceplate-menu class="w-full" @click="${this.closeModal}"> ${t} <slot name="devvit-context-actions"></slot> </faceplate-menu> </faceplate-bottom-sheet> `}renderActionsMenu(t){return g` <mod-dropdown-closer> <faceplate-dropdown-menu position="bottom-end"> ${this.renderMenuTrigger()} <faceplate-menu slot="menu" class="max-w-xs max-h-[432px] overflow-y-auto overflow-x-hidden styled-scrollbars"> ${t} <slot name="devvit-context-actions"></slot> </faceplate-menu> </faceplate-dropdown-menu> </mod-dropdown-closer> `}render(){if(this.viewContext===E.AggregateFeed)return z;const t=this.renderActions();return 0===t.length||t.every((t=>null===t))?g``:this.isDesktop?this.renderActionsMenu(t):this.renderMobileActionsMenu(t)}}N.styles=[e],i([o({type:String,attribute:"thing-id"})],N.prototype,"thingId",void 0),i([o({type:String,attribute:"user-id"})],N.prototype,"userId",void 0),i([o({type:String})],N.prototype,"size",void 0),i([o({type:String})],N.prototype,"appearance",void 0),i([o({type:String,attribute:"view-context"})],N.prototype,"viewContext",void 0),i([o({type:String,attribute:"feed-view-type"})],N.prototype,"feedViewType",void 0),i([o({type:String,attribute:"item-state",reflect:!0})],N.prototype,"itemState",void 0),i([o({type:String,attribute:"distinguished-as"})],N.prototype,"distinguishedAs",void 0),i([o({type:String,attribute:"verdict"})],N.prototype,"verdict",void 0),i([o({type:String,attribute:"verdict-by"})],N.prototype,"verdictBy",void 0),i([o({type:Boolean,attribute:"current-user-author"})],N.prototype,"isCurrentUserAuthor",void 0),i([o({type:Boolean,attribute:"deleted"})],N.prototype,"isDeleted",void 0),i([o({type:Boolean,attribute:"removed"})],N.prototype,"isRemoved",void 0),i([o({type:Boolean,attribute:"mod-mode"})],N.prototype,"isModModeEnabled",void 0),i([o({type:Boolean,attribute:"is-admin"})],N.prototype,"isAdmin",void 0),i([o({type:Boolean,attribute:"locked"})],N.prototype,"isLocked",void 0),i([o({type:Boolean,attribute:"stickied"})],N.prototype,"isStickied",void 0),i([o({type:Boolean,attribute:"highlighted"})],N.prototype,"isHighlighted",void 0),i([o({type:Boolean,attribute:"reporting-ignored"})],N.prototype,"isReportingIgnored",void 0),i([o({type:Boolean,attribute:"highlights-enabled"})],N.prototype,"areHighlightsEnabled",void 0),i([o({type:Boolean,attribute:"has-reports"})],N.prototype,"hasReports",void 0),i([o({type:Boolean,attribute:"has-removal-reason"})],N.prototype,"hasRemovalReason",void 0),i([o({type:Boolean,attribute:"is-profile-post"})],N.prototype,"isProfilePost",void 0),i([o({type:Boolean,attribute:"is-promoted-post"})],N.prototype,"isPromotedPost",void 0),i([o({type:Boolean,attribute:"is-spam-filtered-post"})],N.prototype,"isSpamFilteredPost",void 0),i([o({type:Boolean,attribute:"is-desktop"})],N.prototype,"isDesktop",void 0),i([o({type:String,attribute:"permalink"})],N.prototype,"permalink",void 0),i([o({type:Boolean,attribute:"is-content-level-mods-comms-enabled"})],N.prototype,"isContentLevelModsCommsEnabled",void 0),i([s("faceplate-dropdown-menu")],N.prototype,"dropdownMenu",void 0),i([s("faceplate-bottom-sheet")],N.prototype,"bottomSheetMenu",void 0);export{N as M};
