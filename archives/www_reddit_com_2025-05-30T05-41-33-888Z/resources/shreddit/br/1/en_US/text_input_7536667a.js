import{e as t,i as e,t as a,b as i,T as r,A as s,bH as n,s as o,a as l,x as c,l as h,a5 as p,I as d,a0 as u,G as v}from"./icon-82dd10b4.js";import{_ as b,g,n as y,e as f,I as m,a7 as x,w as L,x as w,J as I,m as T}from"./shell-2264602c.js";import{c as _}from"./filterNullish-60f7e90f.js";import{F as C}from"./constants-d65b7b38.js";const S=t(class extends e{constructor(t){if(super(t),t.type!==a.PROPERTY&&t.type!==a.ATTRIBUTE&&t.type!==a.BOOLEAN_ATTRIBUTE)throw Error("The `live` directive is not allowed on child or event bindings");if(!i(t))throw Error("`live` bindings can only contain a single expression")}render(t){return t}update(t,[e]){if(e===r||e===s)return e;const i=t.element,o=t.name;if(t.type===a.PROPERTY){if(e===i[o])return r}else if(t.type===a.BOOLEAN_ATTRIBUTE){if(!!e===i.hasAttribute(o))return r}else if(t.type===a.ATTRIBUTE&&i.getAttribute(o)===e+"")return r;return n(t),e}});class A{constructor(t,e){this._observedNames=new Set,this._previousStates=new Map,this._records=new Map,this._eventListener=t=>{this._processRecord(t.detail)},this._callCallback=()=>{this._records.size&&this._callback(this.takeRecords(),this)},this._callback=t,this.form=e.form}_processRecord(t){const e=!this._records.size,{input:a,message:i,name:r}=t;if(!this._observedNames.has(r))return;this._previousStates.get(r)!==i&&(this._records.set(r,{target:a,message:i,name:r}),this._previousStates.set(r,i),this._records.size&&e&&queueMicrotask(this._callCallback))}observe(t){if(this._observedNames.has(t))return;this._observedNames.add(t),1===this._observedNames.size&&this.form.addEventListener("_faceplate-validation-change",this._eventListener);const e=this.form.elements[t];!e||e instanceof HTMLOutputElement||Array.isArray(e)||this._processRecord({input:e,name:t,message:e.validationMessage})}disconnect(){this._observedNames.size&&(this._observedNames.clear(),this._previousStates.clear(),this._records.clear(),this.form.removeEventListener("_faceplate-validation-change",this._eventListener))}takeRecords(){const t=Array.from(this._records.values());return this._records=new Map,t}unobserve(t){this._observedNames.has(t)&&(this._observedNames.delete(t),this._previousStates.delete(t),this._records.delete(t),this._observedNames.size||this.disconnect())}}let B=class extends o{constructor(){super(...arguments),this.name="",this.level=null,this.placeholder="",this.ariaLive=null,this.message="",this.characterCount=Number.NEGATIVE_INFINITY,this.characterCountAriaLabel="",this.visuallyHiddenText="",this.isInputDirty=!0,this._message="",this.setIsDirtyByAttribute=t=>{this.isInputDirty=t.hasAttribute("faceplate-dirty")},this.onFormConnect=t=>{t?.addEventListener("faceplate-submit",(()=>{this.isInputDirty=!0})),t&&this.isConnected&&(this._observer=new A((t=>{for(const e of t)if(e.name===this.name){if(e.target instanceof C){this.setIsDirtyByAttribute(e.target);new MutationObserver((t=>{for(const e of t)"faceplate-dirty"===e.attributeName&&this.setIsDirtyByAttribute(e.target),"faceplate-validity"===e.attributeName&&this.toggleSuccessStyling(e.target)})).observe(e.target,{attributes:!0})}else this.isInputDirty=!0;this.setMessage(this.message||e.message,"valid"===e.target.getAttribute("faceplate-validity")?m.success:m.error)}}),{form:t}),this._observer.observe(this.name),this._observer.form.addEventListener("faceplate-alert",this._handleAlert))},this.associateForm=t=>{this.onFormConnect(t)},this._handleAlert=t=>{this.isInputDirty=!0;const{name:e,level:a,message:i}=t.detail;e===this.name&&a!==m.error&&this.setMessage(i,a)},this.toggleSuccessStyling=t=>{this.isInputDirty&&("valid"===t.getAttribute("faceplate-validity")?this.shadowRoot?.getElementById("helper-text")?.classList.add("success"):this.shadowRoot?.getElementById("helper-text")?.classList.remove("success"))}}connectedCallback(){super.connectedCallback(),_(this).then(this.onFormConnect)}disconnectedCallback(){super.disconnectedCallback(),this._observer&&(this._observer.disconnect(),this._observer.form.removeEventListener("faceplate-alert",this._handleAlert))}setMessage(t,e){t&&void 0!==e?this.level=m[e]:this.removeAttribute("level"),this._message=t||""}get textContent(){return this.shadowRoot?.firstElementChild?.textContent||""}get innerText(){return this.shadowRoot?.firstElementChild?.innerText||""}static get styles(){return l`:host{display:block;font-size:var(--font-small);color:var(--color-input-helper-text);line-height:var(--size-md);font-size:var(--font-small);box-sizing:border-box}.container{display:flex;justify-content:space-between;padding-top:var(--spacer-input-padding-top);line-height:var(--size-md);font-size:var(--font-small)}.success,:host([level=success]){color:var(--color-success-content)}.overflow-char-limit,:host([level=alert]),:host([level=critical]),:host([level=emergency]),:host([level=error]){color:var(--color-danger-content)}:host([level=warning]){color:var(--color-alert-caution)}:host([level=notice]){color:var(--color-success-content)}.pristine{color:var(--color-input-helper-text)}:host([character-count]) .character-count{margin-left:var(--spacer-xs);flex-shrink:0}.empty{padding:0}`}render(){const t=this.characterCount>Number.NEGATIVE_INFINITY;return this.placeholder||this._message||t?c`<span aria-live="${h(this.ariaLive??void 0)}" class="${x({container:!0,pristine:!this.isInputDirty})}"> <span id="helper-text">${this.isInputDirty&&this._message?this._message:this.placeholder}</span> ${t?c`<span class="character-count ${this.characterCount<0?"overflow-char-limit":""}" aria-label="${h(this.characterCountAriaLabel)}">${this.characterCount}</span>`:void 0} </span> <faceplate-screen-reader-content aria-live="assertive">${this.visuallyHiddenText}</faceplate-screen-reader-content>`:c`<faceplate-screen-reader-content aria-live="polite">${this.visuallyHiddenText}</faceplate-screen-reader-content>`}};b([y({type:String,reflect:!0})],B.prototype,"name",void 0),b([y({type:String,reflect:!0})],B.prototype,"level",void 0),b([y({type:String})],B.prototype,"placeholder",void 0),b([y({type:String,reflect:!0,attribute:"aria-live"})],B.prototype,"ariaLive",void 0),b([y({type:String,attribute:"message"})],B.prototype,"message",void 0),b([y({type:Number,attribute:"character-count"})],B.prototype,"characterCount",void 0),b([y({type:String,attribute:"character-count-aria-label"})],B.prototype,"characterCountAriaLabel",void 0),b([y({type:String,attribute:"visually-hidden-text"})],B.prototype,"visuallyHiddenText",void 0),b([g()],B.prototype,"isInputDirty",void 0),b([g()],B.prototype,"_message",void 0),B=b([f("faceplate-form-helper-text")],B);class E extends C{constructor(){super(...arguments),this.suffix="",this.value="",this.name="",this.placeholder="",this.required=!1,this.screenReaderContent="",this.novalidate=!1,this.helperTextLevel=null,this.helperTextPlaceholder="",this.helperTextAriaLive="polite",this.helperTextMessage="",this.hasLabel=!1,this.hasTrailingButton=!1,this.statefulInput=!1,this.reportedDirty=!1,this.hasValidationHelpers=!1,this.suppressInternalClicks=!1,this.validationMsg="",this.allowMaxLengthOverflow=!1,this.setFormValidationHelpers=t=>{t&&(t.addEventListener("faceplate-submit",this.setDirtyAttribute),this.helperText?.associateForm(t),this.hasValidationHelpers=!0)},this.setStatefulInputByValue=()=>{this.statefulInput=!this.isEmpty},this.inputContainer=t=>c` <span class="${x({"input-container":!0})}"> ${t} </span> `,this.labelTextWrapper=()=>{const t=t=>t&&t[0]?.textContent;return c` <span class="label-text inner-label"><slot name="label" @slotchange="${e=>this.onSlotChange({event:e,property:"hasLabel",name:"label",hasChanged:t})}"></slot>${this.required?c`<span class="required-asterisk">*</span>`:null}</span> `},this.setDirtyAttribute=()=>{this.setAttribute("faceplate-dirty","")},this.onSlotChange=({event:t,property:e,name:a,hasChanged:i})=>{t.target?.name===a&&(this[e]=i?i(t.target?.assignedElements()):t.target?.assignedNodes().length>0)}}async connectedCallback(){super.connectedCallback(),this.addEventListener("focus",this.onFocus.bind(this)),this.addEventListener("blur",this.onBlur.bind(this));const t=await _(this);this.setFormValidationHelpers(t)}disconnectedCallback(){super.disconnectedCallback(),this?.removeEventListener("focus",this.onFocus),this?.removeEventListener("blur",this.onBlur),this.form?.removeEventListener("faceplate-submit",this.setDirtyAttribute)}async firstUpdated(){super.firstUpdated(),this.calculateLabelPosition(),this.validateMaxLength()}updated(t){if(t.get("prefix")&&this.calculateLabelPosition(),void 0!==t.get("statefulInput")){const t=this.shadowRoot?.querySelector(".input-container")?.classList;this.statefulInput?t.add("stateful-input"):t.remove("stateful-input")}t.has("value")&&(super.value=this.value,this.setStatefulInputByValue())}get delegatedFocusElements(){return[this.innerInput]}static get styles(){return[super.styles,l`label{display:flex;position:relative}:host{outline:0;font-family:var(--font-sans);cursor:text}:host input,:host textarea{font:inherit;color:var(--color-neutral-content-strong);padding:0}.label-container{display:inline-flex;position:relative;height:var(--rem40);align-items:center;box-sizing:border-box}:host([appearance=bordered]) .label-container{background:var(--color-input-bordered);color:var(--color-input-bordered-text)}:host([appearance=secondary]) .label-container{background:var(--color-input-secondary);border-radius:var(--radius-md);outline:0;color:var(--color-input-secondary-text)}:host([appearance=secondary]) .label-container:hover{background:var(--color-input-secondary-hover)}:host([appearance=bordered]) .label-container:hover{background:var(--color-input-bordered-hover)}:host(:focus-within) .label-container{outline:1px auto var(--color-global-focus)}:host([faceplate-validity=invalid][faceplate-dirty]) .label-container{border-color:transparent;box-shadow:0 0 0 var(--rem2) var(--color-danger-content)}:host([faceplate-validity=valid][novalidate]) .label-container{border-color:transparent;box-shadow:none}:host .label-container,:host faceplate-form-helper-text{padding-left:var(--spacer-md)}:host .label-container,:host faceplate-form-helper-text:not(.helper-text-without-label-with-trailing){padding-right:var(--spacer-md)}:host([appearance=secondary]) .label-container{align-items:center}:host .label-container.with-trailing-button{padding-right:var(--spacer-xs)}.label-container.interior-label{height:var(--rem56)}.input-container{font:var(--font-16-20-regular)}::slotted([slot=leadingIcon]),::slotted([slot=trailingIconButton]){color:var(--color-neutral-content-weak);display:inline-flex;align-items:center}:host([faceplate-validity=valid][faceplate-dirty]) .trailing-icon.valid{color:var(--color-success-background)}.required-asterisk,:host([faceplate-validity=invalid][faceplate-dirty]) .trailing-icon.invalid{color:var(--color-danger-content)}:host([faceplate-validity=valid][novalidate]) .trailing-icon.valid{display:none}.trailing-icon,::slotted([slot=trailingIcon]){margin-left:var(--spacer-xs);flex-shrink:0}:host([disabled]){color:var(--color-neutral-content-disabled)}:host([faceplate-validity=invalid][faceplate-dirty]) .invalid,:host([faceplate-validity=valid][faceplate-dirty]) .valid{display:inline-block}.trailing-icon{display:none}:host .label-container.without-label faceplate-form-helper-text,:host([appearance=secondary]) .label-container.without-label{padding-top:var(--rem10);padding-bottom:var(--rem10)}:host([faceplate-validity=invalid]:not([disabled])[faceplate-dirty]) .label-text:not(.inner-label),:host([faceplate-validity=valid]:not([disabled])[faceplate-dirty]) .label-text:not(.inner-label){color:var(--color-label-default)}.label-text{position:absolute;pointer-events:none}:host([disabled]) .label-text:not(.inner-label){color:var(--color-neutral-content-disabled)}.stateful-input .label-text:not(.inner-label){clip:rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px}.stateful-input .label-text.inner-label{transform:translate(calc(-1 * var(--left-label-position)),calc(-1 * (var(--rem16))));font-size:var(--size-sm);line-height:var(--rem16);white-space:nowrap}.label-container:not(.without-label) .input-container:not(.stateful-input) input::placeholder,.label-container:not(.without-label) .input-container:not(.stateful-input) textarea::placeholder{opacity:0}.label-container:not(.without-label) .input-container.stateful-input{transform:translateY(var(--spacer-xs))}.activated,.activated .label-text.inner-label{transition:all 150ms ease-out}.inner-label{left:var(--left-label-position)}.input-container:not(.stateful-input) .inner-label{transform:translateY(0);transition:transform 150ms ease}.hidden{display:none}.label-text:not(.inner-label){color:var(--color-label-default)}slot[name=clearButton]:not(.has-value){display:none}.input-boundary-box{display:flex;align-items:center}.input-boundary-box,.label-container{flex:1}.label-container:not(.without-label) .input-boundary-box{padding:var(--spacer-xs) 0}#trailing-icons-container{display:flex;align-items:center;gap:var(--spacer-xs);justify-content:flex-end}:host([persistent-trailing-icon]) #trailing-icons-general{flex-direction:row-reverse}.input-prefix,.input-suffix,.label-text{color:var(--color-label-default)}:host .without-label.with-trailing-button{padding-right:var(--spacer-2xs)}.input-container{position:relative;transform:translateY(0);display:flex;align-items:center;width:100%;line-height:var(--rem20)}:host([faceplate-validity=invalid]:not([persistent-trailing-icon])[faceplate-dirty]) ::slotted([slot=trailingIconButton]){display:none}#trailing-icons-general{display:flex;align-items:center}#trailing-icons-validation{display:flex}:host(:not([faceplate-dirty])) #trailing-icons-validation{display:none}`]}get isEmpty(){return!(!this.innerInput?.value&&this.innerInput?.validity.badInput)&&!(this.innerInput?.value??this.value)}onFocus(){this.hasAttribute("faceplate-dirty")&&!this.reportedDirty&&(this.reportedDirty=!0),this.removeAttribute("faceplate-dirty"),this.shadowRoot?.querySelector(".input-container")?.classList.add("activated"),this.isEmpty&&(this.statefulInput=!0)}onBlur(){this.isEmpty&&(this.statefulInput=!1),this.reportedDirty&&this.setAttribute("faceplate-dirty","")}focus(){this.innerInput?.focus()}blur(){this.innerInput?.blur()}onChange(t){const e=t?.target;this.value=e?.value||"",this.dispatchEvent(new InputEvent("change",{bubbles:!0}))}onInput(t){const e=t?.target;this.value=e?.value||"",this.handleCharLimit?.(),this.validateMaxLength(),this.setStatefulInputByValue()}validateMaxLength(){if(this.allowMaxLengthOverflow&&this.maxLength){const t=this._internals.validationMessage===this.validationMsg,e=this.value.length>this.maxLength;!t&&e?this.setCustomValidity(this.validationMsg):t&&!e&&this.setCustomValidity("")}}handleCharLimit(){const t=this.maxLength&&this.value.length>=this.maxLength;this.helperText&&this.helperTextScreenReaderMsg&&(t?this.helperText.visuallyHiddenText=this.helperTextScreenReaderMsg:!t&&this.helperText.visuallyHiddenText&&(this.helperText.visuallyHiddenText=""))}async calculateLabelPosition(t=0){let e=0,a=0;const i=this.shadowRoot?.querySelector(".input-prefix");if(i){!getComputedStyle(this.shadowRoot?.host).getPropertyValue("--font-16-20-regular").trim().length&&t<5&&setTimeout((()=>{this.calculateLabelPosition(t+1)}),50),a=i.getBoundingClientRect().width;const r=getComputedStyle(this.shadowRoot?.querySelector(".input-prefix")).getPropertyValue("margin-right");e+=a+parseFloat(r)}(this.shadowRoot?.querySelector("label")).style.setProperty("--left-label-position",`${e}px`)}onLabelClick(t){this.suppressInternalClicks&&"input"!==t.target.nodeName.toLowerCase()&&t.stopPropagation()}renderInput(t){let e;return this.characterCount&&(e=this.maxLength?this.maxLength-this.value.length:this.value.length),c`<label @click="${this.onLabelClick}"> <div class="${x({"label-container":!0,"interior-label":!0,"without-label":!this.hasLabel,"with-trailing-button":this.hasTrailingButton})}"> <span class="input-boundary-box"> <slot name="leadingIcon"></slot> ${this.inputContainer(c` ${this.prefix?c`<span class="input-prefix">${this.prefix}</span>`:void 0} ${this.labelTextWrapper()} ${t} ${this.suffix?c`<span class="input-suffix">${this.suffix}</span>`:void 0} `)} <span id="trailing-icons-container"> <span id="trailing-icons-validation"> ${u({attributes:{className:"trailing-icon invalid"},size:d.Medium})} ${v({attributes:{className:"trailing-icon valid"},size:d.Medium})} </span> <span id="trailing-icons-general"> <slot name="trailingIconButton" @slotchange="${t=>this.onSlotChange({event:t,property:"hasTrailingButton",name:"trailingIconButton"})}"> </slot> <slot name="clearButton" class="${x({"has-value":!!this.value.length})}"></slot> </span> </span> </span> </div> </label> <faceplate-form-helper-text class="${x({"no-label":!this.hasLabel,"helper-text-without-label-with-trailing":!this.hasLabel&&this.hasTrailingButton})}" character-count="${h(e)}" name="${this.name}" aria-live="${h(this.helperTextAriaLive??void 0)}" message="${h(this.helperTextMessage)}" level="${h(this.helperTextLevel??void 0)}" placeholder="${this.helperTextPlaceholder}" character-count-aria-label="${h(this.characterCountAriaLabel)}"> </faceplate-form-helper-text>`}}E.clearButton=(t={})=>L({attributes:{...t,type:"button"},appearance:"plain",size:w.Small,leadingIcon:p({attributes:{className:"trailing-icon"},size:d.Medium})}),b([y({type:String})],E.prototype,"suffix",void 0),b([y({type:String})],E.prototype,"value",void 0),b([y({type:String})],E.prototype,"name",void 0),b([y({type:String})],E.prototype,"placeholder",void 0),b([y({type:Boolean})],E.prototype,"required",void 0),b([y({type:String})],E.prototype,"screenReaderContent",void 0),b([y({type:String})],E.prototype,"autocomplete",void 0),b([y({type:String})],E.prototype,"inputmode",void 0),b([y({type:Boolean})],E.prototype,"novalidate",void 0),b([y({type:Number,attribute:"maxlength"})],E.prototype,"maxLength",void 0),b([y({type:Number,attribute:"minlength"})],E.prototype,"minLength",void 0),b([I("input,textarea")],E.prototype,"innerInput",void 0),b([I("faceplate-form-helper-text")],E.prototype,"helperText",void 0),b([y({type:String,reflect:!0,attribute:"helper-text-level"})],E.prototype,"helperTextLevel",void 0),b([y({type:String,attribute:"helper-text-placeholder"})],E.prototype,"helperTextPlaceholder",void 0),b([y({type:String,reflect:!0,attribute:"helper-text-aria-live"})],E.prototype,"helperTextAriaLive",void 0),b([y({type:String,attribute:"helper-text-message"})],E.prototype,"helperTextMessage",void 0),b([y({type:Boolean,attribute:"character-count"})],E.prototype,"characterCount",void 0),b([y({type:String,attribute:"helper-text-screen-reader-msg"})],E.prototype,"helperTextScreenReaderMsg",void 0),b([y({type:String,attribute:"character-count-aria-label"})],E.prototype,"characterCountAriaLabel",void 0),b([g()],E.prototype,"hasLabel",void 0),b([g()],E.prototype,"hasTrailingButton",void 0),b([T({slot:"label"})],E.prototype,"labelSlot",void 0),b([T({slot:"trailingIconButton"})],E.prototype,"trailingIconButtonSlot",void 0),b([g()],E.prototype,"statefulInput",void 0),b([y({type:Boolean,attribute:"suppress-internal-clicks"})],E.prototype,"suppressInternalClicks",void 0),b([y({type:Boolean})],E.prototype,"readonly",void 0),b([y({type:String,attribute:"validation-message"})],E.prototype,"validationMsg",void 0),b([y({type:Boolean,attribute:"allow-max-length-overflow"})],E.prototype,"allowMaxLengthOverflow",void 0);export{E as T,S as l};
