import{t,_ as o,n as e,ax as i,M as s,O as l,e as n}from"./shell-2264602c.js";import{s as r,x as d}from"./icon-82dd10b4.js";let a=class extends r{constructor(){super(...arguments),this.isDesktop=!1,this.isLoggedIn=!1,this.isFollowed=!1,this.trackingSource="profile",this.toggleLoadingIcon=()=>{const t=this.isFollowed?".unfollow-button":".follow-button",o=this.querySelector(`${t} .loading-icon`),e=this.querySelector(`${t} .button-leading-icon`)?.parentElement;if(o?.classList.toggle("hidden"),e?.classList.toggle("hidden"),!this.isDesktop){const o=this.querySelector(`${t} .button-text`);o?.classList.toggle("hidden")}}}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.onClick)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.onClick)}async onClick(){if(this.redditorId&&this.isLoggedIn){const t={input:{accountId:this.redditorId,state:this.isFollowed?i.None:i.Followed}};this.toggleLoadingIcon();try{const o=await s({operation:l.UpdateProfileFollowState,variables:t});return this.toggleLoadingIcon(),void(o.data.updateProfileFollowState?.ok&&!o.data.updateProfileFollowState?.errors&&(this.isFollowed=!this.isFollowed))}catch(t){return window.Sentry?.captureError?.(t),void this.toggleLoadingIcon()}}}render(){return d`<slot name="button-${this.isFollowed?"unfollow":"follow"}"></slot>`}};a.styles=[t],o([e({type:Boolean,attribute:"is-desktop"})],a.prototype,"isDesktop",void 0),o([e({type:Boolean,attribute:"is-logged-in"})],a.prototype,"isLoggedIn",void 0),o([e({type:Boolean,attribute:"is-followed"})],a.prototype,"isFollowed",void 0),o([e({type:String,attribute:"redditor-id"})],a.prototype,"redditorId",void 0),o([e({type:Object,attribute:"tracking-source"})],a.prototype,"trackingSource",void 0),a=o([n("follow-button")],a);
