import{_ as e,cP as t,n as i,b9 as o,a_ as s,cQ as a,cR as n,cS as p,cT as h,cU as r,a7 as l,aV as d}from"./shell-2264602c.js";import{x as c}from"./icon-82dd10b4.js";import{ax as u,ay as f}from"./age-gate-standalone-client-js-5357b0cf.js";import{P as y}from"./rpl-popper-2d8cefe0.js";const v={Neutral:"neutral",Inverted:"inverted",Primary:"primary"};class m extends o{constructor(){super(...arguments),this.contentSlotRef=s(),this.defaultSlotRef=s(),this.bodyRef=s(),this.popperRef=s(),this.interactionController=new u(this,{isInteractedWith:e=>e.open,hoverDelayStart:e=>a(getComputedStyle(e).getPropertyValue("--show-delay")),hoverDelayEnd:e=>a(getComputedStyle(e).getPropertyValue("--hide-delay"))}),this.appearance=v.Neutral,this.content="",this.placement=y.Top,this.disabled=!1,this.distance=4,this.open=!1,this.skidding=0,this.trigger="hover focus",this.hoist=!1,this.noAnimate=!1,this.eventUsedMap=new WeakMap,this.handleDocumentKeyDown=e=>{"Escape"===e.key&&(e.stopPropagation(),this.hide())},this.handleDocumentClick=e=>{if(!(e.target instanceof HTMLElement)||this.hidden)return;this.eventUsedMap.has(e)||f(this,e.target)||this.hide()}}disconnectedCallback(){document.removeEventListener("keydown",this.handleDocumentKeyDown),document.removeEventListener("click",this.handleDocumentClick)}willUpdate(e){e.has("open")&&this.hasUpdated&&this.handleOpenChange(),e.has("disabled")&&this.handleDisabledChange(),(e.has("content")||e.has("distance")||e.has("hoist")||e.has("placement")||e.has("skidding"))&&this.handleOptionsChange()}firstUpdated(){this.bodyRef.value&&(this.bodyRef.value.hidden=!this.open),this.open&&this.popperRef.value&&(this.popperRef.value.active=!0,this.popperRef.value.reposition())}startInteraction(e){this.eventUsedMap.set(e,!0),this.show()}finishInteraction(e){this.eventUsedMap.set(e,!0),this.hide()}async handleOpenChange(){if(!this.disabled&&this.contentSlotRef.value&&this.bodyRef.value&&this.popperRef.value)if(this.open){this.emitter.dispatch("show"),document.addEventListener("keydown",this.handleDocumentKeyDown),document.addEventListener("click",this.handleDocumentClick),await n(this.bodyRef.value),this.bodyRef.value.hidden=!1,this.popperRef.value.active=!0;const{keyframes:e,options:t}=p(this,"tooltip.show");await h(this.popperRef.value.popup,e,t),this.popperRef.value.reposition(),this.emitter.dispatch("after-show")}else{this.emitter.dispatch("hide"),document.removeEventListener("keydown",this.handleDocumentKeyDown),document.removeEventListener("click",this.handleDocumentClick),await n(this.bodyRef.value);const{keyframes:e,options:t}=p(this,"tooltip.hide");await h(this.popperRef.value.popup,e,t),this.popperRef.value.active=!1,this.bodyRef.value.hidden=!0,this.emitter.dispatch("after-hide")}}async handleOptionsChange(){this.hasUpdated&&this.popperRef.value&&(await this.updateComplete,this.popperRef.value.reposition())}handleDisabledChange(){this.disabled&&this.open&&this.hide()}async show(){if(!this.open)return this.open=!0,r(this,this.emitter.eventId("after-show"))}async hide(){if(this.open)return this.open=!1,r(this,this.emitter.eventId("after-hide"))}render(){return c` <rpl-popper part="popper" exportparts="
          popup:popper--popup,
          arrow:popper--arrow
        " class="${l({tooltip:!0,"tooltip--open":this.open})}" placement="${this.placement}" distance="${this.distance}" skidding="${this.skidding}" strategy="${this.hoist?"fixed":"absolute"}" flip shift arrow safe-area @mouseenter="${this.interactionController.handleMouseEnter}" @mouseleave="${this.interactionController.handleMouseLeave}" @mousedown="${this.interactionController.handleMouseDown}" @mouseup="${this.interactionController.handleMouseUp}" @focusin="${this.interactionController.handleFocus}" @focusout="${this.interactionController.handleBlur}" ${d(this.popperRef)}> <slot slot="anchor" aria-describedby="tooltip" @click="${this.interactionController.handleClick}" ${d(this.defaultSlotRef)}></slot> <div part="body" id="tooltip" class="tooltip-body" role="tooltip" aria-live="${this.open?"polite":"off"}" ${d(this.bodyRef)}> <slot name="content" ${d(this.contentSlotRef)}>${this.content}</slot> <slot name="shortcut"></slot> </div> </rpl-popper> `}}e([i({type:String,reflect:!0})],m.prototype,"appearance",void 0),e([i()],m.prototype,"content",void 0),e([i()],m.prototype,"placement",void 0),e([i({type:Boolean,reflect:!0})],m.prototype,"disabled",void 0),e([i({type:Number})],m.prototype,"distance",void 0),e([i({type:Boolean,reflect:!0})],m.prototype,"open",void 0),e([i({type:Number})],m.prototype,"skidding",void 0),e([i()],m.prototype,"trigger",void 0),e([i({type:Boolean})],m.prototype,"hoist",void 0),e([i({type:Boolean,attribute:"no-animate"})],m.prototype,"noAnimate",void 0),t("tooltip.show",{keyframes:[{visibility:"visible",opacity:0,scale:.8},{opacity:1,scale:1}],options:{duration:150,easing:"ease"}}),t("tooltip.hide",{keyframes:[{scale:1},{opacity:0,scale:.8}],options:{duration:150,easing:"ease"}});export{m as T,v as a};
