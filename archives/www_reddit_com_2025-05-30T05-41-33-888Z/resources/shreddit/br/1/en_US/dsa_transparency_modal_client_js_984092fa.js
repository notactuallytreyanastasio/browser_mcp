import{t as e,_ as t,n as s,c as o,aJ as i,b as a,e as r}from"./shell-2264602c.js";import{s as n,x as d}from"./icon-82dd10b4.js";let l=class extends n{disconnectedCallback(){super.disconnectedCallback(),this.resizeObserver?.unobserve(document.body),this.resizeObserver?.disconnect()}connectedCallback(){super.connectedCallback(),this.resizeObserver=new ResizeObserver(this.onResize),this.resizeObserver.observe(document.body)}constructor(){super(),this.impressionId="0",this.partialSrc="/svc/shreddit/dsa-transparency-modal/",this.getModal=()=>this.isDesktop?this.querySelector("faceplate-modal"):this.querySelector("faceplate-bottom-sheet"),this.initModalCloseListener=()=>{this.getModal()?.querySelector("#dsa-transparency-modal-close")?.addEventListener("click",this.onCloseModal),this.getModal()?.querySelector("#dsa-transparency-modal-done")?.addEventListener("click",this.onCloseModal)},this.dispatchCloseDsaTransparencyModalEvent=()=>{this.dispatchEvent(o("dsa-transparency-modal-close"))},this.onResize=()=>{if(this.isDesktop){const e=this.getModal();if(e?.clientWidth&&e?.clientWidth<640){const t=e?.querySelector("#dsa-transparency-modal-content");t?.classList.add("flex-wrap")}else{const t=e?.querySelector("#dsa-transparency-modal-content");t?.classList.remove("flex-wrap")}}},this.onCloseModal=()=>{this.getModal()?.close(),this.dispatchCloseDsaTransparencyModalEvent()},this.initModal=()=>{this.getModal()?.showModal(),this.initModalCloseListener(),i(this,a({source:"post",action:"view",noun:"about_this_ad"},{post:{id:this.postId},ad_metadata:{impression_id:this.impressionId,placement:this.placement},screen:{height:window.screen.height,width:window.screen.width}}))}}render(){return d`<slot></slot>`}};l.styles=[e],t([s({type:Boolean,attribute:"is-desktop"})],l.prototype,"isDesktop",void 0),t([s({type:String,attribute:"post-id"})],l.prototype,"postId",void 0),t([s({type:String,attribute:"impression-id"})],l.prototype,"impressionId",void 0),t([s({type:String,attribute:"placement"})],l.prototype,"placement",void 0),l=t([r("dsa-transparency-modal")],l);
