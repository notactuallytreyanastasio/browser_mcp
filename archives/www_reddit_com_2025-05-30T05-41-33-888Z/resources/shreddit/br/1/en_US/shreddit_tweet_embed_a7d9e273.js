import{a as t,_ as e,n as s,J as i,e as o,t as r}from"./shell-2264602c.js";import{s as a,x as n}from"./icon-82dd10b4.js";import{e as l,b as d}from"./links-9b598b77.js";const h=t(a),c=["allow-forms","allow-orientation-lock","allow-popups","allow-popups-to-escape-sandbox","allow-presentation","allow-same-origin","allow-scripts","allow-top-navigation-by-user-activation"].join(" ");let p=class extends h{constructor(){super(...arguments),this.postId="",this.limitHeight=!1,this.onMessage=t=>{const{data:e}=t;if(!t.source||t.source!==this.iframe?.contentWindow||"tweet-measured"!==e?.action||l(e?.id36)!==this.postId)return;this.iframe.height=`${e?.height}px`,this.limitHeight&&e?.height>550?(this.renderRoot?.querySelector(`#${this.postId}-tweet-overflow`)?.classList.remove("hidden"),this?.style.setProperty("height","550px")):this?.style.setProperty("height",`${e?.height+4}px`),this.renderRoot?.querySelector(`#${this.postId}-tweet-loading-placeholder`)?.remove();const s=document.querySelector(`#${this.postId}-post-media-container`),i=s?.querySelector(`#${this.postId}-aspect-ratio`);if(i){const t=this.offsetHeight/this.offsetWidth;i?.style.setProperty("--aspect-ratio",`${t}`);const e=this.offsetHeight-i.offsetHeight;i?.style.setProperty("height",`${e}px`)}}}static get styles(){return[r]}connectedCallback(){super.connectedCallback(),window.addEventListener("message",this.onMessage)}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("message",this.onMessage)}onIframeLoad(){this.iframe?.contentWindow?.postMessage("twitter-measure-requested","https://www.redditmedia.com")}render(){const t=`${d(this.postId)}?responsive=true&is_nightmode=${matchMedia("(prefers-color-scheme: dark)").matches}`;return n` <div id="${this.postId}-tweet-loading-placeholder" class="${this.className} bg-neutral-background-weak absolute left-0 right-0 top-0 bottom-0"></div> <div class="overflow-hidden flex justify-center w-100 ${this.limitHeight?"max-h-[550px] ":""}"> <iframe id="${this.postId}-tweet-iframe" scrolling="no" allowfullscreen class="items-center overflow-hidden b-0 border-transparent justify-center bg-neutral-background-weak max-w-[550px] rounded-[14px]" max-width="${"550px"}" width="100%" title="${this.title}" aria-label="Tweet: ${this.title}" src="${t}" sandbox="${c}" @load="${this.onIframeLoad}" allowtransparency="true"></iframe> </div> ${this.limitHeight?n`<div id="${this.postId}-tweet-overflow" class="h-[66px] mt-[-66px] w-100 from-[color:var(--color-neutral-background-weak)] bg-gradient-to-t hidden isolate pointer-events-none"></div>`:""} `}};e([s({type:String,attribute:"post-id"})],p.prototype,"postId",void 0),e([s({type:Boolean,attribute:"limit-height"})],p.prototype,"limitHeight",void 0),e([i("iframe")],p.prototype,"iframe",void 0),p=e([o("shreddit-tweet-embed")],p);
