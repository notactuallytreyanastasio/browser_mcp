import{a as e,_ as s,n as t,e as i,g$ as n,E as r,b as c}from"./shell-2264602c.js";import{s as o}from"./icon-82dd10b4.js";const a=e(o);let h=class extends a{constructor(){super(...arguments),this._v2Events=new n(this,(e=>{this.checkAndSendImpressionEvent(e)})),this._events=new r(this,(()=>window)),this._trackEvent=this._events.define("track-event",(async e=>{e.composedPath().includes(this)&&this.checkAndSendImpressionEvent(e.detail.details)})),this.checkAndSendImpressionEvent=e=>{if(!e.search?.impression_id)return;const{search:s,action_info:t}=e,i=JSON.parse(sessionStorage.getItem("search_impression_cache")||"[]"),n=new Set([...i]);if(n.has(s.impression_id))return;n.add(s.impression_id),sessionStorage.setItem("search_impression_cache",JSON.stringify([...n]));const r=c({source:"search",action:"create",noun:"impression_id"},{...e,search:{...s,impression_id:s.impression_id},action_info:{...t,type:this.searchTelemetrySource}});this.trackEvent(r)}}createRenderRoot(){return this}};s([t({attribute:"search-telemetry-source",type:String})],h.prototype,"searchTelemetrySource",void 0),h=s([i("search-dynamic-id-cache-controller")],h);
