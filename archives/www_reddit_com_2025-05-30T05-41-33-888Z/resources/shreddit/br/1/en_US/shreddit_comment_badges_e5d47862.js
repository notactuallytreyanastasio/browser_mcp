import{_ as t,n as e,e as i,P as s,aK as a,t as n,T as o,Q as d}from"./shell-2264602c.js";import{s as r,a as l,x as c,K as h,I as m,A as p,au as u,av as b}from"./icon-82dd10b4.js";import{b as g,c as y,g as C,a as k}from"./distinguished-tags-ad178980.js";import{C as x}from"./comment-8177f9ce.js";import{o as S}from"./age-gate-standalone-client-js-5357b0cf.js";let v=class extends r{constructor(){super(...arguments),this.pubsub=new s(this),this.class="",this.thingId="",this.isOP=!1,this.isCollaborator=!1,this.isCommentDeleted=!1,this.paidSubscriberBadge=!1,this.handleCommentUpdated=({commentId:t,action:e,value:i})=>{this.thingId===t&&e===x.distinguishAsMod?this.distinguishedAs=i?a.Moderator:void 0:this.thingId===t&&e===x.distinguishAsAdmin&&(this.distinguishedAs=i?a.Admin:void 0)},this.handleCommentDeleted=({commentId:t})=>{this.thingId===t&&(this.isCommentDeleted=!0)}}static get styles(){return[n,l`:host{display:contents}`]}get authorType(){return this.isCommentDeleted?"":this.distinguishedAs===a.Admin?"admin":this.distinguishedAs===a.Moderator?"moderator":this.isOP?"op":this.isCollaborator?"collaborator":""}connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(o.CommentUpdated,this.handleCommentUpdated,!1),this.pubsub.subscribe(o.CommentDeleted,this.handleCommentDeleted,!1)}disconnectedCallback(){super.disconnectedCallback(),this.pubsub.unsubscribe(o.CommentUpdated,this.handleCommentUpdated),this.pubsub.unsubscribe(o.CommentDeleted,this.handleCommentDeleted)}render(){const t=this.authorType,e=`font-semibold text-12 tracking-wide uppercase ${this.class} ${t}`,i=c`<span class="${S(e,"comment-op-icon-js text-alienblue-600")}" aria-label="Comment distinguished as the original poster"> ${g()} </span>`,s=h({size:m.ExtraSmall,attributes:{className:"text-club-plain","aria-label":"Community Club member icon"}});switch(t){case"moderator":return c`<span class="${S(e,"text-identity-moderator")}" aria-label="Comment distinguished by moderator"> ${k()} </span>`;case"admin":return c`<span class="${S(e,"text-identity-admin")}" aria-label="Comment distinguished by admin"> ${C()} </span>`;case"op":return c`<div class="flex items-center gap-2xs"> ${this.paidSubscriberBadge?c`<span class="flex items-center">${s}</span>`:p}${i} </div>`;case"collaborator":return c`<span class="${S(e,"text-alienblue-600")}" aria-label="Comment distinguished as a post collaborator"> ${y()} </span>`;default:return this.paidSubscriberBadge?s:p}}};t([e({type:String})],v.prototype,"class",void 0),t([e({type:String,attribute:"thing-id"})],v.prototype,"thingId",void 0),t([e({type:String,attribute:"distinguished-as"})],v.prototype,"distinguishedAs",void 0),t([e({type:Boolean,attribute:"op"})],v.prototype,"isOP",void 0),t([e({type:Boolean,attribute:"collaborator"})],v.prototype,"isCollaborator",void 0),t([e({type:Boolean,attribute:"comment-deleted"})],v.prototype,"isCommentDeleted",void 0),t([e({type:Boolean,attribute:"paid-subscriber-badge"})],v.prototype,"paidSubscriberBadge",void 0),v=t([i("shreddit-comment-author-modifier-icon")],v);let D=class extends(d(r)){constructor(){super(...arguments),this.thingId="",this.iconSize=m.Small,this.isDeleted=!1,this.isLocked=!1,this.isStickied=!1,this.isOP=!1,this.handleCommentUpdated=({commentId:t,action:e,value:i})=>{if(this.thingId===t)switch(e){case x.distinguishAsMod:this.distinguishedAs=i?a.Moderator:void 0;break;case x.sticky:this.isStickied=Boolean(i);break;case x.lock:this.isLocked=Boolean(i)}},this.handleCommentDeleted=({commentId:t})=>{this.thingId===t&&(this.isDeleted=!0)}}connectedCallback(){super.connectedCallback(),this.subscribe(o.CommentUpdated,this.handleCommentUpdated),this.subscribe(o.CommentDeleted,this.handleCommentDeleted)}disconnectedCallback(){super.disconnectedCallback(),this.unsubscribe(o.CommentUpdated,this.handleCommentUpdated),this.unsubscribe(o.CommentDeleted,this.handleCommentDeleted)}renderLockedIcon(){return this.isDeleted||!this.isLocked?null:u({size:this.iconSize,attributes:{"aria-label":"Locked comment",className:"lock-icon text-alert-caution"}})}renderStickiedIcon(){if(this.isDeleted||!this.isStickied)return null;let t;return this.distinguishedAs===a.Admin?t="text-identity-admin":this.distinguishedAs===a.Moderator?t="text-identity-moderator":this.isOP&&(t="text-action-secondary"),this.isLocked?b({size:this.iconSize,attributes:{"aria-label":"Stickied comment",className:t}}):c` <span class="text-12 text-neutral-content inline-flex items-center gap-2xs"> ${b({attributes:{"aria-hidden":"true"},size:this.iconSize})} <span> Stickied comment </span> </span> `}render(){const t=this.renderLockedIcon(),e=this.renderStickiedIcon();return t||e?c` <span class="ml-2xs text-12 text-neutral-content-weak">\u2022</span> ${t} ${e} `:null}};D.styles=[l`:host{display:inline-flex;align-items:center;gap:var(--spacer-2xs)}`,n],t([e({type:String,attribute:"thing-id"})],D.prototype,"thingId",void 0),t([e({type:String,attribute:"icon-size"})],D.prototype,"iconSize",void 0),t([e({type:Boolean,attribute:"deleted"})],D.prototype,"isDeleted",void 0),t([e({type:Boolean,attribute:"locked"})],D.prototype,"isLocked",void 0),t([e({type:Boolean,attribute:"stickied"})],D.prototype,"isStickied",void 0),t([e({type:Boolean,attribute:"op"})],D.prototype,"isOP",void 0),t([e({type:String,attribute:"distinguished-as"})],D.prototype,"distinguishedAs",void 0),D=t([i("shreddit-comment-badges")],D);
