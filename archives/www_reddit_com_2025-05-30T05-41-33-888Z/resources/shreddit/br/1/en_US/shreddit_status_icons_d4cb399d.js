import{Q as t,T as s,t as i,_ as e,n,e as o}from"./shell-2264602c.js";import{P as a}from"./overflow-menu-actions-97fa1cfc.js";import{x as r,s as c}from"./icon-82dd10b4.js";import"./distinguished-tags-ad178980.js";const d=t(c),l="hidden";let h=class extends d{constructor(){super(...arguments),this.thingId="",this.onPostUpdateAction=t=>{if(t.postId!==this.thingId)return;const{action:s,value:i}=t;switch(s){case a.lock:this.updateStatusIconVisibility("lock-status",i);break;case a.sticky:case a.updateHighlightedPost:this.updateStatusIconVisibility("stickied-status",i)}},this.handlePostTranslationOverride=t=>{if(t.id===this.thingId||t.isContextUpdateEvent){void 0===this.translationOverrideActive&&(this.translationOverrideActive=t.isTranslationActive),t.isContextUpdateEvent&&(this.translationOverrideActive=void 0);const s=this.translationOverrideActive===t.isTranslationActive;this.updateStatusIconVisibility("translation-status-icon",s&&t.isTranslationActive),this.updateStatusIconVisibility("translation-reverted-status-icon",s&&!t.isTranslationActive)}}}connectedCallback(){super.connectedCallback(),this.subscribe(s.PostUpdated,this.onPostUpdateAction),this.subscribe(s.I18nPostTranslationOverride,this.handlePostTranslationOverride,!1)}disconnectedCallback(){super.disconnectedCallback(),this.unsubscribe(s.PostUpdated,this.onPostUpdateAction),this.unsubscribe(s.I18nPostTranslationOverride,this.handlePostTranslationOverride)}updateStatusIconVisibility(t,s){const i=this.getStatusIconElement(t),e=this.getSeparatorIconElement();i&&(s?this.showIcon(i):this.hideIcon(i)),e&&(s?this.showIcon(e):this.hideIcon(e))}getStatusIconElement(t){return(this.shadowRoot?.querySelector("slot")?.assignedElements()||[]).map((t=>"svg"===t.tagName.toLowerCase()?t:t.querySelector("svg"))).find((s=>s?.getAttribute("class")?.includes(t)))}getSeparatorIconElement(){return(this.shadowRoot?.querySelector("slot")?.assignedElements()||[]).find((t=>t.getAttribute("class")?.includes("separator")))}showIcon(t){t.classList.remove(l)}hideIcon(t){t.classList.add(l)}render(){return r`<slot></slot>`}};h.styles=[i],e([n({type:String,attribute:"thing-id"})],h.prototype,"thingId",void 0),h=e([o("shreddit-status-icons")],h);export{h as ShredditStatusIcons};
