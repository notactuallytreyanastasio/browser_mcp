import{_ as t,n as e,J as i,ae as s,e as a,a7 as n,g as o,g_ as r,w as l,x as h,aU as d,a_ as c,aV as p}from"./shell-2264602c.js";import{s as u,x as g,a as m,cr as v,I as y,cs as f,aE as b,ct as I,l as x}from"./icon-82dd10b4.js";import{T as w}from"./TinyGesture-89d9957c.js";import{F as _}from"./age-gate-standalone-client-js-5357b0cf.js";import{b as C,B as P}from"./subreddit-posting-eligibility-8f99a053.js";var S;!function(t){t.PLAIN="plain",t.MEDIA="media"}(S||(S={}));const A=12;let B=class extends u{constructor(){super(...arguments),this.pages=0,this.pageIndex=0,this.appearance=S.PLAIN,this.animationDuration=0,this.containerLabel="",this.numVisible=2,this.centerIndexPosition=3,this.setTransitionDuration=async()=>{this._dotsContainer&&(await this.updateComplete,this._dotsContainer.style.setProperty("--pagination-transition-duration",`${this.animationDuration}ms`))},this.animateInfiniteCurrentPage=t=>{if(this._currentPageIndicator){const e=[{transform:t?`translate3d(${A*this.pages}px, 0,0)`:"translate3d(-12px, 0,0)",opacity:0},{opacity:0,transform:t?"translate3d(-12px, 0,0)":`translate3d(${A*this.pages}px, 0,0)`},{opacity:1,transform:t?"translate3d(0px, 0,0)":`translate3d(${A*(this.pages-1)}px, 0,0)`}],i={duration:this.animationDuration,fill:"forwards",iterations:1};this.setDotsTrackTransform(!t),this._currentPageIndicator.animate(e,i)}},this.animateCurrentPage=async()=>{this.setDotsTrackTransform(),this.animateCurrentPageNumber()},this.animateCurrentPageNumber=()=>{if(this._currentPageIndicator){const t=[{width:"var(--rem6)"},{width:"var(--rem18)",borderRadius:"4px"},{width:"var(--rem6)",transform:`translate3d(${A*this.pageIndex}px, 0,0)`}],e={duration:this.animationDuration,fill:"forwards",iterations:1};this._currentPageIndicator.animate(t,e)}},this.onSelect=t=>{const e=new CustomEvent("pagination-click",{detail:{pageIndex:t},bubbles:!0,composed:!0});this.dispatchEvent(e)},this.isEdgeDot=t=>{if(this.pages>=6){const e=t===this.pageIndex-3,i=t===this.pageIndex+3;return e||i}return!1},this.getDotButton=t=>{const e=Math.abs(t-this.pageIndex),i=t=>t===this.pageIndex?`(${this.currentPageLabel??"Current Page"})`:"",s=this.getPageLabels?`${this.getPageLabels(t)} ${i(t)}`:`Page ${t+1} ${i(t)}`,a=0===e||1===e;return g`<button class="${n({dot:!0,edge:this.isEdgeDot(t)})}" aria-hidden="${!a}" tabindex="${a?0:-1}" @click="${e=>{0===e.target.tabIndex&&this.onSelect(t)}}" @keydown="${e=>{"Enter"!==e.key&&"Space"!==e.key||this.onSelect(t)}}"> <faceplate-screen-reader-content>${s}</faceplate-screen-reader-content> </button>`},this.render=()=>{if(0!==this.pages)return g` <div id="dots-container"> <div class="dots-track-container"> <div id="dots-track" role="group" aria-label="${this.containerLabel}"> ${this.currentPageIndicator} ${[...Array(this.pages).keys()].map(((t,e)=>this.getDotButton(e)))} </div> </div> </div> `}}static get styles(){return m`:host{display:inline-flex;height:var(--rem16,1rem);width:100%;justify-content:center}:host #dots-container{display:inline-flex;position:relative;height:100%;overflow:hidden;align-items:center;border-radius:var(--rem8,.5rem);padding:0 var(--rem2,.125rem);transition:width ease-in-out var(--pagination-transition-duration)}:host .dots-track-container{position:relative;height:100%;width:100%;display:flex;align-items:center}:host #dots-track{display:flex;position:absolute;left:0;height:var(--rem12,.75rem);overflow:hidden;box-sizing:border-box;font-size:var(--rem10,.625rem);align-items:center;transition:transform ease-in-out var(--pagination-transition-duration)}:host([appearance=media]) #dots-container{background-color:var(--color-media-background)}:host([appearance=media]) .dot{background-color:var(--color-media-onbackground-disabled)}:host .dot:focus-visible{outline:solid 1px var(--color-global-focus)}:host([appearance=media]) #current-page-indicator.number{color:var(--color-media-onbackground)}:host([appearance=media]) #current-page-indicator.dot{background-color:var(--color-media-onbackground)}:host #current-page-indicator{z-index:2;position:absolute}:host #current-page-indicator.number{color:var(--color-neutral-content);display:flex;align-items:center;justify-content:center;transition:transform ease-in-out var(--pagination-transition-duration)}:host #current-page-indicator.dot{background-color:var(--color-neutral-content)}:host .dot{height:var(--rem6,.375rem);width:var(--rem6,.375rem);border-radius:50%;box-sizing:content-box;display:inline-block;margin:calc(var(--rem2,.125rem) + var(--rem1,.0625rem));padding:0;border:none}:host #current-page-indicator.number{height:var(--rem15,.9375rem);width:var(--rem16,1rem);margin:0}:host .dot{background-color:var(--color-neutral-border);background-clip:content-box;transition:all ease-in-out var(--pagination-transition-duration)}:host .dot[tabindex='0']{cursor:pointer}:host .dot:focus{transition:none}:host .dot.edge{height:calc(var(--rem2) + var(--rem1));width:calc(var(--rem2) + var(--rem1));margin:.28125rem;flex-shrink:0}`}willUpdate(t){t.has("pageIndex")&&(this.pageIndex<0||this.pageIndex>this.pages-1)&&(this.pageIndex=0)}async updated(t){await this.updateComplete,(t.has("pageIndex")||t.has("pages"))&&this.shrinkOrStretch();const e=t.get("pageIndex")===this.pages-1&&0===this.pageIndex,i=0===t.get("pageIndex")&&this.pageIndex===this.pages-1;e||i?this.animateInfiniteCurrentPage(e):t.has("pageIndex")&&await this.animateCurrentPage(),t.has("animationDuration")&&this.setTransitionDuration()}shrinkOrStretch(){this.pages>=6?0===this.pageIndex||this.pageIndex===this.pages-1?this.numVisible=4:1===this.pageIndex||this.pageIndex===this.pages-2?this.numVisible=5:2===this.pageIndex||this.pageIndex===this.pages-3?this.numVisible=6:this.pageIndex>=3&&this.pageIndex<=this.pages-4&&(this.numVisible=7):this.numVisible=this.pages,this._dotsContainer&&(this._dotsContainer.style.width=`calc(var(--rem12, 0.75rem) * ${this.numVisible})`)}setDotsTrackTransform(t){const e=this.pageIndex-this.centerIndexPosition,i=e>0?e:0;if(this._dotsTrack){const e=`translate3d(${A*i*-1}px, 0,0)`;e!==this._dotsTrack.style.transform?this._dotsTrack.style.transform=e:t&&"translate3d(0px, 0,0)"!==this._dotsTrack.style.transform&&(this._dotsTrack.style.transform="translate3d(0px, 0,0)")}}get currentPageIndicator(){return g`<span id="current-page-indicator" class="dot" aria-hidden="true"></span>`}};t([e({type:Number})],B.prototype,"pages",void 0),t([e({type:Number,attribute:"page-index"})],B.prototype,"pageIndex",void 0),t([e({type:String})],B.prototype,"appearance",void 0),t([e({type:Number,attribute:"animation-duration"})],B.prototype,"animationDuration",void 0),t([e({type:String,attribute:"current-page-label"})],B.prototype,"currentPageLabel",void 0),t([e()],B.prototype,"getPageLabels",void 0),t([e({type:String,attribute:"container-label"})],B.prototype,"containerLabel",void 0),t([i("#dots-container")],B.prototype,"_dotsContainer",void 0),t([i("#dots-track")],B.prototype,"_dotsTrack",void 0),t([i("#current-page-indicator")],B.prototype,"_currentPageIndicator",void 0),t([s(".dot")],B.prototype,"_dots",void 0),B=t([a("faceplate-pagination-indicator")],B);let D=class extends u{constructor(){super(...arguments),this.appearance=S.PLAIN,this.autoplay=0,this.pages=0,this.pageIndex=0,this.isAnimationFinished=!1,this._currentAnimation=null,this.handleAutoplayInterruption=async t=>{this.cancelAnimation(t)},this.cancelAnimation=async t=>{const e=await this._autoplayPillContainer;if(e){const{children:i}=e;if(i[t]?.firstElementChild){const e=i[t]?.firstElementChild?.getAnimations().map((t=>(t.cancel(),t.ready)));e&&await Promise.all(e)}}},this.resetAnimations=async()=>{const t=await this._autoplayPillContainer;if(t){const{children:e}=t;for(let t=0;t<e.length;t++)this.cancelAnimation(t)}},this.animatePill=async()=>{this.isAnimationFinished=!1;try{await this.updateComplete,this._currentAnimation?.cancel();const t=[{backgroundColor:"var(--color-neutral-border-medium)",width:0,height:"var(--rem4)"},{backgroundColor:"var(--color-neutral-border-medium)",width:"100%",height:"var(--rem4)"}],e={duration:this.autoplay,fill:"forwards",iterations:1},{children:i}=await this._autoplayPillContainer,s=i?.[this.pageIndex]?.firstElementChild;this._currentAnimation=s?.animate(t,e),await(this._currentAnimation?.finished),this.isAnimationFinished=!0}catch(t){t instanceof DOMException&&"AbortError"===t.name||console.error(t)}},this.pauseAnimation=()=>{this._currentAnimation?.pause()},this.resumeAnimation=()=>{this._currentAnimation?.play()},this.render=()=>{if(0!==this.pages)return g` <div class="pagination-container"> <div class="${n({"pagination-controls":!0,plain:this.appearance===S.PLAIN,media:this.appearance===S.MEDIA,autoplay:this.autoplay})}"> <span id="autoplay-pill-container">${[...Array(this.pages).keys()].map(((t,e)=>g`<span class="${n({track:!0,"in-view":this.pageIndex===e})}"> <span class="${n({autoplayPill:!0,"in-view":this.pageIndex===e,viewed:e<this.pageIndex,plain:this.appearance===S.PLAIN,media:this.appearance===S.MEDIA})}"></span> </span>`))}</span> </div> </div> `}}static get styles(){return m`:host{display:block;box-sizing:border-box}.pagination-container{display:flex;justify-content:center}.track.in-view{height:var(--rem4,.25rem);border-radius:var(--rem2,.125rem)}.autoplayPill,.track{height:var(--rem2,.125rem);display:inline-block;border-radius:var(--rem2,.0625);width:100%}.autoplayPill{position:absolute}.track{background-color:var(--color-neutral-border);flex:1;margin:0 var(--rem2,.125rem);display:inline-block;position:relative}#autoplay-pill-container{display:flex;width:100%;align-items:center}.autoplayPill.viewed{background-color:var(--color-neutral-border-medium)}.pagination-controls.autoplay{width:90%}.pagination-controls.media.autoplay{position:absolute;bottom:var(--rem12,.75rem);z-index:2}.pagination-controls{display:flex;align-items:center;justify-content:center}.pagination-controls.plain .current-page-indicator{color:var(--color-media-onbackground)}.pagination-controls.media .current-page-indicator{color:var(--color-neutral-content)}`}updated(t){t.has("pageIndex")&&!this.isAnimationFinished&&this.handleAutoplayInterruption(t.get("pageIndex"))}};var k,E,T,$,O;t([e({type:String,attribute:"appearance"})],D.prototype,"appearance",void 0),t([e({type:Number})],D.prototype,"autoplay",void 0),t([e({type:Number})],D.prototype,"pages",void 0),t([e({type:Number,attribute:"page-index"})],D.prototype,"pageIndex",void 0),t([o()],D.prototype,"isAnimationFinished",void 0),t([r("#autoplay-pill-container")],D.prototype,"_autoplayPillContainer",void 0),D=t([a("faceplate-carousel-pagination")],D),function(t){t.OUTSIDE="outside",t.INSIDE="inside",t.OFF="off"}(k||(k={})),function(t){t.NEXT="next",t.BOTH="both",t.OFF="off"}(E||(E={})),function(t){t.INSIDE="inside",t.OUTSIDE="outside",t.OFF="off"}(T||(T={})),function(t){t.FORWARDS="forwards",t.BACKWARDS="backwards"}($||($={})),function(t){t.LEFT="left",t.CENTER="center",t.OFF="off"}(O||(O={}));let L=class extends u{constructor(){super(...arguments),this.navPlacement=T.OUTSIDE,this.paginationPlacement=k.OUTSIDE,this.autoplay="default",this.advanceAnimation=!1,this.numVisible=1,this.infinite=!1,this.inset=E.OFF,this.startIndex=0,this._pageIndex=0,this.pageCount=0,this.isCarouselInitialized=!1,this.hasBeenInteractedWith=!1,this._childCount=0,this._autoplayTimeoutId=null,this._isInsetBothAllowed=!1,this._lowerBoundOffset=0,this._upperBoundOffset=0,this._prevButtonHidden=!1,this._isNextButtonHidden=!1,this._gap=0,this._gapTotal=0,this._autoplayPaginationRef=c(),this._carouselListRef=c(),this._gesture=null,this.firstRender=!0,this.autoplayInProgress=!1,this.hidePrevButton=!1,this.hideNextButton=!1,this.emitter=_(this),this._animationStartTime=0,this._animationRemainingTime=0,this.generateAriaLiveMsg=({pageIndex:t,numVisible:e,pageCount:i})=>{const s=t*e+1;return e>1?`Items ${s} through ${s+e-1} of ${i}`:`Item ${s} of ${i}`},this.updated=async t=>{(t.has("numVisible")||t.has("infinite")||t.has("inset")||t.has("autoplay")||t.has("navPlacement")||t.has("paginationPlacement")||t.has("pageWidth"))&&((t.has("inset")||t.has("navPlacement"))&&(this.cachedDimensions=null),this.firstRender||this.resetAndInitialize()),(t.has("_pageIndex")||t.has("infinite"))&&this.toggleDisabledProgressButtons()},this.resetAndInitialize=()=>{this.resetCarousel(),this.initializeCarousel()},this.initializeResize=()=>{this.resizeObserver&&this.resizeObserver.disconnect(),this.resizeObserver=new ResizeObserver((async()=>{if(!this.firstRender){this.cachedDimensions=null,await new Promise((t=>requestAnimationFrame(t)));const{width:t}=this.getCarouselDimensions();await this.showFirstChild(t)}})),this.resizeObserver.observe(this)},this.intersectionCallback=t=>{t.forEach((t=>{t.target.style.visibility=t.isIntersecting?"visible":"hidden"}));const e=new CustomEvent("__TEST-ONLY_carousel-intersection");this.dispatchEvent(e)},this.initializeIntersectionObserver=()=>{if(this._intersectionObserver=new IntersectionObserver(this.intersectionCallback,{root:this._carouselListRef?.value}),this.carouselSlot.children)for(const t of Array.from(this.carouselSlot.children))this._intersectionObserver.observe(t)},this.onPaginationClick=t=>{this.goToPage(t.detail.pageIndex,!0)},this.initializeCarousel=()=>{if(this.isCarouselInitialized)return;const{children:t}=this.carouselSlot;this.setChildAndPageCount(t),this.handleAutoPlay(),this._isInsetBothAllowed=this._childCount>=3&&(this.inset===E.BOTH||this.alignment===O.CENTER),this.infinite&&this.cloneBoundElements({children:t});if(this.navPlacement===T.INSIDE&&this.paginationPlacement===k.INSIDE||!this.firstRender){const{width:t}=this.getCarouselDimensions();this.showFirstChild(t)}this.firstRender=!1,this.isCarouselInitialized=!0,this.initListMutationObserver(),this.initializeVisibility(),this.initializeIntersectionObserver(),this.toggleDisabledProgressButtons(),this._paginationCounter?.[0]&&(this._paginationCounter[0].style.visibility=this.pageCount<=5?"hidden":"visible");const e=new CustomEvent("__TEST-ONLY_carousel-initialized");this.dispatchEvent(e)},this.showFirstChild=async t=>{!this.hasBeenInteractedWith&&this.startIndex&&(this._pageIndex=this.startIndex),await this.setChildDimensions(t),this.goToPage(this.pageIndex,!1);const e=new CustomEvent("__TEST-ONLY_carousel-children-ready",{bubbles:!0});this.dispatchEvent(e)},this.handleAutoPlay=async()=>{"off"===this.autoplay||isNaN(this._autoplaySpeed)||(this.autoplayInProgress&&this.clearAnimationTimeout(),this.autoplayInProgress=!0,(this.infinite||this._pageIndex<this.pageCount-1)&&(this._animationStartTime=Date.now(),this._autoplayPaginationRef?.value?.animatePill(),this._autoplayTimeoutId=setTimeout((async()=>{await this.slideForwards(),this.handleAutoPlay()}),this._autoplaySpeed)))},this.cachedDimensions=null,this.getCarouselDimensions=()=>{if(this.cachedDimensions)return this.cachedDimensions;const t=this._carouselListRef.value?.getBoundingClientRect(),{width:e}=t;return this.cachedDimensions={width:e,height:t.height},this.cachedDimensions},this.calcChildWidth=t=>{if(this.pageWidth)return"string"==typeof this.pageWidth&&this.pageWidth.endsWith("%")?t*(parseInt(this.pageWidth)/100):this.pageWidth;let e=0;this._gapTotal=this._gap*(this.numVisible-1)||0,this.inset!==E.OFF&&(e=48*(this.inset===E.NEXT?1:2),this._gapTotal=this._gap*(this.inset===E.NEXT?this.numVisible:this.numVisible+1));return(t-this._gapTotal-e)/this.numVisible},this.setChildDimensions=async t=>{this._gap=parseInt(getComputedStyle(this.carouselSlot).getPropertyValue("gap"))||0;for(const e of Array.from(this.carouselSlot.children)){const{width:i}=e.getBoundingClientRect(),s=e;if(s.style.boxSizing="border-box",t){const e=this.calcChildWidth(t);e!==i&&(s.style.width="number"==typeof e?`${e}px`:e)}"100%"!==s.style.height&&(s.style.height="100%"),"hidden"!==s.style.overflow&&(s.style.overflow="hidden")}},this.prepareNextSlideVisibility=t=>{for(let e=t;e<t+this.numVisible;e++)this.carouselSlot.children[e].style.visibility="visible"},this.handleTranslateXWithOffset=async({element:t,startIndex:e})=>{this.prepareNextSlideVisibility(e);let i="";const s=this.insetWidth(t);if(this._isInsetBothAllowed)switch(e){case 0:i=this.exceedMarginAllowed?`calc(-1 * ${t.offsetLeft}px + 1rem)`:`calc(-1 * ${t.offsetLeft}px)`;break;case this.pageCount-1:i=this.exceedMarginAllowed?`calc(\n              -1 * (${t.offsetLeft}px - ${2*s}px - ${this._gap*this.numGaps}px)\n              - 1rem)`:`calc(\n                -1 * (${t.offsetLeft}px - ${2*s}px - ${this._gap*this.numGaps}px))`;break;default:i=`calc(-1 * (${t.offsetLeft}px - ${s}px - ${this._gap}px))`}else{const e=getComputedStyle(this.carouselSlot),s=parseInt(e.paddingLeft||"0"),a=parseInt(e.paddingRight||"0"),n=this.carouselSlot.scrollWidth-(this.carouselSlot.clientWidth-a),o=t.offsetLeft===s?0:t.offsetLeft;i=-Math.min(o,n)+"px"}return this.carouselSlot.style.transform=`translate3d(${i}, 0,0)`,await Promise.all(this.carouselSlot.getAnimations().map((t=>t.finished))).catch((t=>{t instanceof DOMException&&"AbortError"===t.name||console.error(t)}))},this.slideCarousel=async({isWithinBounds:t,direction:e,requestedIndex:i,allowAnimations:s,onSuccessfulSlide:a})=>{const{children:n}=this.carouselSlot;let o=!1;if(this.firstRender||(this.carouselSlot.style.transitionDuration=`${s?this.animationDuration:0}ms`),t){let t=i*this.numVisible+this._lowerBoundOffset;const e=this.carouselSlot.children.length;if(t+this.numVisible>e){const s=i-1,a=t+this.numVisible-e;t=s*this.numVisible+(this.numVisible-a)}await this.handleTranslateXWithOffset({element:n[t],startIndex:t}),o=!0}else this.infinite&&(await this.handleInfiniteSlide({children:n,direction:e}),o=!0);o&&(this.hasBeenInteractedWith||(this.hasBeenInteractedWith=!0),a?.());const r=new CustomEvent("faceplate-carousel:slide",{detail:{prevPositionIndex:this._pageIndex,currPositionIndex:i,direction:e,num_items:this._childCount},bubbles:!0});this.dispatchEvent(r)},this.cloneBoundElements=({children:t})=>{let e=0;const i=this._childCount-1,s=this._isInsetBothAllowed?1:0;for(let e=0;e<this.numVisible+s;e++){const i=t[e]?.cloneNode(!0);i instanceof HTMLElement&&(i.dataset.fpUiCarouselMarker="true",i.id=Math.random().toString(16).slice(2),i.role="presentation",this.carouselSlot.append(i),++this._upperBoundOffset)}const a=this._isInsetBothAllowed?1:0;for(let s=0;s<this.numVisible+a;s++){const a=t[i-s+e++]?.cloneNode(!0);a instanceof HTMLElement&&(a.dataset.fpUiCarouselMarker="true",a.id=Math.random().toString(16).slice(2),a.role="presentation",this.carouselSlot.prepend(a),++this._lowerBoundOffset)}},this.handleInfiniteSlide=async({children:t,direction:e})=>{this.carouselSlot.style.transitionDuration="0s";let i=this._isInsetBothAllowed?1:0;e===$.BACKWARDS&&(i=t.length-this._upperBoundOffset),await this.handleTranslateXWithOffset({element:t[i],startIndex:i}),this.carouselSlot.style.transitionDuration=`${this.animationDuration}ms`;const s=e===$.BACKWARDS?i-this.numVisible:i+this.numVisible;await this.handleTranslateXWithOffset({element:t[s],startIndex:s})},this.setNavButtonVisibility=({type:t,hidden:e})=>{this.navPlacement!==T.OFF&&("next"===t?(this.hideNextButton=e,this._isNextButtonHidden=e):(this.hidePrevButton=e,this._prevButtonHidden=e))},this.toggleDisabledProgressButtons=()=>{if(!this.infinite){const t=0===this.pageIndex,e=this.pageIndex===Math.ceil(this._childCount/this.numVisible)-1,i=0===this._childCount;this.setNavButtonVisibility({type:"previous",hidden:i||t}),this.setNavButtonVisibility({type:"next",hidden:i||e})}},this.resetCarousel=()=>{this.resetChildren(),this.cancelAutoPlay(),this.resetDisabledProgressButtons(),this._pageIndex=0,this.pageCount=0,this.isCarouselInitialized=!1,this._isInsetBothAllowed=!1,this._lowerBoundOffset=0,this._upperBoundOffset=0;const t=new CustomEvent("__TEST-ONLY_carousel-reset");this.dispatchEvent(t)},this.resetChildren=()=>{const{children:t}=this.carouselSlot;let e=0;const i=t.length;for(let s=0;s<i;s++){const i=t[e];i instanceof HTMLElement&&i.dataset.fpUiCarouselMarker?i.remove():e++}},this.clearAnimationTimeout=t=>{"number"==typeof this._autoplayTimeoutId&&(window.clearTimeout(this._autoplayTimeoutId),this.autoplayInProgress=!1,t&&t())},this.cancelAutoPlay=()=>{this.clearAnimationTimeout(this._autoplayPaginationRef?.value?.resetAnimations)},this.onListItemKeydown=t=>{"ArrowLeft"===t.key?this.slideBackwards(t):"ArrowRight"===t.key&&this.slideForwards(t)},this.goToPage=(t,e)=>{if(t<0||t>=this.pageCount)return;let i=$.BACKWARDS;t>this._pageIndex&&(i=$.FORWARDS),this._pageIndex=t,this.slideCarousel({isWithinBounds:!0,direction:i,requestedIndex:t,allowAnimations:e})},this.swipeLeft=t=>{this.slideForwards(t),this.dispatchSwipeEvent($.FORWARDS)},this.swipeRight=t=>{this.slideBackwards(t),this.dispatchSwipeEvent($.BACKWARDS)},this.onInterruptedAutoplay=async t=>{await t(),this.handleAutoPlay()},this.slideHelper=async({navButtonDisabled:t,slide:e,e:i})=>{t||(this._autoplayTimeoutId&&i?this.onInterruptedAutoplay(e):await e())},this.slideForwards=async t=>{const e=this._pageIndex+1,i=e<this.pageCount;await this.slideHelper({navButtonDisabled:this._isNextButtonHidden,slide:async()=>{this._pageIndex=i?e:0,this.slideCarousel({isWithinBounds:i,direction:$.FORWARDS,requestedIndex:e,allowAnimations:!0})},e:t})},this.onKeyDown=(t,e)=>{"Enter"!==t.key&&"Space"!==t.key||(t.preventDefault(),e(t))},this.slideBackwards=async t=>{const e=this._pageIndex-1,i=e>=0;await this.slideHelper({navButtonDisabled:this._prevButtonHidden,slide:async()=>{this._pageIndex=i?e:this.pageCount-1,this.slideCarousel({isWithinBounds:i,direction:$.BACKWARDS,requestedIndex:e,allowAnimations:!0})},e:t})},this.onListItemFocusIn=()=>{this.autoplay&&"off"!==this.autoplay&&(this._animationRemainingTime=this._autoplaySpeed-(Date.now()-this._animationStartTime),this.clearAnimationTimeout(),this.autoplayInProgress=!1,this._autoplayPaginationRef?.value?.pauseAnimation())},this.onListItemBlur=()=>{this.autoplay&&"off"!==this.autoplay&&(this._autoplayPaginationRef?.value?.resumeAnimation(),setTimeout((async()=>{await this.slideForwards(),this.handleAutoPlay()}),this._animationRemainingTime))}}static get styles(){return m`:host{display:flex;position:relative;width:inherit;isolation:isolate;--carousel-gap:var(--spacer-xs, 0.5rem);--carousel-padding:0;--carousel-margin:0}.carousel-container{display:flex;height:auto;align-items:center;position:relative;width:100%}::slotted(:not([slot])){height:100%;display:grid;grid-auto-flow:column;transition:transform;transition-timing-function:ease-out;margin:var(--carousel-margin)!important;padding:var(--carousel-padding)!important;list-style:none;position:relative;gap:var(--carousel-gap)}::slotted([slot=nextButton]),::slotted([slot=prevButton]){display:inline-block}.content-nav-buttons{display:inline-block;position:relative;z-index:2}.content-nav-buttons.hide{visibility:hidden}.content-nav-buttons.left{position:absolute;left:var(--spacer-sm,.75rem)}.content-nav-buttons.outside.right{padding:0 var(--spacer-sm,.75rem)}.content-nav-buttons.inside{position:absolute;top:50%;transform:translateY(-50%)}.content-nav-buttons.inside.left{left:var(--spacer-xs,.5rem)}.content-nav-buttons.inside.right{right:var(--spacer-xs,.5rem)}#carousel-window{position:relative;overflow:hidden;contain:content;display:flex;flex-direction:column;height:100%;flex:1}#carousel-list{height:100%;overflow:hidden;position:relative}:host([pagination-placement=outside]) #pagination-container{padding-top:var(--spacer-xs,.5rem)}:host(:not([nav-placement])) #carousel-window,:host([nav-placement=outside]) #carousel-window{margin-left:var(--rem56,3.5rem)}:host([pagination-placement=inside]) #pagination-container{position:absolute;bottom:var(--rem16,1rem);left:0;right:0;margin:0 auto;width:fit-content}.carousel-actions{position:absolute;right:var(--rem12,.5rem);display:inline-flex;align-items:center;gap:var(--rem12,.75rem)}.carousel-actions.top{top:var(--rem12,.5rem)}.carousel-actions.bottom{bottom:var(--rem16,.1rem)}.hidden{visibility:hidden}.visible{visibility:visible;transition:visibility ease-in}`}get pageIndex(){return this._pageIndex}get carouselSlot(){return this._children.reduce(((t,e)=>e.assignedSlot&&"UL"===e.nodeName?e:t),document.createElement("ul"))}connectedCallback(){if(super.connectedCallback(),this._gesture=new w(this,{mouseSupport:!1}),this._gesture.on("swipeleft",this.swipeLeft),this._gesture.on("swiperight",this.swipeRight),this.initializeResize(),this.isCarouselInitialized){const t=this._pageIndex;this.resetAndInitialize(),this._pageIndex!==t&&this.goToPage(t,!1)}}disconnectedCallback(){super.disconnectedCallback(),this._gesture?.destroy(),this.resizeObserver?.disconnect(),this._listMutationObserver?.disconnect(),this._intersectionObserver?.disconnect()}firstUpdated(){this.initializeCarousel()}async handleChildRemoval(){const{children:t}=this.carouselSlot;this.setChildAndPageCount(t),this._firstViewableIndex>this._childCount-1&&this.slideBackwards(),this._childCount||this.toggleDisabledProgressButtons();const e=new CustomEvent("__TEST-ONLY_carousel-children-reset");this.dispatchEvent(e)}get _firstViewableIndex(){return this.infinite?this.pageIndex*this.numVisible+this._lowerBoundOffset:this.pageIndex*this.numVisible}initListMutationObserver(){this._listMutationObserver&&this._listMutationObserver.disconnect(),this._listMutationObserver=new MutationObserver((t=>{for(const e of t)"childList"===e.type&&this.isCarouselInitialized&&(e.removedNodes.length>0?this.handleChildRemoval():e.addedNodes.length>0&&this.handleChildrenAddition())})),this.carouselSlot&&this._listMutationObserver.observe(this.carouselSlot,{childList:!0})}setChildAndPageCount(t){this._childCount=t.length,this.pageCount=Math.ceil(this._childCount/this.numVisible)}async handleChildrenAddition(){const t=this._childCount,{children:e}=this.carouselSlot;this.setChildAndPageCount(e);const{width:i}=this.getCarouselDimensions();await this.setChildDimensions(i),this._childCount>t&&this.toggleDisabledProgressButtons()}get _autoplaySpeed(){switch(this.autoplay){case"off":return 0;case"default":return 5e3;default:return parseInt(this.autoplay)}}get animationDuration(){return this.advanceAnimation&&!window.matchMedia("(prefers-reduced-motion: reduce)").matches?250:0}get numInsets(){return this.inset===E.BOTH||this.alignment===O.CENTER?2:this.inset===E.NEXT||this.alignment===O.LEFT?1:0}get numGaps(){return this.numVisible+this.numInsets-1}insetWidth(t){const{width:e}=this.getCarouselDimensions();return(e-t.getBoundingClientRect().width*this.numVisible-this._gap*this.numGaps)/this.numInsets}resetDisabledProgressButtons(){this.setNavButtonVisibility({type:"next",hidden:!1}),this.setNavButtonVisibility({type:"previous",hidden:!1})}initializeVisibility(){for(const t of Array.from(this.carouselSlot.children))t.dataset.fpUiCarouselMarker||(t.style.visibility="hidden")}dispatchSwipeEvent(t){const e=new CustomEvent("faceplate-carousel:swipe",{detail:{currPositionIndex:this._pageIndex,direction:t},bubbles:!0});this.dispatchEvent(e)}render(){return g` <div class="carousel-container"> <div id="carousel-window"> <div id="carousel-list" ${p(this._carouselListRef)}> <slot @keydown="${this.onListItemKeydown}" @focusin="${this.onListItemFocusIn}" @focusout="${this.onListItemBlur}"></slot> <span class="carousel-actions top"> <slot name="paginationCounter"></slot> <slot name="closeButton"></slot> </span> <span class="carousel-actions bottom"> <slot name="addButton"></slot> </span> </div> <div id="pagination-container" class="${n({inside:this.paginationPlacement===k.INSIDE})}"> ${this.paginationPlacement===k.OFF?null:this._autoplaySpeed?g`<faceplate-carousel-pagination ${p(this._autoplayPaginationRef)} pages="${this.pageCount}" page-index="${this._pageIndex}" autoplay="${this._autoplaySpeed}" appearance="${this.paginationPlacement===k.INSIDE?S.MEDIA:S.PLAIN}"> </faceplate-carousel-pagination>`:g`<faceplate-pagination-indicator @pagination-click="${this.onPaginationClick}" .getPageLabels="${this.getPageLabels}" numbered current-page-label="${x(this.currentPageLabel)}" appearance="${this.paginationPlacement===k.INSIDE?S.MEDIA:S.PLAIN}" animation-duration="${this.animationDuration}" pages="${this.pageCount}" page-index="${this._pageIndex}" container-label="${x(this.paginationContainerLabel)}"></faceplate-pagination-indicator>`} </div> </div> <slot class="content-nav-buttons left ${n({hide:this.navPlacement===T.OFF||this.hidePrevButton,outside:this.navPlacement===T.OUTSIDE,inside:this.navPlacement===T.INSIDE})}" name="prevButton" @click="${this.slideBackwards}" @keydown="${t=>this.onKeyDown(t,this.slideBackwards)}"> </slot> <slot class="content-nav-buttons right ${n({hide:this.navPlacement===T.OFF||this.hideNextButton,outside:this.navPlacement===T.OUTSIDE,inside:this.navPlacement===T.INSIDE})}" name="nextButton" @click="${this.slideForwards}" @keydown="${t=>this.onKeyDown(t,this.slideForwards)}"> </slot> </div> <faceplate-screen-reader-content aria-live="polite" aria-atomic="true"> ${this.currentAriaLiveMsg??this.generateAriaLiveMsg({pageIndex:this.pageIndex,pageCount:this.pageCount,numVisible:this.numVisible})} </faceplate-screen-reader-content> `}};L.navButton=({placement:t,progress:e,ariaLabel:i})=>{const s=e===$.FORWARDS?"Next Page":"Previous Page";return l({appearance:t===T.INSIDE?"media":"secondary",size:h.Small,leadingIcon:e===$.FORWARDS?v({size:y.Small}):f({size:y.Small}),attributes:{"aria-label":i??s}})},L.closeButton=({attributes:t})=>l({appearance:"media",size:h.Small,leadingIcon:b({size:y.Small}),attributes:t}),L.addButton=({children:t,attributes:e})=>l({appearance:"media",size:h.Small,leadingIcon:I({size:y.Small}),attributes:e,children:t}),L.paginationCounter=({attributes:t,pageIndex:e,pageCount:i})=>C({appearance:P.MEDIA,content:`${e+1} / ${i}`,attributes:t}),t([e({type:String,attribute:"nav-placement",reflect:!0})],L.prototype,"navPlacement",void 0),t([e({type:String,attribute:"pagination-placement",reflect:!0})],L.prototype,"paginationPlacement",void 0),t([e({type:String})],L.prototype,"autoplay",void 0),t([e({type:Boolean,attribute:"advance-animation"})],L.prototype,"advanceAnimation",void 0),t([e({type:Number,attribute:"num-visible"})],L.prototype,"numVisible",void 0),t([e({type:Boolean})],L.prototype,"infinite",void 0),t([e({type:String})],L.prototype,"inset",void 0),t([e({type:String,attribute:"pagination-counter-label"})],L.prototype,"paginationCounterLabel",void 0),t([e({type:Number,attribute:"start-index"})],L.prototype,"startIndex",void 0),t([e()],L.prototype,"getPageLabels",void 0),t([e({type:String,attribute:"current-page-label"})],L.prototype,"currentPageLabel",void 0),t([e({type:String,attribute:"current-aria-live-msg"})],L.prototype,"currentAriaLiveMsg",void 0),t([e({type:String,attribute:"pagination-container-label"})],L.prototype,"paginationContainerLabel",void 0),t([e({type:String,attribute:"page-width"})],L.prototype,"pageWidth",void 0),t([e({type:String})],L.prototype,"alignment",void 0),t([e({type:Boolean,attribute:"exceed-margin-allowed"})],L.prototype,"exceedMarginAllowed",void 0),t([o()],L.prototype,"_pageIndex",void 0),t([o()],L.prototype,"pageCount",void 0),t([o()],L.prototype,"isCarouselInitialized",void 0),t([o()],L.prototype,"hasBeenInteractedWith",void 0),t([d({flatten:!0})],L.prototype,"_children",void 0),t([d({slot:"paginationCounter",flatten:!0})],L.prototype,"_paginationCounter",void 0),t([o()],L.prototype,"firstRender",void 0),t([o()],L.prototype,"autoplayInProgress",void 0),t([o()],L.prototype,"hidePrevButton",void 0),t([o()],L.prototype,"hideNextButton",void 0),L=t([a("faceplate-carousel")],L);export{$ as C,L as F,E as I,T as N,k as P};
