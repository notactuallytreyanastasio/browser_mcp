import{ao as t,_ as e,J as o,n as i,b9 as n,a7 as r,e as a}from"./shell-2264602c.js";import{a as s,x as l}from"./icon-82dd10b4.js";const c=Math.min,p=Math.max,f=Math.round,h=Math.floor,u=t=>({x:t,y:t}),d={left:"right",right:"left",bottom:"top",top:"bottom"},m={start:"end",end:"start"};function y(t,e,o){return p(t,c(e,o))}function g(t,e){return"function"==typeof t?t(e):t}function v(t){return t.split("-")[0]}function b(t){return t.split("-")[1]}function w(t){return"x"===t?"y":"x"}function x(t){return"y"===t?"height":"width"}function P(t){return["top","bottom"].includes(v(t))?"y":"x"}function E(t){return w(P(t))}function R(t){return t.replace(/start|end/g,(t=>m[t]))}function S(t){return t.replace(/left|right|bottom|top/g,(t=>d[t]))}function z(t){return"number"!=typeof t?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(t):{top:t,right:t,bottom:t,left:t}}function A(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function T(t,e,o){let{reference:i,floating:n}=t;const r=P(e),a=E(e),s=x(a),l=v(e),c="y"===r,p=i.x+i.width/2-n.width/2,f=i.y+i.height/2-n.height/2,h=i[s]/2-n[s]/2;let u;switch(l){case"top":u={x:p,y:i.y-n.height};break;case"bottom":u={x:p,y:i.y+i.height};break;case"right":u={x:i.x+i.width,y:f};break;case"left":u={x:i.x-n.width,y:f};break;default:u={x:i.x,y:i.y}}switch(b(e)){case"start":u[a]-=h*(o&&c?-1:1);break;case"end":u[a]+=h*(o&&c?-1:1)}return u}async function L(t,e){var o;void 0===e&&(e={});const{x:i,y:n,platform:r,rects:a,elements:s,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:p="viewport",elementContext:f="floating",altBoundary:h=!1,padding:u=0}=g(e,t),d=z(u),m=s[h?"floating"===f?"reference":"floating":f],y=A(await r.getClippingRect({element:null==(o=await(null==r.isElement?void 0:r.isElement(m)))||o?m:m.contextElement||await(null==r.getDocumentElement?void 0:r.getDocumentElement(s.floating)),boundary:c,rootBoundary:p,strategy:l})),v="floating"===f?{...a.floating,x:i,y:n}:a.reference,b=await(null==r.getOffsetParent?void 0:r.getOffsetParent(s.floating)),w=await(null==r.isElement?void 0:r.isElement(b))&&await(null==r.getScale?void 0:r.getScale(b))||{x:1,y:1},x=A(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({rect:v,offsetParent:b,strategy:l}):v);return{top:(y.top-x.top+d.top)/w.y,bottom:(x.bottom-y.bottom+d.bottom)/w.y,left:(y.left-x.left+d.left)/w.x,right:(x.right-y.right+d.right)/w.x}}const k=function(t){return void 0===t&&(t={}),{name:"flip",options:t,async fn(e){var o,i;const{placement:n,middlewareData:r,rects:a,initialPlacement:s,platform:l,elements:c}=e,{mainAxis:p=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:u="bestFit",fallbackAxisSideDirection:d="none",flipAlignment:m=!0,...y}=g(t,e);if(null!=(o=r.arrow)&&o.alignmentOffset)return{};const w=v(n),P=v(s)===s,z=await(null==l.isRTL?void 0:l.isRTL(c.floating)),A=h||(P||!m?[S(s)]:function(t){const e=S(t);return[R(t),e,R(e)]}(s));h||"none"===d||A.push(...function(t,e,o,i){const n=b(t);let r=function(t,e,o){const i=["left","right"],n=["right","left"],r=["top","bottom"],a=["bottom","top"];switch(t){case"top":case"bottom":return o?e?n:i:e?i:n;case"left":case"right":return e?r:a;default:return[]}}(v(t),"start"===o,i);return n&&(r=r.map((t=>t+"-"+n)),e&&(r=r.concat(r.map(R)))),r}(s,m,d,z));const T=[s,...A],k=await L(e,y),C=[];let O=(null==(i=r.flip)?void 0:i.overflows)||[];if(p&&C.push(k[w]),f){const t=function(t,e,o){void 0===o&&(o=!1);const i=b(t),n=E(t),r=x(n);let a="x"===n?i===(o?"end":"start")?"right":"left":"start"===i?"bottom":"top";return e.reference[r]>e.floating[r]&&(a=S(a)),[a,S(a)]}(n,a,z);C.push(k[t[0]],k[t[1]])}if(O=[...O,{placement:n,overflows:C}],!C.every((t=>t<=0))){var B,$;const t=((null==(B=r.flip)?void 0:B.index)||0)+1,e=T[t];if(e)return{data:{index:t,overflows:O},reset:{placement:e}};let o=null==($=O.filter((t=>t.overflows[0]<=0)).sort(((t,e)=>t.overflows[1]-e.overflows[1]))[0])?void 0:$.placement;if(!o)switch(u){case"bestFit":{var F;const t=null==(F=O.map((t=>[t.placement,t.overflows.filter((t=>t>0)).reduce(((t,e)=>t+e),0)])).sort(((t,e)=>t[1]-e[1]))[0])?void 0:F[0];t&&(o=t);break}case"initialPlacement":o=s}if(n!==o)return{reset:{placement:o}}}return{}}}};const C=function(t){return void 0===t&&(t=0),{name:"offset",options:t,async fn(e){var o,i;const{x:n,y:r,placement:a,middlewareData:s}=e,l=await async function(t,e){const{placement:o,platform:i,elements:n}=t,r=await(null==i.isRTL?void 0:i.isRTL(n.floating)),a=v(o),s=b(o),l="y"===P(o),c=["left","top"].includes(a)?-1:1,p=r&&l?-1:1,f=g(e,t);let{mainAxis:h,crossAxis:u,alignmentAxis:d}="number"==typeof f?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return s&&"number"==typeof d&&(u="end"===s?-1*d:d),l?{x:u*p,y:h*c}:{x:h*c,y:u*p}}(e,t);return a===(null==(o=s.offset)?void 0:o.placement)&&null!=(i=s.arrow)&&i.alignmentOffset?{}:{x:n+l.x,y:r+l.y,data:{...l,placement:a}}}}},O=function(t){return void 0===t&&(t={}),{name:"size",options:t,async fn(e){const{placement:o,rects:i,platform:n,elements:r}=e,{apply:a=()=>{},...s}=g(t,e),l=await L(e,s),f=v(o),h=b(o),u="y"===P(o),{width:d,height:m}=i.floating;let y,w;"top"===f||"bottom"===f?(y=f,w=h===(await(null==n.isRTL?void 0:n.isRTL(r.floating))?"start":"end")?"left":"right"):(w=f,y="end"===h?"top":"bottom");const x=m-l[y],E=d-l[w],R=!e.middlewareData.shift;let S=x,z=E;if(u){const t=d-l.left-l.right;z=h||R?c(E,t):t}else{const t=m-l.top-l.bottom;S=h||R?c(x,t):t}if(R&&!h){const t=p(l.left,0),e=p(l.right,0),o=p(l.top,0),i=p(l.bottom,0);u?z=d-2*(0!==t||0!==e?t+e:p(l.left,l.right)):S=m-2*(0!==o||0!==i?o+i:p(l.top,l.bottom))}await a({...e,availableWidth:z,availableHeight:S});const A=await n.getDimensions(r.floating);return d!==A.width||m!==A.height?{reset:{rects:!0}}:{}}}};function B(t){return D(t)?(t.nodeName||"").toLowerCase():"#document"}function $(t){var e;return(null==t||null==(e=t.ownerDocument)?void 0:e.defaultView)||window}function F(t){var e;return null==(e=(D(t)?t.ownerDocument:t.document)||window.document)?void 0:e.documentElement}function D(t){return t instanceof Node||t instanceof $(t).Node}function N(t){return t instanceof Element||t instanceof $(t).Element}function H(t){return t instanceof HTMLElement||t instanceof $(t).HTMLElement}function W(t){return"undefined"!=typeof ShadowRoot&&(t instanceof ShadowRoot||t instanceof $(t).ShadowRoot)}function j(t){const{overflow:e,overflowX:o,overflowY:i,display:n}=Y(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+o)&&!["inline","contents"].includes(n)}function M(t){return["table","td","th"].includes(B(t))}function V(t){const e=q(),o=Y(t);return"none"!==o.transform||"none"!==o.perspective||!!o.containerType&&"normal"!==o.containerType||!e&&!!o.backdropFilter&&"none"!==o.backdropFilter||!e&&!!o.filter&&"none"!==o.filter||["transform","perspective","filter"].some((t=>(o.willChange||"").includes(t)))||["paint","layout","strict","content"].some((t=>(o.contain||"").includes(t)))}function q(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function I(t){return["html","body","#document"].includes(B(t))}function Y(t){return $(t).getComputedStyle(t)}function _(t){return N(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function X(t){if("html"===B(t))return t;const e=t.assignedSlot||t.parentNode||W(t)&&t.host||F(t);return W(e)?e.host:e}function J(t){const e=X(t);return I(e)?t.ownerDocument?t.ownerDocument.body:t.body:H(e)&&j(e)?e:J(e)}function G(t,e,o){var i;void 0===e&&(e=[]),void 0===o&&(o=!0);const n=J(t),r=n===(null==(i=t.ownerDocument)?void 0:i.body),a=$(n);return r?e.concat(a,a.visualViewport||[],j(n)?n:[],a.frameElement&&o?G(a.frameElement):[]):e.concat(n,G(n,[],o))}function K(t){const e=Y(t);let o=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const n=H(t),r=n?t.offsetWidth:o,a=n?t.offsetHeight:i,s=f(o)!==r||f(i)!==a;return s&&(o=r,i=a),{width:o,height:i,$:s}}function Q(t){return N(t)?t:t.contextElement}function U(t){const e=Q(t);if(!H(e))return u(1);const o=e.getBoundingClientRect(),{width:i,height:n,$:r}=K(e);let a=(r?f(o.width):o.width)/i,s=(r?f(o.height):o.height)/n;return a&&Number.isFinite(a)||(a=1),s&&Number.isFinite(s)||(s=1),{x:a,y:s}}const Z=u(0);function tt(t){const e=$(t);return q()&&e.visualViewport?{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}:Z}function et(t,e,o,i){void 0===e&&(e=!1),void 0===o&&(o=!1);const n=t.getBoundingClientRect(),r=Q(t);let a=u(1);e&&(i?N(i)&&(a=U(i)):a=U(t));const s=function(t,e,o){return void 0===e&&(e=!1),!(!o||e&&o!==$(t))&&e}(r,o,i)?tt(r):u(0);let l=(n.left+s.x)/a.x,c=(n.top+s.y)/a.y,p=n.width/a.x,f=n.height/a.y;if(r){const t=$(r),e=i&&N(i)?$(i):i;let o=t.frameElement;for(;o&&i&&e!==t;){const t=U(o),e=o.getBoundingClientRect(),i=Y(o),n=e.left+(o.clientLeft+parseFloat(i.paddingLeft))*t.x,r=e.top+(o.clientTop+parseFloat(i.paddingTop))*t.y;l*=t.x,c*=t.y,p*=t.x,f*=t.y,l+=n,c+=r,o=$(o).frameElement}}return A({width:p,height:f,x:l,y:c})}function ot(t){return et(F(t)).left+_(t).scrollLeft}function it(t,e,o){let i;if("viewport"===e)i=function(t,e){const o=$(t),i=F(t),n=o.visualViewport;let r=i.clientWidth,a=i.clientHeight,s=0,l=0;if(n){r=n.width,a=n.height;const t=q();(!t||t&&"fixed"===e)&&(s=n.offsetLeft,l=n.offsetTop)}return{width:r,height:a,x:s,y:l}}(t,o);else if("document"===e)i=function(t){const e=F(t),o=_(t),i=t.ownerDocument.body,n=p(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),r=p(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let a=-o.scrollLeft+ot(t);const s=-o.scrollTop;return"rtl"===Y(i).direction&&(a+=p(e.clientWidth,i.clientWidth)-n),{width:n,height:r,x:a,y:s}}(F(t));else if(N(e))i=function(t,e){const o=et(t,!0,"fixed"===e),i=o.top+t.clientTop,n=o.left+t.clientLeft,r=H(t)?U(t):u(1);return{width:t.clientWidth*r.x,height:t.clientHeight*r.y,x:n*r.x,y:i*r.y}}(e,o);else{const o=tt(t);i={...e,x:e.x-o.x,y:e.y-o.y}}return A(i)}function nt(t,e){const o=X(t);return!(o===e||!N(o)||I(o))&&("fixed"===Y(o).position||nt(o,e))}function rt(t,e,o){const i=H(e),n=F(e),r="fixed"===o,a=et(t,!0,r,e);let s={scrollLeft:0,scrollTop:0};const l=u(0);if(i||!i&&!r)if(("body"!==B(e)||j(n))&&(s=_(e)),i){const t=et(e,!0,r,e);l.x=t.x+e.clientLeft,l.y=t.y+e.clientTop}else n&&(l.x=ot(n));return{x:a.left+s.scrollLeft-l.x,y:a.top+s.scrollTop-l.y,width:a.width,height:a.height}}function at(t,e){return H(t)&&"fixed"!==Y(t).position?e?e(t):t.offsetParent:null}function st(t,e){const o=$(t);if(!H(t))return o;let i=at(t,e);for(;i&&M(i)&&"static"===Y(i).position;)i=at(i,e);return i&&("html"===B(i)||"body"===B(i)&&"static"===Y(i).position&&!V(i))?o:i||function(t){let e=X(t);for(;H(e)&&!I(e);){if(V(e))return e;e=X(e)}return null}(t)||o}const lt={convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:o,strategy:i}=t;const n=H(o),r=F(o);if(o===r)return e;let a={scrollLeft:0,scrollTop:0},s=u(1);const l=u(0);if((n||!n&&"fixed"!==i)&&(("body"!==B(o)||j(r))&&(a=_(o)),H(o))){const t=et(o);s=U(o),l.x=t.x+o.clientLeft,l.y=t.y+o.clientTop}return{width:e.width*s.x,height:e.height*s.y,x:e.x*s.x-a.scrollLeft*s.x+l.x,y:e.y*s.y-a.scrollTop*s.y+l.y}},getDocumentElement:F,getClippingRect:function(t){let{element:e,boundary:o,rootBoundary:i,strategy:n}=t;const r=[..."clippingAncestors"===o?function(t,e){const o=e.get(t);if(o)return o;let i=G(t,[],!1).filter((t=>N(t)&&"body"!==B(t))),n=null;const r="fixed"===Y(t).position;let a=r?X(t):t;for(;N(a)&&!I(a);){const e=Y(a),o=V(a);o||"fixed"!==e.position||(n=null),(r?!o&&!n:!o&&"static"===e.position&&n&&["absolute","fixed"].includes(n.position)||j(a)&&!o&&nt(t,a))?i=i.filter((t=>t!==a)):n=e,a=X(a)}return e.set(t,i),i}(e,this._c):[].concat(o),i],a=r[0],s=r.reduce(((t,o)=>{const i=it(e,o,n);return t.top=p(i.top,t.top),t.right=c(i.right,t.right),t.bottom=c(i.bottom,t.bottom),t.left=p(i.left,t.left),t}),it(e,a,n));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}},getOffsetParent:st,getElementRects:async function(t){let{reference:e,floating:o,strategy:i}=t;const n=this.getOffsetParent||st,r=this.getDimensions;return{reference:rt(e,await n(o),i),floating:{x:0,y:0,...await r(o)}}},getClientRects:function(t){return Array.from(t.getClientRects())},getDimensions:function(t){return K(t)},getScale:U,isElement:N,isRTL:function(t){return"rtl"===Y(t).direction}};function ct(t,e,o,i){void 0===i&&(i={});const{ancestorScroll:n=!0,ancestorResize:r=!0,elementResize:a="function"==typeof ResizeObserver,layoutShift:s="function"==typeof IntersectionObserver,animationFrame:l=!1}=i,f=Q(t),u=n||r?[...f?G(f):[],...G(e)]:[];u.forEach((t=>{n&&t.addEventListener("scroll",o,{passive:!0}),r&&t.addEventListener("resize",o)}));const d=f&&s?function(t,e){let o,i=null;const n=F(t);function r(){clearTimeout(o),i&&i.disconnect(),i=null}return function a(s,l){void 0===s&&(s=!1),void 0===l&&(l=1),r();const{left:f,top:u,width:d,height:m}=t.getBoundingClientRect();if(s||e(),!d||!m)return;const y={rootMargin:-h(u)+"px "+-h(n.clientWidth-(f+d))+"px "+-h(n.clientHeight-(u+m))+"px "+-h(f)+"px",threshold:p(0,c(1,l))||1};let g=!0;function v(t){const e=t[0].intersectionRatio;if(e!==l){if(!g)return a();e?a(!1,e):o=setTimeout((()=>{a(!1,1e-7)}),100)}g=!1}try{i=new IntersectionObserver(v,{...y,root:n.ownerDocument})}catch(t){i=new IntersectionObserver(v,y)}i.observe(t)}(!0),r}(f,o):null;let m,y=-1,g=null;a&&(g=new ResizeObserver((t=>{let[i]=t;i&&i.target===f&&g&&(g.unobserve(e),cancelAnimationFrame(y),y=requestAnimationFrame((()=>{g&&g.observe(e)}))),o()})),f&&!l&&g.observe(f),g.observe(e));let v=l?et(t):null;return l&&function e(){const i=et(t);!v||i.x===v.x&&i.y===v.y&&i.width===v.width&&i.height===v.height||o();v=i,m=requestAnimationFrame(e)}(),o(),()=>{u.forEach((t=>{n&&t.removeEventListener("scroll",o),r&&t.removeEventListener("resize",o)})),d&&d(),g&&g.disconnect(),g=null,l&&cancelAnimationFrame(m)}}const pt=(t,e,o)=>{const i=new Map,n={platform:lt,...o},r={...n.platform,_c:i};return(async(t,e,o)=>{const{placement:i="bottom",strategy:n="absolute",middleware:r=[],platform:a}=o,s=r.filter(Boolean),l=await(null==a.isRTL?void 0:a.isRTL(e));let c=await a.getElementRects({reference:t,floating:e,strategy:n}),{x:p,y:f}=T(c,i,l),h=i,u={},d=0;for(let o=0;o<s.length;o++){const{name:r,fn:m}=s[o],{x:y,y:g,data:v,reset:b}=await m({x:p,y:f,initialPlacement:i,placement:h,strategy:n,middlewareData:u,rects:c,platform:a,elements:{reference:t,floating:e}});p=null!=y?y:p,f=null!=g?g:f,u={...u,[r]:{...u[r],...v}},b&&d<=50&&(d++,"object"==typeof b&&(b.placement&&(h=b.placement),b.rects&&(c=!0===b.rects?await a.getElementRects({reference:t,floating:e,strategy:n}):b.rects),({x:p,y:f}=T(c,h,l))),o=-1)}return{x:p,y:f,placement:h,strategy:n,middlewareData:u}})(t,e,{...n,platform:r})};function ft(t){return function(t){for(let e=t;e;e=ht(e))if(e instanceof Element&&"none"===getComputedStyle(e).display)return null;for(let e=ht(t);e;e=ht(e)){if(!(e instanceof Element))continue;const t=getComputedStyle(e);if("contents"!==t.display){if("static"!==t.position||"none"!==t.filter)return e;if("BODY"===e.tagName)return e}}return null}(t)}function ht(t){return t.assignedSlot?t.assignedSlot:t.parentNode instanceof ShadowRoot?t.parentNode.host:t.parentNode}var ut=s`${t}:host{--arrow-color:var(--color-neutral-background-strong);--arrow-size:6px;--arrow-size-diagonal:calc(var(--arrow-size) * 0.7071);--arrow-padding-offset:calc(var(--arrow-size-diagonal) - var(--arrow-size));display:contents}.popup{position:absolute;isolation:isolate;max-width:var(--auto-size-available-width,none);max-height:var(--auto-size-available-height,none)}.popup--fixed{position:fixed}.popup:not(.popup--active){display:none}.popup--arrow{position:absolute;width:calc(var(--arrow-size-diagonal) * 2);height:calc(var(--arrow-size-diagonal) * 2);rotate:45deg;background:var(--arrow-color)}.popup-safe-area:not(.popup-safe-area--visible){display:none}.popup-safe-area{position:fixed;z-index:calc(var(--faceplate-tooltip-z-index,1) - 1);top:0;right:0;bottom:0;left:0;clip-path:polygon(var(--safe-area-top-left-x,0) var(--safe-area-top-left-y,0),var(--safe-area-top-right-x,0) var(--safe-area-top-right-y,0),var(--safe-area-bottom-right-x,0) var(--safe-area-bottom-right-y,0),var(--safe-area-bottom-left-x,0) var(--safe-area-bottom-left-y,0))}`;const dt={Top:"top",TopStart:"top-start",TopEnd:"top-end",Bottom:"bottom",BottomStart:"bottom-start",BottomEnd:"bottom-end",Right:"right",RightStart:"right-start",RightEnd:"right-end",Left:"left",LeftStart:"left-start",LeftEnd:"left-end"},mt="anchor";class yt extends n{constructor(){super(...arguments),this.anchorEl=null,this.active=!1,this.placement=dt.Top,this.strategy="absolute",this.distance=0,this.skidding=0,this.arrow=!1,this.arrowPlacement=mt,this.arrowPadding=10,this.flip=!1,this.flipFallbackPlacements="",this.flipFallbackStrategy="best-fit",this.flipPadding=0,this.shift=!1,this.shiftPadding=0,this.autoSizePadding=0,this.safeArea=!1,this.updateSafeArea=()=>{if(!this.safeArea||!this.anchorEl)return;const t=this.anchorEl.getBoundingClientRect(),e=this.popup.getBoundingClientRect();let o=0,i=0,n=0,r=0,a=0,s=0,l=0,c=0;this.placement.includes("top")||this.placement.includes("bottom")?t.top<e.top?(o=t.left,i=t.bottom,n=t.right,r=t.bottom,a=e.left,s=e.top,l=e.right,c=e.top):(o=e.left,i=e.bottom,n=e.right,r=e.bottom,a=t.left,s=t.top,l=t.right,c=t.top):t.left<e.left?(o=t.right,i=t.top,n=e.left,r=e.top,a=t.right,s=t.bottom,l=e.left,c=e.bottom):(o=e.right,i=e.top,n=t.left,r=t.top,a=e.right,s=e.bottom,l=t.left,c=t.bottom),this.style.setProperty("--safe-area-top-left-x",`${o}px`),this.style.setProperty("--safe-area-top-left-y",`${i}px`),this.style.setProperty("--safe-area-top-right-x",`${n}px`),this.style.setProperty("--safe-area-top-right-y",`${r}px`),this.style.setProperty("--safe-area-bottom-left-x",`${a}px`),this.style.setProperty("--safe-area-bottom-left-y",`${s}px`),this.style.setProperty("--safe-area-bottom-right-x",`${l}px`),this.style.setProperty("--safe-area-bottom-right-y",`${c}px`)}}async connectedCallback(){super.connectedCallback(),await this.updateComplete,this.start()}disconnectedCallback(){super.disconnectedCallback(),this.stop()}async updated(t){super.updated(t),t.has("active")&&(this.active?this.start():this.stop()),t.has("anchor")&&this.handleAnchorChange(),this.active&&(await this.updateComplete,this.reposition())}async handleAnchorChange(){if(await this.stop(),this.anchor&&"string"==typeof this.anchor){const t=this.getRootNode();this.anchorEl=t.getElementById(this.anchor)}else this.anchor instanceof Element||function(t){return null!==t&&"object"==typeof t&&"getBoundingClientRect"in t}(this.anchor)?this.anchorEl=this.anchor:this.anchorEl=this.querySelector('[slot="anchor"]');this.anchorEl instanceof HTMLSlotElement&&(this.anchorEl=this.anchorEl.assignedElements({flatten:!0})[0]),this.anchorEl&&this.start()}start(){this.anchorEl&&(this.cleanup=ct(this.anchorEl,this.popup,(()=>{this.reposition()})))}async stop(){return new Promise((t=>{this.cleanup?(this.cleanup(),this.cleanup=void 0,this.removeAttribute("data-current-placement"),this.style.removeProperty("--auto-size-available-width"),this.style.removeProperty("--auto-size-available-height"),requestAnimationFrame((()=>t()))):t()}))}reposition(){if(!this.active||!this.anchorEl)return;const t=[C({mainAxis:this.distance,crossAxis:this.skidding})];var e;this.sync?t.push(O({apply:({rects:t})=>{const e="width"===this.sync||"both"===this.sync,o="height"===this.sync||"both"===this.sync;this.popup.style.width=e?`${t.reference.width}px`:"",this.popup.style.height=o?`${t.reference.height}px`:""}})):(this.popup.style.width="",this.popup.style.height=""),this.flip&&t.push(k({boundary:this.flipBoundary,fallbackPlacements:this.flipFallbackPlacements,fallbackStrategy:"best-fit"===this.flipFallbackStrategy?"bestFit":"initialPlacement",padding:this.flipPadding})),this.shift&&t.push((void 0===(e={boundary:this.shiftBoundary,padding:this.shiftPadding})&&(e={}),{name:"shift",options:e,async fn(t){const{x:o,y:i,placement:n}=t,{mainAxis:r=!0,crossAxis:a=!1,limiter:s={fn:t=>{let{x:e,y:o}=t;return{x:e,y:o}}},...l}=g(e,t),c={x:o,y:i},p=await L(t,l),f=P(v(n)),h=w(f);let u=c[h],d=c[f];if(r){const t="y"===h?"bottom":"right";u=y(u+p["y"===h?"top":"left"],u,u-p[t])}if(a){const t="y"===f?"bottom":"right";d=y(d+p["y"===f?"top":"left"],d,d-p[t])}const m=s.fn({...t,[h]:u,[f]:d});return{...m,data:{x:m.x-o,y:m.y-i}}}})),this.autoSize?t.push(O({boundary:this.autoSizeBoundary,padding:this.autoSizePadding,apply:({availableWidth:t,availableHeight:e})=>{"vertical"===this.autoSize||"both"===this.autoSize?this.style.setProperty("--auto-size-available-height",`${e}px`):this.style.removeProperty("--auto-size-available-height"),"horizontal"===this.autoSize||"both"===this.autoSize?this.style.setProperty("--auto-size-available-width",`${t}px`):this.style.removeProperty("--auto-size-available-width")}})):(this.style.removeProperty("--auto-size-available-width"),this.style.removeProperty("--auto-size-available-height")),this.arrow&&t.push((t=>({name:"arrow",options:t,async fn(e){const{x:o,y:i,placement:n,rects:r,platform:a,elements:s,middlewareData:l}=e,{element:p,padding:f=0}=g(t,e)||{};if(null==p)return{};const h=z(f),u={x:o,y:i},d=E(n),m=x(d),v=await a.getDimensions(p),w="y"===d,P=w?"top":"left",R=w?"bottom":"right",S=w?"clientHeight":"clientWidth",A=r.reference[m]+r.reference[d]-u[d]-r.floating[m],T=u[d]-r.reference[d],L=await(null==a.getOffsetParent?void 0:a.getOffsetParent(p));let k=L?L[S]:0;k&&await(null==a.isElement?void 0:a.isElement(L))||(k=s.floating[S]||r.floating[m]);const C=A/2-T/2,O=k/2-v[m]/2-1,B=c(h[P],O),$=c(h[R],O),F=B,D=k-v[m]-$,N=k/2-v[m]/2+C,H=y(F,N,D),W=!l.arrow&&null!=b(n)&&N!=H&&r.reference[m]/2-(N<F?B:$)-v[m]/2<0,j=W?N<F?N-F:N-D:0;return{[d]:u[d]+j,data:{[d]:H,centerOffset:N-H-j,...W&&{alignmentOffset:j}},reset:W}}}))({element:this.arrowEl,padding:this.arrowPadding}));const o="absolute"===this.strategy?t=>lt.getOffsetParent(t,ft):lt.getOffsetParent;pt(this.anchorEl,this.popup,{placement:this.placement,middleware:t,strategy:this.strategy,platform:{...lt,getOffsetParent:o}}).then((({x:t,y:e,middlewareData:o,placement:i})=>{const n="rtl"===getComputedStyle(this).direction,r={top:"bottom",right:"left",bottom:"top",left:"right"}[i.split("-")[0]];if(this.setAttribute("data-current-placement",i),Object.assign(this.popup.style,{left:`${t}px`,top:`${e}px`}),!this.arrow)return;const a=o.arrow.x,s=o.arrow.y;let l="",c="",p="",f="";if("start"===this.arrowPlacement){const t="number"==typeof a?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:"";l="number"==typeof s?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:"",c=n?t:"",f=n?"":t}else if("end"===this.arrowPlacement){const t="number"==typeof a?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:"";c=n?"":t,f=n?t:"",p="number"==typeof s?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:""}else"center"===this.arrowPlacement?(f="number"==typeof a?"calc(50% - var(--arrow-size-diagonal))":"",l="number"==typeof s?"calc(50% - var(--arrow-size-diagonal))":""):(f="number"==typeof a?`${a}px`:"",l="number"==typeof s?`${s}px`:"");Object.assign(this.arrowEl.style,{top:l,right:c,bottom:p,left:f,[r]:"calc(var(--arrow-size-diagonal) * -1)"})})),requestAnimationFrame((()=>this.updateSafeArea())),this.emitter.dispatch("reposition")}render(){return l` <slot name="anchor" @slotchange="${this.handleAnchorChange}"></slot> <span part="safe-area" class="${r({"popup-safe-area":!0,"popup-safe-area--visible":this.safeArea&&this.active})}"></span> <div part="popup" class="${r({popup:!0,"popup--active":this.active,"popup--fixed":"fixed"===this.strategy,"popup--has-arrow":this.arrow})}"> <slot></slot> ${this.arrow?l`<div part="arrow" class="popup--arrow" role="presentation"></div>`:""} </div> `}}yt.styles=ut,e([o(".popup")],yt.prototype,"popup",void 0),e([o(".popup--arrow")],yt.prototype,"arrowEl",void 0),e([i()],yt.prototype,"anchor",void 0),e([i({type:Boolean,reflect:!0})],yt.prototype,"active",void 0),e([i({reflect:!0})],yt.prototype,"placement",void 0),e([i({reflect:!0})],yt.prototype,"strategy",void 0),e([i({type:Number})],yt.prototype,"distance",void 0),e([i({type:Number})],yt.prototype,"skidding",void 0),e([i({type:Boolean})],yt.prototype,"arrow",void 0),e([i({attribute:"arrow-placement"})],yt.prototype,"arrowPlacement",void 0),e([i({attribute:"arrow-padding",type:Number})],yt.prototype,"arrowPadding",void 0),e([i({type:Boolean})],yt.prototype,"flip",void 0),e([i({attribute:"flip-fallback-placements",converter:{fromAttribute:t=>t.split(" ").map((t=>t.trim())).filter((t=>""!==t))}})],yt.prototype,"flipFallbackPlacements",void 0),e([i({attribute:"flip-fallback-strategy"})],yt.prototype,"flipFallbackStrategy",void 0),e([i({type:Object})],yt.prototype,"flipBoundary",void 0),e([i({attribute:"flip-padding",type:Number})],yt.prototype,"flipPadding",void 0),e([i({type:Boolean})],yt.prototype,"shift",void 0),e([i({type:Object})],yt.prototype,"shiftBoundary",void 0),e([i({attribute:"shift-padding",type:Number})],yt.prototype,"shiftPadding",void 0),e([i({attribute:"auto-size"})],yt.prototype,"autoSize",void 0),e([i()],yt.prototype,"sync",void 0),e([i({type:Object})],yt.prototype,"autoSizeBoundary",void 0),e([i({attribute:"auto-size-padding",type:Number})],yt.prototype,"autoSizePadding",void 0),e([i({attribute:"safe-area",type:Boolean})],yt.prototype,"safeArea",void 0);let gt=class extends yt{};gt=e([a("rpl-popper")],gt);export{dt as P};
