import{_ as e,e as s,aJ as a,a7 as r,w as t,x as i}from"./shell-2264602c.js";import{x as o,O as d,I as n}from"./icon-82dd10b4.js";import{S as h}from"./scroll-blocking-6376e14c.js";import{R as c,p as l,S as p}from"./base-793c2460.js";import{C as m}from"./age-gate-standalone-client-js-5357b0cf.js";import"./faceplate-search-input-ad8da225.js";import"./text-input-7536667a.js";import"./filterNullish-60f7e90f.js";import"./constants-d65b7b38.js";import"./validate-image-b0892d29.js";import"./search-results-dropdown-modifier-client-js-3f7d3b85.js";import"./post-consume-tracker-f949dd81.js";import"./links-9b598b77.js";import"./search-typeahead-expandable-section-df6cd1cc.js";import"./search-params-9b432517.js";import"./search-dynamic-id-fd96acc2.js";import"./expandable-section-header-edd4c2b3.js";import"./ad-event-tracker-f9b59b5a.js";import"./with-ad-observer-3dfd9c4c.js";import"./errors-8d0111b7.js";import"./overflow-menu-actions-97fa1cfc.js";import"./distinguished-tags-ad178980.js";import"./shreddit-dynamic-ad-link-548337a6.js";import"./suggested-search-queries-client-js-e9a5ef2a.js";import"./faceplate-expandable-section-helper-d16b871c.js";import"./faceplate-auto-height-animator-eba3f9a9.js";import"./content-tags-a35f6e45.js";import"./password-recovery-11761f51.js";let u=class extends c{constructor(){super(...arguments),this.handleClearSearchInput=()=>{this.handleClear(),this.resetIsSearchScopeEnabled()},this.handleClickBackButton=()=>{this.mobileExpandSearchBar&&this.isFocused&&a(this.input,{source:"nav",action:"click",noun:"search_closed"}),this.isFocused?this.handleBlur():this.mobileExpandSearchBar&&(window.history.length?window.history.back():this.redirect(this.scope.path))}}connectedCallback(){super.connectedCallback(),this.addEventListener(m,this.handleClearSearchInput),this.mobileExpandSearchBar&&(this.searchScrollBlockingController=new h)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener(m,this.handleClearSearchInput)}render(){return o` <faceplate-readymark name="search-small"></faceplate-readymark> <div class="w-100 mx-0 box-border ${r({"reddit-search-bar":this.showDropdown,"rounded-[1.25rem]":this.showDropdown,"rounded-t-none":this.showDropdown,"shadow-sm":this.showDropdown,"bg-neutral-background-strong":this.isFocused,fixed:!this.mobileExpandSearchBar||l(this.pageType)||this.isFocused,"top-0":!this.mobileExpandSearchBar||l(this.pageType)||this.isFocused,"left-0":!this.mobileExpandSearchBar||l(this.pageType)||this.isFocused,"z-[4]":this.mobileExpandSearchBar&&this.isFocused})}" data-faceplate-tracking-context="${JSON.stringify(this.searchTelemetryData)}"> <div class="w-full h-header-small"> <form autocomplete="off" class="h-full flex items-center w-100" @submit="${this.handleSubmit}"> ${t({appearance:"plain",attributes:{type:"button",className:`search-dialog-close${[["ml-2xs",this.mobileExpandSearchBar],["ml-md mr-xs",!this.mobileExpandSearchBar],["hidden",this.mobileExpandSearchBar&&!l(this.pageType)&&!this.isFocused]].reduce(((e,[s,a])=>a?e+` ${s}`:e),"")}`,onclick:this.handleClickBackButton},size:i[this.mobileExpandSearchBar?"Medium":"Small"],screenReaderContent:"Close search",leadingIcon:d({size:n[this.mobileExpandSearchBar?"Medium":"Small"]})})} ${this.renderSearchInput()} </form> </div> <div class="max-h-[calc(var(--dvh-unit)*100-var(--shreddit-header-height)-1px)] overflow-y-auto overflow-x-hidden border-t-sm border-b-0 border-r-0 border-l-0 border-solid border-neutral-border-weak ${r({hidden:!this.showDropdown})}" id="${p}"> ${this.renderDropdownContent(!1)} </div> </div> `}};u=e([s("reddit-search-small")],u);
