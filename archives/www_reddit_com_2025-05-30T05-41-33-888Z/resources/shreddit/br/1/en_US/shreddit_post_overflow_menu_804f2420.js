import{w as e,x as t,bG as o,t as s,_ as r,n as i,e as a}from"./shell-2264602c.js";import"./faceplate-bottom-sheet-header-63783c3a.js";import"./app-selector-client-js-3a92da0e.js";import"./select-controller-e11d5e4c.js";import"./community-picker-9f84d972.js";import"./feedback-tooltip-overflow-menu-625b9297.js";import{x as n,c as l,I as p,u as c,s as d}from"./icon-82dd10b4.js";import{l as m,L as h}from"./expandable-section-header-edd4c2b3.js";import{W as u,p as f}from"./with-post-actions-73ed9e7e.js";import{H as w}from"./links-9b598b77.js";import"./TinyGesture-89d9957c.js";import"./user-flair-afad799f.js";import"./age-gate-standalone-client-js-5357b0cf.js";import"./faceplate-tooltip-842394bc.js";import"./header-action-item-chat-client-js-8d009dcd.js";import"./tooltip.base-7152f24f.js";import"./rpl-popper-2d8cefe0.js";import"./profile-creation-1d60123b.js";import"./with-share-1ad32a0e.js";import"./promote-post-actions-controller-f5bf291f.js";import"./utils-19e4b642.js";import"./content-action-button-a25cd1f9.js";import"./index-7436fa38.js";import"./rpl-coachmark-f5614db3.js";import"./rpl-coachmark-card-3cbe7edc.js";import"./award-controller-c1fa775d.js";import"./awardsTelemetryState-e939bf46.js";import"./promote-post-button-9b9319e1.js";import"./start-end-ama-actions-controller-aa6cb3b4.js";import"./overflow-menu-actions-97fa1cfc.js";import"./distinguished-tags-ad178980.js";import"./modActions-c13cf697.js";import"./translations-8a80e526.js";import"./feeds-4612b45d.js";import"./community-highlights-4f4bb401.js";import"./mod-verdict-47cd849f.js";import"./postFlair-707ffbfa.js";import"./shop-gallery-data-fetcher-client-js-73ca6a07.js";let b=class extends(u(d)){constructor(){super(...arguments),this.shouldRenderFollowMenuItem=!1,this.closeMenu=()=>{this.bottomSheet?.close(),this.dropdownMenu?.close()},this.handleKeyUp=e=>{"Enter"!==e.key&&"Space"!==e.key||this.closeMenu()},this.onFeedbackTooltipClosed=()=>{this.isDesktopViewport?this.dropdownMenu?.show():this.bottomSheet?.showModal()},this.openBottomSheet=()=>{this.trackEvent(w(this.postViewContext)),this.bottomSheet?.showModal(),this.onMenuOpened?.()}}get dropdownMenu(){return this.shadowRoot?.querySelector("faceplate-dropdown-menu")}get bottomSheet(){return this.shadowRoot?.querySelector("faceplate-bottom-sheet")}renderActionSheet(){return n` <faceplate-bottom-sheet id="post-overflow-menu-bottom-sheet"> <faceplate-bottom-sheet-header slot="header" has-divider> Options <span slot="trailing"> ${e({appearance:"secondary",attributes:{onclick:this.closeMenu,"aria-label":"Close actions menu"},leadingIcon:l({size:p.Small}),size:t.Small})} </span> </faceplate-bottom-sheet-header> <div @click="${this.closeMenu}" @keyup="${this.handleKeyUp}" class="w-full max-h-[19rem] overflow-y-auto pb-md"> ${this.renderOverflowMenuItems()} </div> </faceplate-bottom-sheet> `}get overflowActions(){const e=this.getDefaultActions();return[...this.shouldRenderFollowMenuItem?[e.follow]:[],e.startEndAma,e.showFewer,e.amaCollaborators,e.edit,e.editPostFlair,e.save,e.promotePost,e.pinToProfile,e.hide,e.translationSetting,e.translationFeedback,e.report,e.delete,e.adminDistinguish,e.spoilerTag,e.nsfwTag,e.brandAffiliate,e.replyNotifs,e.aboutThisAd,e.premiumUpsell].filter((e=>e.isUserEligible()))}renderOverflowMenuItems(){return n` ${this.overflowActions.map(this.renderMenuItem)} <div> <slot name="devvit-context-actions"></slot> </div> `}renderMenuItem(e){const{label:t,onClick:o,href:s,target:r,trackingAttributes:i,leadingIconRenderer:a,description:l,disabled:p}=e;return function(e,t){return t?n` <faceplate-tracker class="nd:visible contents" source="${t.source}" action="${t.action}" noun="${t.noun}"> ${e} </faceplate-tracker> `:e}(m({attributes:{id:`post-overflow-${e.id}`},label:n`${t}`,leadingIcon:a({}),size:h.Small,href:s||void 0,anchorAttributes:{target:r},onClick:o,disabled:p,description:l}),i)}renderOverflowMenuButton(){return e({appearance:"plain",attributes:{onclick:this.openBottomSheet,"aria-label":"Open user actions"},leadingIcon:c({size:p.Small}),size:t.Small})}renderDropdownMenu(){return n` <faceplate-dropdown-menu position="bottom-end"> ${this.renderOverflowMenuButton()} <faceplate-menu @click="${this.closeMenu}" @keyup="${this.handleKeyUp}" slot="menu" class="whitespace-nowrap max-h-[25.5rem] overflow-y-auto" hidden> ${this.renderOverflowMenuItems()} </faceplate-menu> </faceplate-dropdown-menu> `}render(){const e=n` <div data-post-click-location="${o.OVERFLOW_BUTTON}"> ${this.isDesktopViewport?this.renderDropdownMenu():n`${this.renderOverflowMenuButton()} ${this.renderActionSheet()}`} </div> `;return this.i18nFeedbackCoachmarkEligible?n`<feedback-tooltip-overflow-menu @feedback-tooltip-closed="${this.onFeedbackTooltipClosed}"> ${e} </feedback-tooltip-overflow-menu>`:this.showProfilePinPostCoachmark?f({target:e}):e}};b.styles=[s],r([i({type:Boolean,attribute:"i18n-feedback-coachmark-eligible"})],b.prototype,"i18nFeedbackCoachmarkEligible",void 0),r([i({type:Boolean,attribute:"should-render-follow-menu-item",reflect:!0})],b.prototype,"shouldRenderFollowMenuItem",void 0),b=r([a("shreddit-post-overflow-menu")],b);export{b as ShredditPostOverflowMenu};
