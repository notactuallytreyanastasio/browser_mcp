import{E as e,a_ as t,aV as s,_ as a,b0 as n,n as i,J as o,e as r,a8 as l}from"./shell-2264602c.js";import{x as p}from"./icon-82dd10b4.js";import{W as h,d}from"./age-gate-standalone-client-js-5357b0cf.js";let c=class extends(h(n)){constructor(){super(...arguments),this.pages=0,this.for=void 0,this._events=new e(this),this._windowEvents=new e(this,(()=>window)),this._locationHashMap=new Map,this._selectedElements=new Set,this._activeSlotRef=t(),this._handleHashChange=this._windowEvents.define("hashchange",(()=>{const e=this._locationHashMap.get(window.location.hash);e&&(this.pageIndex=e)})),this._handleClick=this._events.define("click",(e=>{let t=null;e.target instanceof HTMLAnchorElement&&(t=e.target.getAttribute("href"),t&&"#"!==t[0]&&(t=null)),null!==t&&(e.preventDefault(),e.stopPropagation());const s=e.composedPath();for(let e=0;e<s.length;e++){const a=s[e];if(a instanceof HTMLSpanElement){const e=this.getPageIndexFromSpanWrapper(a);if(t){const e=new URL(window.location.href);e.hash=t,window.history.pushState(null,"",e.href)}if(0!==e){this.pageIndex=e;break}}}})),this._handleKeydown=this._events.define("keydown",(e=>{if("ArrowLeft"===e.key)this.previousPage();else{if("ArrowRight"!==e.key)return;this.nextPage()}e.preventDefault(),e.stopPropagation()}))}get pageIndex(){return super.pageIndex}set pageIndex(e){super.pageIndex=e}get pageNames(){return super.pageNames}set pageNames(e){super.pageNames=e}render(){if(this.pages<1)return p``;const{pageNames:e}=this;return p` <div class="tablist" role="tablist"> ${d(this.pages).map((t=>p` <span data-i="${t}" role="tab" aria-selected="${t===this.pageIndex?"true":"false"}"> <slot @slotchange="${this.handleSlotChange}" name="${e?e[t-1]:`page-${t}`}" ${t===this.pageIndex?s(this._activeSlotRef):""}></slot> </span> `))} </div> `}updated(e){if(e.has("pageIndex")){this._clearSelectedAttributes();const e=this._activeSlotRef.value;if(!e)return;for(const t of e.assignedElements())this._setSelectedAttribute(t),t.focus()}}_clearSelectedAttributes(){if(this._selectedElements.size){for(const e of this._selectedElements)e.removeAttribute("faceplate-tab-selected");this._selectedElements.clear()}}_setSelectedAttribute(e){this._selectedElements.add(e),e.setAttribute("faceplate-tab-selected","")}handleSlotChange(e){const{hash:t}=window.location,s=e.target;if(!(s.parentElement instanceof HTMLSpanElement))return;const a=s.assignedElements(),n=this.getPageIndexFromSpanWrapper(s.parentElement),i=n===this.pageIndex;if(i&&this._clearSelectedAttributes(),a.length)for(const e of a){if(i&&this._setSelectedAttribute(e),!(e instanceof HTMLAnchorElement))continue;const s=e.getAttribute("href");s&&(this._locationHashMap.set(s,n),s===t&&(this.pageIndex=n))}}getPageIndexFromSpanWrapper(e){return e.dataset.i?parseInt(e.dataset.i,10):0}pageIndexChangedCallback(e){super.pageIndexChangedCallback(e),this.requestUpdate("pageIndex",e)}};a([i({type:Number})],c.prototype,"pages",void 0),a([i({type:Number,attribute:"pageindex"})],c.prototype,"pageIndex",null),a([i({type:String})],c.prototype,"for",void 0),a([i({converter:l,attribute:"pagenames"})],c.prototype,"pageNames",null),a([o(".tablist")],c.prototype,"tabList",void 0),c=a([r("faceplate-tablist")],c);export{c as F};
