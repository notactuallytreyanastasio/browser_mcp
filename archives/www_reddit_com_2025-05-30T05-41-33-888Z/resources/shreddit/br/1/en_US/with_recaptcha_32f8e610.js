import{e9 as t,_ as e,n as r,g as n,i as a,c,I as o}from"./shell-2264602c.js";import{aR as i}from"./age-gate-standalone-client-js-5357b0cf.js";import{A as s,x as h,B as p}from"./icon-82dd10b4.js";var u;let d;!function(t){t.Render="render",t.Execute="execute"}(u||(u={}));const l=new Uint8Array(16);function f(){if(!d&&(d="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!d))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return d(l)}var y=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const g=[];for(let t=0;t<256;++t)g.push((t+256).toString(16).slice(1));function m(t,e=0){return(g[t[e+0]]+g[t[e+1]]+g[t[e+2]]+g[t[e+3]]+"-"+g[t[e+4]]+g[t[e+5]]+"-"+g[t[e+6]]+g[t[e+7]]+"-"+g[t[e+8]]+g[t[e+9]]+"-"+g[t[e+10]]+g[t[e+11]]+g[t[e+12]]+g[t[e+13]]+g[t[e+14]]+g[t[e+15]]).toLowerCase()}function w(t){if(!function(t){return"string"==typeof t&&y.test(t)}(t))throw TypeError("Invalid UUID");let e;const r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=255&e,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=255&e,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=255&e,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=255&e,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=255&e,r}function A(t,e,r){function n(t,n,a,c){var o;if("string"==typeof t&&(t=function(t){t=unescape(encodeURIComponent(t));const e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}(t)),"string"==typeof n&&(n=w(n)),16!==(null===(o=n)||void 0===o?void 0:o.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let i=new Uint8Array(16+t.length);if(i.set(n),i.set(t,n.length),i=r(i),i[6]=15&i[6]|e,i[8]=63&i[8]|128,a){c=c||0;for(let t=0;t<16;++t)a[c+t]=i[t];return a}return m(i)}try{n.name=t}catch(t){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}function b(t){return 14+(t+64>>>9<<4)+1}function v(t,e){const r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}function S(t,e,r,n,a,c){return v((o=v(v(e,t),v(n,c)))<<(i=a)|o>>>32-i,r);var o,i}function C(t,e,r,n,a,c,o){return S(e&r|~e&n,t,e,a,c,o)}function R(t,e,r,n,a,c,o){return S(e&n|r&~n,t,e,a,c,o)}function U(t,e,r,n,a,c,o){return S(e^r^n,t,e,a,c,o)}function k(t,e,r,n,a,c,o){return S(r^(e|~n),t,e,a,c,o)}A("v3",48,(function(t){if("string"==typeof t){const e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(let r=0;r<e.length;++r)t[r]=e.charCodeAt(r)}return function(t){const e=[],r=32*t.length,n="0123456789abcdef";for(let a=0;a<r;a+=8){const r=t[a>>5]>>>a%32&255,c=parseInt(n.charAt(r>>>4&15)+n.charAt(15&r),16);e.push(c)}return e}(function(t,e){t[e>>5]|=128<<e%32,t[b(e)-1]=e;let r=1732584193,n=-271733879,a=-1732584194,c=271733878;for(let e=0;e<t.length;e+=16){const o=r,i=n,s=a,h=c;r=C(r,n,a,c,t[e],7,-680876936),c=C(c,r,n,a,t[e+1],12,-389564586),a=C(a,c,r,n,t[e+2],17,606105819),n=C(n,a,c,r,t[e+3],22,-1044525330),r=C(r,n,a,c,t[e+4],7,-176418897),c=C(c,r,n,a,t[e+5],12,1200080426),a=C(a,c,r,n,t[e+6],17,-1473231341),n=C(n,a,c,r,t[e+7],22,-45705983),r=C(r,n,a,c,t[e+8],7,1770035416),c=C(c,r,n,a,t[e+9],12,-1958414417),a=C(a,c,r,n,t[e+10],17,-42063),n=C(n,a,c,r,t[e+11],22,-1990404162),r=C(r,n,a,c,t[e+12],7,1804603682),c=C(c,r,n,a,t[e+13],12,-40341101),a=C(a,c,r,n,t[e+14],17,-1502002290),n=C(n,a,c,r,t[e+15],22,1236535329),r=R(r,n,a,c,t[e+1],5,-165796510),c=R(c,r,n,a,t[e+6],9,-1069501632),a=R(a,c,r,n,t[e+11],14,643717713),n=R(n,a,c,r,t[e],20,-373897302),r=R(r,n,a,c,t[e+5],5,-701558691),c=R(c,r,n,a,t[e+10],9,38016083),a=R(a,c,r,n,t[e+15],14,-660478335),n=R(n,a,c,r,t[e+4],20,-405537848),r=R(r,n,a,c,t[e+9],5,568446438),c=R(c,r,n,a,t[e+14],9,-1019803690),a=R(a,c,r,n,t[e+3],14,-187363961),n=R(n,a,c,r,t[e+8],20,1163531501),r=R(r,n,a,c,t[e+13],5,-1444681467),c=R(c,r,n,a,t[e+2],9,-51403784),a=R(a,c,r,n,t[e+7],14,1735328473),n=R(n,a,c,r,t[e+12],20,-1926607734),r=U(r,n,a,c,t[e+5],4,-378558),c=U(c,r,n,a,t[e+8],11,-2022574463),a=U(a,c,r,n,t[e+11],16,1839030562),n=U(n,a,c,r,t[e+14],23,-35309556),r=U(r,n,a,c,t[e+1],4,-1530992060),c=U(c,r,n,a,t[e+4],11,1272893353),a=U(a,c,r,n,t[e+7],16,-155497632),n=U(n,a,c,r,t[e+10],23,-1094730640),r=U(r,n,a,c,t[e+13],4,681279174),c=U(c,r,n,a,t[e],11,-358537222),a=U(a,c,r,n,t[e+3],16,-722521979),n=U(n,a,c,r,t[e+6],23,76029189),r=U(r,n,a,c,t[e+9],4,-640364487),c=U(c,r,n,a,t[e+12],11,-421815835),a=U(a,c,r,n,t[e+15],16,530742520),n=U(n,a,c,r,t[e+2],23,-995338651),r=k(r,n,a,c,t[e],6,-198630844),c=k(c,r,n,a,t[e+7],10,1126891415),a=k(a,c,r,n,t[e+14],15,-1416354905),n=k(n,a,c,r,t[e+5],21,-57434055),r=k(r,n,a,c,t[e+12],6,1700485571),c=k(c,r,n,a,t[e+3],10,-1894986606),a=k(a,c,r,n,t[e+10],15,-1051523),n=k(n,a,c,r,t[e+1],21,-2054922799),r=k(r,n,a,c,t[e+8],6,1873313359),c=k(c,r,n,a,t[e+15],10,-30611744),a=k(a,c,r,n,t[e+6],15,-1560198380),n=k(n,a,c,r,t[e+13],21,1309151649),r=k(r,n,a,c,t[e+4],6,-145523070),c=k(c,r,n,a,t[e+11],10,-1120210379),a=k(a,c,r,n,t[e+2],15,718787259),n=k(n,a,c,r,t[e+9],21,-343485551),r=v(r,o),n=v(n,i),a=v(a,s),c=v(c,h)}return[r,n,a,c]}(function(t){if(0===t.length)return[];const e=8*t.length,r=new Uint32Array(b(e));for(let n=0;n<e;n+=8)r[n>>5]|=(255&t[n/8])<<n%32;return r}(t),8*t.length))}));var I={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function E(t,e,r){if(I.randomUUID&&!t)return I.randomUUID();const n=(t=t||{}).random||(t.rng||f)();return n[6]=15&n[6]|64,n[8]=63&n[8]|128,m(n)}function x(t,e,r,n){switch(t){case 0:return e&r^~e&n;case 1:case 3:return e^r^n;case 2:return e&r^e&n^r&n}}function T(t,e){return t<<e|t>>>32-e}A("v5",80,(function(t){const e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof t){const e=unescape(encodeURIComponent(t));t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);const n=t.length/4+2,a=Math.ceil(n/16),c=new Array(a);for(let e=0;e<a;++e){const r=new Uint32Array(16);for(let n=0;n<16;++n)r[n]=t[64*e+4*n]<<24|t[64*e+4*n+1]<<16|t[64*e+4*n+2]<<8|t[64*e+4*n+3];c[e]=r}c[a-1][14]=8*(t.length-1)/Math.pow(2,32),c[a-1][14]=Math.floor(c[a-1][14]),c[a-1][15]=8*(t.length-1)&4294967295;for(let t=0;t<a;++t){const n=new Uint32Array(80);for(let e=0;e<16;++e)n[e]=c[t][e];for(let t=16;t<80;++t)n[t]=T(n[t-3]^n[t-8]^n[t-14]^n[t-16],1);let a=r[0],o=r[1],i=r[2],s=r[3],h=r[4];for(let t=0;t<80;++t){const r=Math.floor(t/20),c=T(a,5)+x(r,o,i,s)+h+e[r]+n[t]>>>0;h=s,s=i,i=T(o,30)>>>0,o=a,a=c}r[0]=r[0]+a>>>0,r[1]=r[1]+o>>>0,r[2]=r[2]+i>>>0,r[3]=r[3]+s>>>0,r[4]=r[4]+h>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]}));const M="captcha-update",$=Symbol("mixins/with-recaptcha");function D(d){if(t(d,$))return d;class l extends d{constructor(){super(...arguments),this.recaptchaMethod=u.Render,this.renderString="explicit",this.dedupeCaptchaScripts=!1,this.uuid=E(),this.captchaSlotName=`${this.tagName.toLowerCase()}-captcha-element-${this.uuid}`,this.captchaSlotController=new i(this,this.captchaSlotName),this.scriptElements=new Map}insertRecaptchaScript(t=this.renderString,e=this.captchaSiteKey,r=this.captchaAction,n=this.recaptchaMethod){const a=`//www.google.com/recaptcha/enterprise.js?render=${t}`;if(this.dedupeCaptchaScripts){if(t&&document.querySelector(`script[src*="${a}"]`))return}else if(t&&this.scriptElements.has(t))return;const c=document.createElement("script"),o=`${this.tagName.toLowerCase()}-${E()}-${t}`;c.setAttribute("id",o),c.setAttribute("nonce",o),c.setAttribute("async","true"),c.setAttribute("src",a),c.onload=()=>{this.onRecaptchaLoad(e,r,n)},document.body.appendChild(c),this.scriptElements.set(t,c)}removeRecaptchaScript(){this.scriptElements.forEach((t=>t?.remove()))}onRecaptchaLoad(t=this.captchaSiteKey,e=this.captchaAction,r=this.recaptchaMethod){const n=window.grecaptcha;if(!n||r===u.Execute)return;const o=n=>{this.captchaToken=n,this.dispatchEvent(c(M,{token:n,siteKey:t,action:e,recaptchaMethod:r}))};n.enterprise.ready((async()=>{this.captchaWidgetId=n.enterprise.render(this.captchaSlotController.slotted,{action:e||"",sitekey:t||"",theme:a()?"dark":"light",callback:o,"expired-callback":o,"error-callback":o})}))}async getRecaptchaToken(t=this.captchaAction,e=this.captchaSiteKey){return this.recaptchaMethod=u.Execute,this.captchaToken=void 0,new Promise(((r,n)=>{const a=window.grecaptcha;if(!a)return n("reCAPTCHA not ready or site key not set.");a.enterprise.ready((async()=>{if(!t||!e)return n("reCAPTCHA action or site key is not provided.");if("function"!=typeof a.enterprise.execute)return n("reCAPTCHA execute method is undefined.");try{const n=await a.enterprise.execute(e,{action:t});if(!n)throw new Error("Failed to retrieve a valid reCAPTCHA token.");this.captchaToken=n,r(n)}catch(t){n(`Error in reCAPTCHA token retrieval: ${t}`)}}))}))}resetRecaptcha(t=this.recaptchaMethod){const e=window.grecaptcha;e&&t!==u.Execute&&void 0!==this.captchaWidgetId&&e.enterprise.ready((async()=>{e.enterprise.reset(this.captchaWidgetId),this.captchaToken=void 0}))}async getRecaptchaTokenSafe(t,e){let r=null;try{r=await this.getRecaptchaToken(t,e)??null}catch(t){r=null}return r}dispatchRecaptchaFailureAlert(){const t=c("faceplate-alert",{level:o.error,message:"An error occurred. Please disable any extensions or try using a different web browser to continue.",cause:"recaptcha-failure"});this.dispatchEvent(t)}renderRecaptcha(t=this.captchaSiteKey,e=this.recaptchaMethod){return t?e===u.Execute?s:h`<slot name="${this.captchaSlotName}"></slot>`:s}renderRecaptchaIn(t,e=this.captchaSiteKey,r=this.recaptchaMethod){p(this.renderRecaptcha(e,r),t)}}return l[$]=!0,e([r({type:String,attribute:"captcha-action"})],l.prototype,"captchaAction",void 0),e([r({type:String,attribute:"captcha-site-key"})],l.prototype,"captchaSiteKey",void 0),e([r({type:String,attribute:"captcha-method"})],l.prototype,"recaptchaMethod",void 0),e([r({type:String,attribute:"render-string"})],l.prototype,"renderString",void 0),e([r({type:Boolean,attribute:"dedupe-captcha-scripts"})],l.prototype,"dedupeCaptchaScripts",void 0),e([n()],l.prototype,"captchaToken",void 0),l}export{M as C,u as R,D as W};
