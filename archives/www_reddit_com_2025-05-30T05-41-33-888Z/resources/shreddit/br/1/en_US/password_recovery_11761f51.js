import{y as e,go as t,aH as o,eK as a,gn as n,gp as s,L as r,bd as c,hv as i,hw as m,l as u,b as l,b2 as d}from"./shell-2264602c.js";function f(e){localStorage.removeItem(function(e){return`chat:${e}`}(e))}function g(){(function(){let e=["access-token","matrix-user-id","matrix-access-token"];for(let t of e)f(t)})(),function(){try{window.indexedDB.deleteDatabase("matrix-js-sdk:reddit-chat-sync")}catch{}}()}function w(){e.remove(t),e.remove(o),e.remove(a),e.remove(n),e.remove(s),g()}const h="comment-draft-items-";var v;!function(e){e[e.Submit=0]="Submit",e[e.Discard=1]="Discard",e[e.Other=2]="Other"}(v||(v={}));let b=window.location;async function p(){await fetch(c.Logout,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({0:"1",csrf_token:e.get("csrf_token")})}),window.google?.accounts?.id?.disableAutoSelect?.(),e.remove(i),e.remove(m),u.removeItem(r.RecentPages),u.removeItem(r.RecentCommunities),u.removeItem(r.RecentSearches),w(),Object.keys(localStorage).filter((e=>e.startsWith(h))).forEach((e=>localStorage.removeItem(e))),localStorage.removeItem(r.DraftsCoachMarkSeen),b.reload()}const S=()=>!!document.querySelector("shreddit-app")?.hasAttribute?.("user-logged-in"),y=()=>{u.setItem(r.LoginTime,(new Date).toString())};function k(e){return new Promise(((t,o)=>{e?window.google?.accounts?.id?window.google.accounts.id.revoke(e,(({successful:e,error:a})=>{e?t():o(a)})):o("Google API is not ready"):o("Google account id is not available")}))}function I(e){try{return new URL(e,"https://www.reddit.com")}catch(e){return}}const D=()=>l({source:d.ResetPassword,action:"submit",noun:"reset_complete"}),j=(e,t)=>l({source:e,action:"submit",noun:"email"},{action_info:{success:t}}),x=(e,t)=>l({source:e,action:"view",noun:"banner"},{action_info:{reason:t}});export{h as C,v as D,k as a,x as b,j as e,S as g,p as l,I as p,D as r,y as s};
