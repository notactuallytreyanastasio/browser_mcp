import{a as e,t,_ as r,n as o,g as a,b as d,w as s,e as i}from"./shell-2264602c.js";import{s as n,x as c,aC as l,I as u}from"./icon-82dd10b4.js";import{l as p}from"./expandable-section-header-edd4c2b3.js";import"./select-controller-e11d5e4c.js";import"./community-picker-9f84d972.js";import"./user-flair-afad799f.js";import"./age-gate-standalone-client-js-5357b0cf.js";const b=e(n);let m=class extends b{constructor(){super(...arguments),this.hasRemovalReasonAdded=!1,this._feedbackSubmitted=!1,this._trackingContext={}}get reportKey(){return`post-guidance-feedback-${this.reportId}`}getShredditPostData(){const e=this.getRootNode();if(e instanceof ShadowRoot){const t=e.host;if(t&&"SHREDDIT-POST"===t.tagName)return{id:t.id,postTitle:t.getAttribute("post-title"),contentHref:t.getAttribute("content-href"),authorId:t.getAttribute("author-id")}}return null}connectedCallback(){super.connectedCallback(),this._feedbackSubmitted="true"===sessionStorage.getItem(this.reportKey);const e=this.getShredditPostData();e&&(this._trackingContext={action_info:{post_id:e.id,post_title:e.postTitle,post_url:e.contentHref,author_id:e.authorId}})}handleFeedbackSubmit(e){if(e.target&&e.target instanceof HTMLElement){const t=e.target.closest("button"),r=d({source:"moderator",action:"click",noun:"yes"===t?.value?"filter_is_correct":"filter_is_incorrect",...this._trackingContext});this.trackEvent(r),this._feedbackSubmitted=!0,sessionStorage.setItem(this.reportKey,"true")}}handleFeedbackUndo(){this._feedbackSubmitted=!1;const e=d({source:"moderator",action:"click",noun:"undo_filter",...this._trackingContext});this.trackEvent(e),sessionStorage.removeItem(this.reportKey)}renderFeedbackForm(){return c`<div class="border border-solid border-neutral-border p-sm flex flex-col gap-xs rounded-[8px] flex-1"> <div class="text-14 w-full"> Was this automation accurate? </div> <div class="flex gap-2xs"> ${s({children:"Yes",appearance:"bordered",attributes:{type:"button",onclick:this.handleFeedbackSubmit,value:"yes"}})} ${s({children:"No",appearance:"bordered",attributes:{type:"button",onclick:this.handleFeedbackSubmit,value:"no"}})} </div> </div>`}renderFeedbackSubmitted(){return c` <div class="border border-solid border-neutral-border p-sm flex flex-row gap-xs rounded-[8px] flex-1 items-center"> <div class="text-14 w-full"> Got it. You helped train your automation. </div> <faceplate-dropdown-menu id="post-guidance-feedback-dropdown-menu"> ${s({appearance:"plain",attributes:{type:"button"},leadingIcon:l({size:u.ExtraSmall}),screenReaderContent:"More options"})} <faceplate-menu slot="menu" dropdown> ${p({label:"Undo",attributes:{role:"option",onclick:this.handleFeedbackUndo}})} </faceplate-menu> </faceplate-dropdown-menu> </div>`}renderRemovalReasonAdded(){return c`<div class="border border-solid border-neutral-border p-sm flex flex-row gap-xs rounded-[8px] flex-1 items-center"> <div class="text-14 w-full"> Your removal reason helped train your automation. </div> </div>`}render(){return this.hasRemovalReasonAdded?this.renderRemovalReasonAdded():this._feedbackSubmitted?this.renderFeedbackSubmitted():this.renderFeedbackForm()}};m.styles=[t],r([o({type:String,attribute:"report-id"})],m.prototype,"reportId",void 0),r([o({type:Boolean,attribute:"has-removal-reason-added"})],m.prototype,"hasRemovalReasonAdded",void 0),r([a()],m.prototype,"_feedbackSubmitted",void 0),m=r([i("post-guidance-feedback")],m);
