import{_ as e,n as t,E as i}from"./shell-2264602c.js";import{a as r,x as o}from"./icon-82dd10b4.js";import{F as s}from"./constants-d65b7b38.js";const n={checkbox:()=>"This checkbox must be on",radio:()=>"This radio must have a selected option"};class a extends s{constructor(){super(...arguments),this.required=!1,this.name="",this.initialized=!1,this._events=new i(this),this.ariaRole="checkbox",this._checked=!1,this.ellipsis=!1,this._handleClick=this._events.define("click",(e=>{this.disabled||e.defaultPrevented||this.handleInteraction()})),this._handleKeydown=this._events.define("keydown",(e=>{this.disabled||e.defaultPrevented||"Space"===e.code&&(e.stopPropagation(),e.preventDefault(),this.handleInteraction())}))}get checked(){return this._checked}set checked(e){const t=this._checked;e!==t&&(this._internals.setFormValue(e?this.getAttribute("value")||"on":null),this._checked=e,e?this.setAttribute("aria-checked","true"):this.removeAttribute("aria-checked"),this.hasAttribute("required")&&!this.checked?this._internals.setValidity({valueMissing:!0},n[this.ariaRole]()):this._internals.setValidity(),this.requestUpdate("checked",t))}static get styles(){return[super.styles,r`:host(:not(faceplate-switch-input)){min-height:var(--size-md)}:host{display:flex;align-items:center;cursor:pointer}label{font:var(--font-14-20-regular);color:var(--color-neutral-content-strong);margin-left:var(--spacer-2xs);cursor:pointer}.icon{border:var(--line-md) solid transparent;height:var(--size-md);font-size:var(--size-md);flex-shrink:0}:host([checked]) .icon,:host([indeterminate]) .icon{display:inline-block;color:var(--color-primary-background)}:host(:hover) .icon{color:var(--color-primary-background-hover)}:host([faceplate-validity=invalid]) .icon{color:var(--color-danger-content);pointer-events:none}:host([aria-disabled=true]) .icon{color:var(--color-neutral-content-disabled);pointer-events:none}:host([ellipsis]) label{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:host([required]) label::after{position:absolute;color:var(--color-danger-content);content:'*'}:host(:focus) .icon{border-color:var(--color-global-focus,transparent);outline:0}:host(:focus){outline:0}:host(:focus:not(:focus-visible)) .icon{border-color:transparent}`]}connectedCallback(){super.connectedCallback(),this.initialized||(this.initialized=!0,this.setAttribute("role",this.ariaRole),this.setAttribute("tabindex","0"))}formDisabledCallback(e){super.formDisabledCallback(e),e?this.removeAttribute("tabindex"):this.setAttribute("tabindex","0")}render(){return o` ${super.render()} <label> <slot></slot> </label> `}handleInteraction(){const e=new InputEvent("input",{bubbles:!0});this.dispatchEvent(e)}}e([t({type:Boolean})],a.prototype,"required",void 0),e([t({type:String})],a.prototype,"name",void 0),e([t({type:Boolean,reflect:!0})],a.prototype,"checked",null),e([t({type:Boolean})],a.prototype,"ellipsis",void 0);const l="siteRule.value",c="categoryOrRule.value";class d{constructor(e){this.bottomScrollIntoViewIfNeeded=e=>{const t=e?.parentElement;if(t&&e){t.clientHeight-(e.offsetTop+e.clientHeight)<0&&e.scrollIntoView()}},this.getHiddenInputValue=e=>this.reportFormEl.querySelector(`form input[type=hidden][name="${e}"]`)?.getAttribute("value")??"",this.setHiddenInputValue=(e,t)=>this.reportFormEl.querySelector(`form input[type=hidden][name="${e}"]`)?.setAttribute("value",t)??"",this.getAllHiddenInputValues=()=>Array.from(this.reportFormEl.querySelectorAll("form input[type=hidden]")).reduce(((e,t)=>{const i=t.getAttribute("name");return i?{...e,[i]:t.getAttribute("value")??""}:e}),{}),this.getComputedValueByRef=e=>{if(e===l){const t=this.getHiddenInputValue(c);return this.getHiddenInputValue(e).includes(t)?this.getHiddenInputValue(e):""}return this.getHiddenInputValue(e)},this.checkCondition=e=>{if("object"==typeof e){const{args:t,$type:i}=e;if("computed"===i&&Array.isArray(t)){const i=t.map((e=>"object"==typeof e&&"ref"===e.$type?this.getComputedValueByRef(e.ref):e));return"neq"===e.function?String(i[0])!==String(i[1]):String(i[0])===String(i[1])}if("ref"===i&&e.ref)return this.getHiddenInputValue(e.ref)}return!1},this.getComputedProp=e=>{if("computed"===e.$type&&"conditionalSelect"===e.function&&e.conditions&&e.values){const t=e.conditions;for(const[i,r]of t.entries())if(!0===r||"boolean"!=typeof r&&this.checkCondition(r))return e.values[i]}return e},this.getText=e=>{if(this.isString(e))return e;const t=this.getComputedProp(e);return this.isString(t)?t:""},this.getAction=e=>this.getComputedProp(e),this.getDisabledCondition=e=>!!this.checkCondition(this.getComputedProp(e)),this.getTextDataRef=e=>{const t=e.conditions?.[0];if(t&&"boolean"!=typeof t){const e=t.args;if(Array.isArray(e)&&!this.isString(e[0]))return e[0].ref}return""},this.getDisabledRef=e=>{const t=e.args;if(t&&Array.isArray(t)&&!this.isString(t[0]))return[t[0].ref];const i=e.values;return i?i.map((e=>e.args[0].ref)):void 0},this.isString=e=>"string"==typeof e,this.performAction=e=>{switch(e.actionType){case"formSubmit":return{formSubmit:!0,data:e.args};case"formClose":return{formClose:!0};case"flow":return"SELF_HARM"===this.getHiddenInputValue(e.args[0].ref)?{openCtlFlow:!0}:void 0;case"openTemplatedUrl":const t=e.args,{urlTemplate:i,placeholders:r}=t;if(t&&i&&r){let e="";return r.forEach((r=>{const o=t[r],s=this.getHiddenInputValue(o.ref);s&&(e=i.replaceAll(`%(${r})s`,s))})),{href:e,formClose:!0}}return{formClose:!0};default:const{value:o,key:s}=e.args;return"ref"===o.$type?(this.setHiddenInputValue(s,this.getHiddenInputValue(o.ref)),{key:s,value:this.getHiddenInputValue(o.ref)}):void 0}},this.reportFormEl=e}}export{a as C,d as R,l as S,c as a};
