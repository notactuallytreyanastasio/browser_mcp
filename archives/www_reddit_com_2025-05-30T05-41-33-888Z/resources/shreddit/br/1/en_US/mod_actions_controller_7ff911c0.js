import{x as t,l as e,aC as s,A as i,q as a,I as o,N as n}from"./icon-82dd10b4.js";import{du as r,p as h,T as d,c6 as l,b as c,fp as m,fq as p,dF as u,u as g,d0 as v,a2 as k,c as w,bR as f,r as _,w as b,x as T,aQ as y,I as P,fr as C,M as S,O as R,fs as A,i as E,ft as I}from"./shell-2264602c.js";import{l as M}from"./expandable-section-header-edd4c2b3.js";import{O as U}from"./custom-event-7a897666.js";import{A as x}from"./mod-removal-reason-form-client-js-13da5191.js";import{r as H}from"./user-flair-afad799f.js";import{w as N,n as D,u as $,x as O,y as q,z as L,A as j}from"./modActions-c13cf697.js";import{i as B,g as F}from"./postFlair-707ffbfa.js";import{S as W,M as z}from"./mod-bulk-actions-285bd4b9.js";import{S as V}from"./comment-8177f9ce.js";import{M as Q,A as G,d as J}from"./distinguished-tags-ad178980.js";import{S as K,b as X}from"./overflow-menu-actions-97fa1cfc.js";import{N as Y}from"./age-gate-standalone-client-js-5357b0cf.js";import"./community-picker-9f84d972.js";import"./select-controller-e11d5e4c.js";import"./click-card-65b67e9d.js";import"./previous-actions-client-js-7310b8fb.js";import{j as Z}from"./links-9b598b77.js";function tt(t){switch(!0){case B(t):return r.Award;case D(t):return r.Comment;case N(t):return r.Post;default:return null}}const et=t=>t.stopPropagation();const st=new class{constructor(){this.gqlSubscriptionControllers=[],this.onNewDataReceived=t=>{h(d.ModRealtimeUpdate,t)},this.onNewDataReceivedThrottled=Y(this.onNewDataReceived,1e3,!0)}subscribeToRealtimeUpdates(t){if(t.subredditId){const i=new l(t);t.addController(i),i.subscribe((e=t.subredditId,s=this.onNewDataReceivedThrottled,{query:{operationName:"SubscribeSubscription",query:"\n    subscription SubscribeSubscription($input: SubscribeInput!) {\n      subscribe(input: $input) {\n        id\n        ... on BasicMessage {\n          data {\n            ... on ModActionMessageData {\n              id\n              createdAt\n              subredditID\n              moderatorID\n              targetID\n              targetType\n              action\n            }\n          }\n        }\n      }\n    }\n    ",variables:{input:{channel:{teamOwner:"MOD",subredditID:e,category:"MOD_UPDATE"}}}},onData:t=>{const e=t?.data?.subscribe?.data;e&&s(e)}})),this.gqlSubscriptionControllers.push(i)}var e,s}hostDisconnected(){this.unsubscribeFromRealtimeUpdates()}unsubscribeFromRealtimeUpdates(){this.gqlSubscriptionControllers.forEach((t=>t.unsubscribe())),this.gqlSubscriptionControllers=[]}},it=(t,e,s)=>{const i=s===r.Post;switch(t){case Q.MarkSpoiler:return e?i?"Post has been marked spoiler.":"Comment has been marked spoiler.":i?"There was an error marking the post spoiler. Please try again.":"There was an error marking the comment spoiler. Please try again.";case Q.UnmarkSpoiler:return e?i?"Post has been unmarked spoiler.":"Comment has been unmarked spoiler.":"There was an error unmarking the post spoiler. Please try again.";case Q.MarkNsfw:return e?i?"Post has been marked nsfw.":"Comment has been marked nsfw.":i?"There was an error marking the post nsfw. Please try again.":"There was an error marking the comment nsfw. Please try again.";case Q.UnmarkNsfw:return e?i?"Post has been unmarked nsfw.":"Comment has been unmarked nsfw.":"There was an error unmarking the post nsfw. Please try again.";case Q.IgnoreReports:return e?i?"Reports ignored and post approved.":"Reports ignored and comment approved.":i?"There was an error ignoring the post's reports. Please try again.":"There was an error ignoring the comment's reports. Please try again.";case Q.UnignoreReports:return e?i?"Reports unignored.":"Reports successfully restored.":i?"There was an error unignoring the post's reports. Please try again.":"There was an error unignoring the comment's reports. Please try again.";case Q.Distinguish:return e?i?"Post is marked as distinguished.":"Comment is marked as distinguished.":i?"There was an error distinguishing the post. Please try again.":"There was an error distinguishing the comment. Please try again.";case Q.Undistinguish:return e?i?"Post is marked as undistinguished.":"Comment is marked as undistinguished.":i?"There was an error undistinguishing the post. Please try again.":"There was an error undistinguishing the comment. Please try again.";case Q.Sticky:return e?i?"Post has been stickied.":"Comment has been stickied.":i?"There was an error stickying the post. Please try again.":"There was an error stickying the comment. Please try again.";case Q.Unsticky:return e?i?"Post has been unstickied.":"Comment has been unstickied.":i?"There was an error unstickying the post. Please try again.":"There was an error unstickying the comment. Please try again.";case Q.Lock:return e?i?"Post has been locked.":"Comment has been locked.":i?"There was an error locking the post. Please try again.":"There was an error locking the comment. Please try again.";case Q.Unlock:return e?i?"Post has been unlocked.":"Comment has been unlocked.":i?"There was an error unlocking the post. Please try again.":"There was an error unlocking the comment. Please try again.";case Q.ApproveContent:if(e)switch(s){case r.Award:return"Award approved.";case r.Comment:return"Comment approved.";case r.Post:return"Post approved.";default:return""}switch(s){case r.Award:return"There was an error approving the award. Please try again.";case r.Comment:return"There was an error approving the comment. Please try again.";case r.Post:return"There was an error approving the post. Please try again.";default:return""}case Q.ConfirmRemoval:case Q.RemoveContent:if(e)switch(s){case r.Award:return"Award removed.";case r.Comment:return"Comment removed.";case r.Post:return"Post removed.";default:return""}switch(s){case r.Award:return"There was an error removing the award. Please try again.";case r.Comment:return"There was an error removing the comment. Please try again.";case r.Post:return"There was an error removing the post. Please try again.";default:return""}case G.Distinguish:return e?i?"Post is marked as distinguished as admin.":"Comment is marked as distinguished as admin.":i?"There was an error distinguishing the post as admin. Please try again.":"There was an error distinguishing the comment as admin. Please try again.";case G.Undistinguish:return e?i?"Post is marked as undistinguished as admin.":"Comment is marked as undistinguished as admin.":i?"There was an error undistinguishing the post as admin. Please try again.":"There was an error undistinguishing the comment as admin. Please try again.";case Q.RemoveHighlightedPost:return e?"Highlight removed":"There was an error removing the post from community highlights. Please try again.";default:return""}},at=async(t=document,e=5e3,s=100)=>{const i=Date.now(),a=t=>{const e=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,null);let s=e.nextNode();for(;s;){if(s instanceof Element&&s.shadowRoot){const t=o(s.shadowRoot);if(t)return t}s=e.nextNode()}return null},o=t=>{const e=t.querySelector('textarea[name="message"]');return e instanceof HTMLTextAreaElement?e:a(t)};return new Promise((o=>{const n=()=>{const r=(()=>{const e=t.querySelector("rs-message-composer");return e?.input?e.input:a(t)})();r?o(r):Date.now()-i>e?o(null):setTimeout(n,s)};n()}))},ot=async t=>{const e=await at();e&&(e.value=t,e.dispatchEvent(new Event("input",{bubbles:!0})))};class nt{constructor(l,{getThingIdFn:P,getUserIdFn:C,scrollContainerSelectorFn:S,prefillChatMessageFn:R}){this._modPartSlotName="",this.hasSubscribedToRealtimeUpdates=!1,this.publishEvent=(t,e)=>{switch(this.itemType){case r.Award:t in W&&h(d.AwardOnContentUpdated,{awardOnContentId:this._getThingId(),action:W[t],value:e});break;case r.Comment:t in V&&h(d.CommentUpdated,{commentId:this._getThingId(),action:V[t],value:e});break;case r.Post:(X.includes(t)||t in K)&&h(d.PostUpdated,{postId:this._getThingId(),action:K[t],value:e});break}},this.modActionMenuClickEvent=t=>{let e="";switch(this.itemType){case r.Award:e="awardOnContentId";break;case r.Comment:e="commentId";break;case r.Post:default:e="postId"}return c({source:"moderator",action:"click",noun:t},{[e]:this._getThingId(),action_info:{reason:this.modPartialPath}})},this._getHandleReportToggle=t=>async()=>{const e=t===Q.IgnoreReports,s=e?O:q,i=e?L:j;this._host.trackEvent(this.isPost?s():i());try{const s=[this._getThingId()],i=await(e?this.modBulkActions.modBulkIgnore(s):this.modBulkActions.modBulkUnignore(s));if(!i?.ok)throw new Error("Operation failed");return this.publishEvent(t,e),this.showSuccessToast(t),e}catch{return this.showErrorToast(t),!e}},this._getHandleDistinguishToggle=t=>async()=>{const e=t===Q.Distinguish,s=e?"distinguish_as_mod":"undistinguish_as_mod";this._host.trackEvent(this.modActionMenuClickEvent(s));let i=!0;this.publishEvent(t,e);try{const s=await this.updateDistinguishState(e?m.ModDistinguished:m.None);if(!s?.ok)throw new Error("Operation failed");this.showSuccessToast(t)}catch{this.publishEvent(t,!e),this.showErrorToast(t),i=!1}return this._host.requestUpdate(),i?e:!e},this._getHandleStickyToggle=t=>async()=>{const e=t===Q.Sticky,s=e?"sticky":"unsticky";this._host.trackEvent(this.modActionMenuClickEvent(s));let i=!0;this.publishEvent(t,e);try{const s=await this.updateStickyState(e);if(!s?.ok)throw new Error("Operation failed");this.showSuccessToast(t)}catch{this.publishEvent(t,!e),this.showErrorToast(t),i=!1}return this._host.requestUpdate(),i?e:!e},this._getHandleLockedToggle=t=>async()=>{const e=t===Q.Lock,s=e?"lock":"unlock";this._host.trackEvent(this.modActionMenuClickEvent(s));let i=!0;this.publishEvent(t,e);try{let s;if(this.isPost){const t=[this._getThingId()];s=await(e?this.modBulkActions.modBulkLock(t):this.modBulkActions.modBulkUnlock(t))}else s=await this.updateLockedState(e?p.Locked:p.None);if(!s?.ok)throw new Error("Operation failed");this.showSuccessToast(t)}catch{this.publishEvent(t,!e),this.showErrorToast(t),i=!1}return this._host.requestUpdate(),i?e:!e},this._getHandleMarkNsfwToggle=t=>async()=>{let e=!0;const s=t===Q.MarkNsfw;if(!this.isPost)return!s;const i=s?"mark_nsfw":"unmark_nsfw";this._host.trackEvent(this.modActionMenuClickEvent(i));const a=[this._getThingId()],o=await(s?this.modBulkActions.modBulkMarkNSFW(a):this.modBulkActions.modBulkUnmarkNSFW(a));return o?.ok?(this.showSuccessToast(t),this.publishEvent("isPostNsfw",s)):(this.showErrorToast(t),e=!1),this._host.requestUpdate(),e?s:!s},this._getHandleMarkSpoilerToggle=t=>async()=>{let e=!0;const s=t===Q.MarkSpoiler;if(!this.isPost)return!s;const i=s?"mark_spoiler":"unmark_spoiler";this._host.trackEvent(this.modActionMenuClickEvent(i));const a=[this._getThingId()],o=await(s?this.modBulkActions.modBulkMarkSpoiler(a):this.modBulkActions.modBulkUnmarkSpoiler(a));return o?.ok?(this.showSuccessToast(t),this.publishEvent("isPostSpoiler",s)):(this.showErrorToast(t),e=!1),this._host.requestUpdate(),e?s:!s},this.handleApproveContentOptimistic=()=>{this.publishEvent(Q.ApproveContentOptimistic,!0)},this._getHandleModApproval=t=>async()=>{this.handleApproveContentOptimistic(),this._host.trackEvent(this.modActionMenuClickEvent("approve"));try{const e=await this.modBulkActions.modBulkApprove([this._getThingId()]);return e?.ok?(this.publishEvent(t,!0),!0):(this.showErrorToast(t),!1)}catch{return this.showErrorToast(t),!1}},this._getShareToModChat=t=>async t=>{const e=t.currentTarget,s=e?.getAttribute("permalink");return!!s&&(await this._prefillChatMessage(window.location.origin+s),!0)},this.handleRemoveContentOptimistic=()=>{this.publishEvent(Q.RemoveContentOptimistic,!0)},this.handleRemoveContentAsSpamOptimistic=()=>{this.publishEvent(Q.RemoveContentAsSpamOptimistic,!0)},this.handleConfirmRemovalOptimistic=()=>{this.publishEvent(Q.ConfirmRemovalOptimistic,!0)},this._getHandleModRemoval=t=>async()=>{switch(t){case Q.RemoveContent:this.handleRemoveContentOptimistic();break;case Q.RemoveContentAsSpam:this.handleRemoveContentAsSpamOptimistic();break;case Q.ConfirmRemoval:this.handleConfirmRemovalOptimistic()}const e=t===Q.RemoveContentAsSpam;let s=t===Q.ConfirmRemoval?"confirm_removal":"remove";t===Q.RemoveContentAsSpam&&(s="spam"),this._host.trackEvent(this.modActionMenuClickEvent(s));try{const s=await this.modBulkActions.modBulkRemove([this._getThingId()],e);return s?.ok?(this.publishEvent(t,!0),this.dispatchRequestReload(),!0):(this.showErrorToast(t),!1)}catch{return this.showErrorToast(t),!1}},this._getHandleOpenEditPostFlairModal=()=>async()=>{const t=this._getThingId();if(t){this._host.trackEvent(this.modActionMenuClickEvent("flair")),await this._activateFeature({name:u,queryParams:{isLoggedin:!0,selectedIds:t},renderMode:g.Contents});const e=document.getElementById(F(t));e?.showModal()}},this._getHandleAddToHighlights=()=>async()=>{const t=this._getThingId();t&&await this._activateFeature({name:v,routeParams:{postId:t},renderMode:g.Contents})},this._getHandleRemoveFromHighlights=()=>async()=>{const t=this._getThingId();if(t){this.publishEvent(Q.RemoveHighlightedPost,!1);try{await this.removeHighlightedPost(t),this.showSuccessToast(Q.RemoveHighlightedPost),this._host.trackEvent($(t,k())),h(d.ReloadHighlights)}catch(t){this.showErrorToast(Q.RemoveHighlightedPost),this.publishEvent(Q.RemoveHighlightedPost,!0)}}},this.handleIgnoreReports=this._getHandleReportToggle(Q.IgnoreReports),this.handleUnignoreReports=this._getHandleReportToggle(Q.UnignoreReports),this.handleDistinguish=this._getHandleDistinguishToggle(Q.Distinguish),this.handleUndistinguish=this._getHandleDistinguishToggle(Q.Undistinguish),this.handleSticky=this._getHandleStickyToggle(Q.Sticky),this.handleUnsticky=this._getHandleStickyToggle(Q.Unsticky),this.handleUpdateHighlightedPost=this._getHandleAddToHighlights(),this.handleRemoveHighlightedPost=this._getHandleRemoveFromHighlights(),this.handleLock=this._getHandleLockedToggle(Q.Lock),this.handleUnlock=this._getHandleLockedToggle(Q.Unlock),this.handleMarkNsfw=this._getHandleMarkNsfwToggle(Q.MarkNsfw),this.handleUnmarkNsfw=this._getHandleMarkNsfwToggle(Q.UnmarkNsfw),this.handleMarkSpoiler=this._getHandleMarkSpoilerToggle(Q.MarkSpoiler),this.handleUnmarkSpoiler=this._getHandleMarkSpoilerToggle(Q.UnmarkSpoiler),this.handleConfirmRemoval=this._getHandleModRemoval(Q.ConfirmRemoval),this.handleRemoveContent=this._getHandleModRemoval(Q.RemoveContent),this.handleRemoveContentAsSpam=this._getHandleModRemoval(Q.RemoveContentAsSpam),this.handleApproveContent=this._getHandleModApproval(Q.ApproveContent),this.handleShareToModChat=this._getShareToModChat(Q.ShareToModChat),this.handleOpenEditPostFlairModal=this._getHandleOpenEditPostFlairModal(),this.handleSnoozeReporter=()=>{},this.handleUnsnoozeReporter=()=>{},this.handleAddRemovalReason=()=>{this._host.dispatchEvent(new x(this._getThingId())),this._host.trackEvent(this.modActionMenuClickEvent("add_removal_reason"))},this.handleAdjustCrowdControl=()=>{this._host.dispatchEvent(w(U,{postId:this._getThingId()}))},this.handleRemoveContentMenu=()=>this._getHandleModRemoval(Q.RemoveContent)(),this.startPreviousActionsLoader=async t=>{const e=this._host?.shadowRoot?.getElementById(t);if(e){f('<div class="pl-sm">\n        <faceplate-shimmer class="h-[40px] w-100 pt-md" shape="pill"></faceplate-shimmer>\n        <faceplate-shimmer class="h-[40px] w-100 pt-md" shape="pill"></faceplate-shimmer>\n        <faceplate-shimmer class="h-[40px] w-100 pt-md" shape="pill"></faceplate-shimmer>\n        <faceplate-shimmer class="h-[40px] w-100 pt-md" shape="pill"></faceplate-shimmer>\n      </div>',e,g.Contents)}},this.loadPreviousActions=async(t,e)=>{const s=this._getThingId();if("string"!=typeof s||!s.startsWith("t3_")&&!s.startsWith("t1_")&&!B(s))return;let i;if(this.itemType===r.Award)i='<p class="pl-sm">Looks like this award doesn\'t have any previous actions to display...</p>';else{const t=`/svc/shreddit/previous-actions/${s}`,e=await this.partialRequestController.request(t);if(i=await(e?.text()),!i)return}const a=this._host?.shadowRoot?.getElementById(e);a&&(f(i,a,g.Contents),t.reposition())},this.renderVerdictPartial=(t,e)=>{f(t,e,g.Replace)},this.loadVerdict=async t=>{const e="verdict";this._modPartSlotName!==e&&(this._modPartSlotName=e,this._host.requestUpdate());const s=this._getThingId().replace("|","\\|"),i=this._host.querySelector(`#feed-element-mod-verdict-${s}`);if(!i)return;const a=`/svc/shreddit/mod-partials/${this.modPartialPath}/${this._getThingId()}${t?`?verdict=${t}`:""}`,o=await this.partialRequestController.request(a),n=await(o?.text());n?this.renderVerdictPartial(n,i):this.renderVerdictPartial("",i)},this.handleIncomingRealtimeUpdate=t=>{const{moderatorID:e,targetID:s,action:i}=t,a=s===this._getThingId(),o=e===this._getUserId(),n=[I.ApproveComment,I.ApproveLink,I.RemoveComment,I.RemoveLink,I.SpamComment,I.SpamLink,I.AddRemovalReason,I.UpdateRemovalReason].includes(i);if(a&&a&&!o&&n){const e=this._host.closest("shreddit-comment");e?(e.updateState=t,e.triggerRealtimeUpdateAnimation()):this._host.updateState=t}},this.handleClick=t=>{t.stopPropagation()},this._activateFeature=async t=>_(t),this.wrapWithPreviousActions=(a,o="default")=>{if(!this.isPreviousActionsFeatureEnabled())return a;const n=`previous-actions-container-${o}`,h=`previous-actions-menu-${o}`;return t` <click-card id="previous-actions-popup-click-card" label="previous-actions-popup" scroll-container-selector="${e(this._getScrollContainerSelector?.())}" custom-global-close-event="close-all-previous-actions-popups" @click-card:open="${()=>{this.startPreviousActionsLoader(n)}}" @click-card:opened="${t=>{this.loadPreviousActions(t.target,n)}}" tooltip-style="z-index: 20;"> <div class="w-fit m-0 border-0 bg-transparent cursor-pointer relative">${a}</div> <div slot="content" class="w-[350px] pb-sm pr-sm"> <div class="flex items-center justify-between pl-sm min-h-[40px]"> <p class="text-14 font-semibold m-0"> Previous Actions </p> ${this.itemType!==r.Award?t`<faceplate-dropdown-menu id="${h}" @click="${et}"> ${b({appearance:"plain",leadingIcon:s()})} <faceplate-menu slot="menu" hidden> <ul class="p-0 max-w-[300px]" role="menu"> ${M({label:"Ignore reports and approve",description:t`<span class="font-normal">Remove this item from the mod queue, and ignore future reports</span>`,attributes:{onclick:()=>{const t=this._host?.shadowRoot?.getElementById(h);t?.close(),this.handleIgnoreReports()}}})} </ul> </faceplate-menu> </faceplate-dropdown-menu>`:i} </div> <hr class="bg-neutral-border border-0 h-[1px] mb-0 ml-sm"> <div id="${n}" class="w-100 max-h-[300px] overflow-y-auto mr-sm" style="scrollbar-color:var(--color-neutral-border) transparent;scrollbar-width:thin"></div> </div> </click-card> `},this.onModInlineActionsLoaded=t=>{if(!t||!t.target)return;const e=t.target,s=e?.assignedNodes();s?.length>0&&!this.hasSubscribedToRealtimeUpdates&&(st.subscribeToRealtimeUpdates(this._host),this.hasSubscribedToRealtimeUpdates=!0)},this.renderModInlineActions=()=>t` <slot name="mod-inline-actions" @slotchange="${this.onModInlineActionsLoaded}"></slot> `,this.renderModPart=s=>t`<div class="${e(s)}"> <div class="flex gap-x-2xs items-center max-h-xl"> ${"verdict"===this._modPartSlotName?this.wrapWithPreviousActions(t`<slot name="mod-verdict"></slot>`,this._modPartSlotName):this.renderModInlineActions()} </div> <slot name="mod-share-to-mod-chat"></slot> <slot name="mod-overflow-menu"></slot> </div>`,this.renderInlineActions=s=>t` <div class="${e(s)}"> <div class="flex gap-x-2xs items-center max-h-xl"> ${"verdict"===this._modPartSlotName?i:this.renderModInlineActions()} </div> </div> `,this.renderOverflowMenu=s=>t` <div class="${e(s)}"> <slot name="mod-overflow-menu"></slot> </div> `,this.renderModVerdict=s=>t` <div class="${e(s)}"> <div class="flex gap-x-2xs items-center max-h-xl"> ${"verdict"===this._modPartSlotName?this.wrapWithPreviousActions(t`<slot name="mod-verdict"></slot>`,this._modPartSlotName):i} </div> </div> `,this.renderModContentStateIndicatorsClientSide=({className:s,showExpandable:i=!1,areInlineReportsExpanded:r=!1,onExpandStateChanged:h,onItemsCountChanged:d,filtersCount:l=0,reportsCount:c=0})=>i&&0===l&&c>1?t` <div class="inline-flex flex-row w-fit gap-2 bg-mods-reported-background rounded-[8px] items-start overflow-hidden"> ${this.wrapWithPreviousActions(r?t`<slot name="mod-content-state-indicators" class="${e(s)}"></slot>`:t`<slot name="mod-content-state-indicators-only-first" class="${e(s)}"></slot>`)} <div style="margin:4px 8px 0 0"> ${b({appearance:"secondary",children:r?"":"+"+(c-1),leadingIcon:r?a({size:o.ExtraSmall}):"",trailingIcon:r?"":n({size:o.ExtraSmall}),attributes:{className:"bg-tone-7 h-[16px] text-10 font-semibold rounded-[8px] z-2 relative",onclick:()=>{"function"==typeof h&&h(!r)},style:"--button-padding: 4px"},size:T.ExtraSmall})} </div> </div> `:this.wrapWithPreviousActions(t` <slot name="mod-content-state-indicators" class="${e(s)}" @slotchange="${t=>{const e=t.target.assignedNodes()[0];if(e&&"function"==typeof d){const t=e,s=Number(t.getAttribute("filters-count")),i=Number(t.getAttribute("reports-count"));d(s,i)}}}"></slot> `),this._getThingId=P,this._getUserId=C,this._host=l,this._prefillChatMessage=R??ot,this._host?.addController(this),this.partialRequestController=new y(this._host),this.modBulkActions=new z,this._getScrollContainerSelector=S,this._host.requestUpdate(),this._host.updateComplete.then((()=>{this._host.dispatchEvent(new CustomEvent("mod-actions-controller:loaded"))}))}setPartialRequestController(t){this.partialRequestController=t}getModPartSlotName(t){return t?"verdict":"default"}isPreviousActionsFeatureEnabled(){return!!this._host?.previousActionsFeature}get isPost(){return this.itemType===r.Post}get itemType(){return tt(this._getThingId())}get modPartialPath(){switch(this.itemType){case r.Award:case r.Comment:case r.Post:return this.itemType.toLowerCase();default:return""}}hostConnected(){Object.keys(Q).forEach((t=>{this._host.addEventListener(Q[t],this[`handle${t}`])})),this._modPartSlotName=this.getModPartSlotName(this._host.moderationVerdict),Z(this._host.viewContext)&&this._host.pubsub?.subscribe(d.ModRealtimeUpdate,this.handleIncomingRealtimeUpdate)}hostDisconnected(){Object.keys(Q).forEach((t=>{this._host.removeEventListener(Q[t],this[`handle${t}`])})),Z(this._host.viewContext)&&this._host.pubsub?.unsubscribe(d.ModRealtimeUpdate,this.handleIncomingRealtimeUpdate)}dispatchFaceplateAlertEvent(t,e){const s=w("faceplate-alert",{level:t,message:e});this._host.dispatchEvent(s)}showSuccessToast(t){this.itemType&&this.dispatchFaceplateAlertEvent(P.success,it(t,!0,this.itemType))}showErrorToast(t){this.itemType&&this.dispatchFaceplateAlertEvent(P.error,it(t,!1,this.itemType))}dispatchRequestReload(){this.itemType===r.Comment&&this._host.dispatchEvent(new CustomEvent("reload-shreddit-comment",{bubbles:!0,composed:!0}))}async updateDistinguishState(t){if(this.isPost){const e={input:{postId:this._getThingId(),distinguishType:t,distinguishState:t===m.None?C.None:C.Distinguished}},{data:s}=await S({operation:R.UpdatePostDistinguishedState,variables:e});return s?.updatePostDistinguishState}{const e={input:{commentId:this._getThingId(),distinguishType:t,distinguishState:t===m.None?A.None:A.Distinguished}},{data:s}=await S({operation:R.UpdateCommentDistinguishedState,variables:e});return s?.updateCommentDistinguishState}}async updateStickyState(t){if(this.isPost){const e={input:{postId:this._getThingId(),sticky:t,toProfile:!1}},{data:s}=await S({operation:R.UpdatePostStickyState,variables:e});return s?.updatePostStickyState}{const e={input:{commentId:this._getThingId(),sticky:t}},{data:s}=await S({operation:R.UpdateCommentStickyState,variables:e});return s?.updateCommentStickyState}}async updateLockedState(t){if(this.isPost){const e={input:{postId:this._getThingId(),lockedState:t}},{data:s}=await S({operation:R.UpdatePostLockedState,variables:e});return s?.updatePostLockedState}{const e={input:{commentId:this._getThingId(),lockedState:t}},{data:s}=await S({operation:R.UpdateCommentLockedState,variables:e});return s?.updateCommentLockedState}}async removeHighlightedPost(t){return H({postId:t})}triggerRealtimeUpdateAnimation(){const t=E();this._host.updateAnimation=t?"dark":"light";const e=J(this._host.updateState.action);this.publishEvent(e,!0),this._host.updateState=void 0}}var rt=Object.freeze({__proto__:null,ModActionsController:nt});export{nt as M,tt as i,rt as m,ot as p};
