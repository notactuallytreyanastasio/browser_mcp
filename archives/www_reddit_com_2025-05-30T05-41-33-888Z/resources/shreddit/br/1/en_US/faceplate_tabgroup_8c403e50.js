import{w as t,x as e,_ as i,J as a,m as n,g as s,n as r,a7 as o,e as l}from"./shell-2264602c.js";import{F as h}from"./faceplate-tablist-8c448763.js";import{d as c}from"./age-gate-standalone-client-js-5357b0cf.js";import{aT as d,I as b,a7 as u,a as p,x as f}from"./icon-82dd10b4.js";var _;let g=_=class extends h{constructor(){super(...arguments),this._setup=!1,this._bbwidth=0,this._fbwidth=0,this._forwardButtonVisible=!0,this._backButtonVisible=!1,this.selectedClasses=["bg-secondary-background-selected","!text-neutral-content-strong","tab-selected"],this.appearance="fill",this.insetHug=!1,this.underline=!1,this._mutationCallback=t=>{for(const e of t)if("attributes"===e.type&&"faceplate-tab-selected"===e.attributeName&&e.target.nodeType===Node.ELEMENT_NODE){e.target.hasAttribute("faceplate-tab-selected")?this._handleTabSelected(e.target):this._handleTabDeselected(e.target)}},this._setupButtons=()=>{this._setup&&(this.backButtonElements[0]?.removeEventListener("click",this._handleBackButtonClick),this.style.removeProperty("--back-button-width"),this.forwardButtonElements[0]?.removeEventListener("click",this._handleForwardButtonClick),this.style.removeProperty("--forward-button-width")),this.backButtonElements[0]instanceof HTMLElement&&(this._backButtonVisible||this.backButton?.removeAttribute("hidden"),this._bbwidth=this.backButton.clientWidth,this._backButtonVisible||this.backButton?.setAttribute("hidden",""),this.style.setProperty("--back-button-width",`${this._bbwidth}px`),this.backButtonElements[0].addEventListener("click",this._handleBackButtonClick)),this.forwardButtonElements[0]instanceof HTMLElement&&(this._forwardButtonVisible||this.forwardButton?.removeAttribute("hidden"),this._fbwidth=this.forwardButton.clientWidth,this._forwardButtonVisible||this.backButton?.setAttribute("hidden",""),this.style.setProperty("--forward-button-width",`${this._fbwidth}px`),this.forwardButtonElements[0].addEventListener("click",this._handleForwardButtonClick))},this._handleContainerScroll=()=>{this._backButtonVisible=0!==Math.floor(this._containerLeft),this._forwardButtonVisible=Math.round(this._containerBaseRight)!==Math.round(this.container?.scrollWidth??0)},this._handleBackButtonClick=t=>{t.preventDefault(),t.stopPropagation();const e=this._tabs,i=this._leftmostVisibleTab,a=e[i];if(null==a)return;let n=a.right-(this.container?.clientWidth??0);i!==e.length-1&&(n+=(this._fbwidth??0)-_.tabSpacing.raw),this.container?.scroll({behavior:"smooth",left:n})},this._handleForwardButtonClick=t=>{t.preventDefault(),t.stopPropagation();const e=this._tabs,i=this._rightmostVisibleTab,a=e[i];if(null==a)return;let n=a.left;0!==i&&(n-=(this._bbwidth??0)+_.tabSpacing.raw),this.container?.scroll({behavior:"smooth",left:n})},this._scrollToSelected=()=>{const t=this._tabs,e=t.findIndex((t=>"true"===t.el.getAttribute("aria-selected"))),i=t[e];if(null==i)return;const a=i.right-i.left,n=(this.container?.clientWidth??0)-(this._bbwidth+this._fbwidth),s=i.left-this._bbwidth-n/2+a/2;this.container?.scroll({behavior:"smooth",left:s})}}connectedCallback(){super.connectedCallback(),this._mutationObserver=new MutationObserver(this._mutationCallback),this._mutationObserver.observe(this,_.mutationObserverOptions)}disconnectedCallback(){super.disconnectedCallback(),this._mutationObserver.disconnect()}firstUpdated(t){super.firstUpdated(t),this._setupAll()}_setupAll(){this._setup&&this.container&&(this.container.removeEventListener("scroll",this._handleContainerScroll),this._resizeObserver?.unobserve(this.container)),this.container?.addEventListener("scroll",this._handleContainerScroll),this.container?.removeEventListener("resize",this._setupAll),this._setupButtons(),this._resizeObserver||(this._resizeObserver=new ResizeObserver(this._handleContainerScroll)),this.container&&this._resizeObserver?.observe(this.container),this._setup||(this.style.setProperty("--anim-duration","0ms"),this._handleContainerScroll(),requestAnimationFrame((()=>{this.style.removeProperty("--anim-duration")}))),this._setup=!0}_handleTabSelected(t){let e=this.selectedClasses;t.classList.contains("tab-bottom-border")&&t.hasAttribute("rpl")&&(e=e?.filter((t=>"bg-secondary-background-selected"!==t))),t.classList.add(...e??[]),t.tabIndex=0,this._scrollToSelected()}_handleTabDeselected(t){t.tabIndex=-1,t.classList.remove(...this.selectedClasses??[])}get _containerBaseWidth(){return this.container?.clientWidth??0}get _containerBaseLeft(){return this.container?.scrollLeft??0}get _containerLeft(){return 0===this._containerBaseLeft?this._containerBaseLeft:this._containerBaseLeft+(this.backButton?.clientWidth??0)+_.tabSpacing.raw}get _containerBaseRight(){return this._containerBaseLeft+this._containerBaseWidth}get _containerRight(){return this._containerBaseRight===this.container?.scrollWidth?this._containerBaseRight:this._containerBaseRight-((this.forwardButton?.clientWidth??0)+_.tabSpacing.raw)}get _rightmostVisibleTab(){const t=this._tabs;let e=0,i=0;for(let i=t.length-1;i>=0;i--)if(t[i]?.isVisible){e=i;break}if(0===e)for(let i=t.length-1;i>=0;i--)if(t[i]?.partiallyVisible){e=i;break}for(const[e,a]of t.entries()){const n=t[i];a.partiallyVisible&&n&&a.right>n.right&&(i=e)}return i<=e&&e<t.length-1?e+1:t[i]?.isVisible&&i!==t.length-1?i+1:i}get _leftmostVisibleTab(){const t=this._tabs;let e=t.length-1,i=t.length-1;for(let i=0;i<t.length;i++)if(t[i]?.isVisible){e=i;break}if(e===t.length-1)for(let i=0;i<t.length;i++)if(t[i]?.partiallyVisible){e=i;break}for(const[e,a]of t.entries()){const n=t[i];a.partiallyVisible&&n&&a.left<n.left&&(i=e)}return i>=e&&e>0?e-1:t[i]?.isVisible&&0!==i?i-1:i}get _tabs(){const{pageNames:t}=this,e=[];for(const i of c(this.pages)){const a=t?t[i-1]:`page-${i}`,n=this.shadowRoot.querySelector(`slot[name="${a}"]`).parentElement,s=n.offsetLeft,r=n.offsetLeft+n.offsetWidth,o=s>this._containerLeft&&s<this._containerRight||r<this._containerRight&&r>this._containerLeft,l=s>this._containerLeft&&r<this._containerRight||s<this._containerLeft&&r>this._containerRight;e.push({el:n,left:s,right:r,isVisible:l,partiallyVisible:o})}return e}render(){const t=super.render();return f`<div class="container"> ${t} <div class="${o({internalButton:!0,internalForwardButton:!0,hideable:!0,hidden:!this._forwardButtonVisible})}" @resize="${this._setupButtons}"> <slot name="forward-button" @slotchange="${this._setupButtons}"></slot> </div> <div class="${o({internalButton:!0,internalBackButton:!0,hideable:!0,hidden:!this._backButtonVisible})}" @resize="${this._setupButtons}"> <slot name="back-button" @slotchange="${this._setupButtons}"></slot> </div> </div>`}};g.mutationObserverOptions={childList:!0,subtree:!0,attributes:!0,attributeFilter:["faceplate-tab-selected"]},g.tabSpacing={raw:8},g.backButton=()=>t({appearance:"plain",attributes:{type:"button",tabindex:"-1",slot:"back-button"},shape:"pill",size:e.Small,leadingIcon:d({size:b.Small}),screenReaderContent:"back"}),g.forwardButton=()=>t({appearance:"plain",attributes:{type:"button",tabindex:"-1",slot:"forward-button"},shape:"pill",size:e.Small,leadingIcon:u({size:b.Small}),screenReaderContent:"forward"}),g.styles=p`:host{--plain-background:rgba(255, 255, 255, 0);--anim-duration:300ms;--button-gap:var(--spacer-xs, 8);display:flex;width:fit-content;max-width:100%}@media (prefers-color-scheme:dark){:host{--plain-background:rgba(0, 0, 0, 0)}}@media (prefers-reduced-motion){:host{--anim-duration:0ms}}.hideable{transition:opacity var(--anim-duration,300ms) ease;visibility:visible;opacity:1}.hidden{animation-name:hide-button;animation-duration:var(--anim-duration,300ms);animation-fill-mode:forwards;opacity:0}@keyframes hide-button{from{visiblity:visible}to{visiblity:hidden;z-index:-1}}.container{width:fit-content;max-width:100%;overflow:hidden;display:flex;justify-content:center;align-items:center;flex-direction:row;flex-wrap:nowrap;position:relative}.tablist{display:flex;overflow:auto;align-items:center;flex-flow:row nowrap;gap:var(--button-gap);scroll-behavior:smooth;scrollbar-width:none}.tablist::-webkit-scrollbar{display:none}.tablist:focus-visible{outline:0}[role=tab]{display:flex;flex-shrink:0}.internalButton{position:absolute;top:0;bottom:0;display:flex;align-items:center}.internalForwardButton{right:0;padding-left:var(--button-gap);background-image:linear-gradient(to right,var(--plain-background) 0,var(--color-neutral-background) 30%);cursor:pointer}.internalBackButton{left:0;padding-right:var(--button-gap);background-image:linear-gradient(to left,var(--plain-background) 0,var(--color-neutral-background) 30%);cursor:pointer}:host([inset]) .container{margin:0 var(--spacer-md)}:host([appearance=fill]){--button-gap:0;width:100%}:host([appearance=fill]) .container,:host([appearance=fill]) .tablist{width:inherit}:host([appearance=fill]) [role=tab]{flex-grow:1}:host([underline]) .container::after{position:absolute;display:block;content:'';border-bottom:solid var(--rem1) var(--color-neutral-border-weak);left:0;right:0;bottom:0}`,i([a(".internalForwardButton")],g.prototype,"forwardButton",void 0),i([a(".internalBackButton")],g.prototype,"backButton",void 0),i([a(".tablist")],g.prototype,"container",void 0),i([n({slot:"forward-button"})],g.prototype,"forwardButtonElements",void 0),i([n({slot:"back-button"})],g.prototype,"backButtonElements",void 0),i([s()],g.prototype,"_forwardButtonVisible",void 0),i([s()],g.prototype,"_backButtonVisible",void 0),i([r({attribute:!1})],g.prototype,"selectedClasses",void 0),i([r({attribute:!0})],g.prototype,"appearance",void 0),i([r({attribute:!0,type:Boolean})],g.prototype,"insetHug",void 0),i([r({attribute:!0,type:Boolean})],g.prototype,"underline",void 0),g=_=i([l("faceplate-tabgroup")],g);export{g as F};
