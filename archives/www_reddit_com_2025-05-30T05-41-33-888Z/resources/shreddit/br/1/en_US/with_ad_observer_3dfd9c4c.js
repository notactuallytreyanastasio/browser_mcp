import{W as e,_ as i,n as t,e as s,c as r,fZ as n,cJ as a,aX as o,e$ as l,f_ as h,f1 as d,f$ as u,g0 as m,g1 as c,cI as T,g2 as E,g3 as I,g4 as p,g5 as _,g6 as v,g7 as g,g8 as C,g9 as V,ga as f,f2 as x,gb as b,au as O,A as P,gc as w,bK as y,gd as L,b as M,D as S,bk as A,bl as D,cH as N,a as R,e9 as U,E as F,P as W,ge as k,aF as H,c1 as B,cK as Y,at as G,T as q,gf as K,gg as Q,gh as j,gi as z,gj as $,gk as J,gl as X}from"./shell-2264602c.js";import{s as Z,a as ee,x as ie}from"./icon-82dd10b4.js";import{V as te,a as se}from"./errors-8d0111b7.js";import{bE as re,bF as ne,bG as ae,bH as oe,bI as le}from"./age-gate-standalone-client-js-5357b0cf.js";import{P as he}from"./overflow-menu-actions-97fa1cfc.js";const de=e(Z);let ue=class extends de{constructor(){super(...arguments),this.id="undefined"}static get styles(){return ee`:host{display:block}`}connectedCallback(){super.connectedCallback(),this.enableObserver(this.config)}disconnectedCallback(){super.disconnectedCallback(),this.isObserved&&this.disableObserver()}observerIsIntersectingCallback(e){const i=r("io-event-is-intersecting",{id:this.id,details:e});this.dispatchEvent(i)}observerIsNotIntersectingCallback(e){const i=r("io-event-is-not-intersecting",{id:this.id,details:e});this.dispatchEvent(i)}render(){return ie`<slot></slot>`}};i([t({type:String})],ue.prototype,"id",void 0),i([t({type:Object})],ue.prototype,"config",void 0),ue=i([s("shreddit-with-observer-wrapper")],ue);const me=new Set(["t3_103b4tl","t3_u1cuyg","t3_103bmpv","t3_xipqoc","t3_xipsi3"]);class ce{constructor(e,i){this.isPixelFiringRefactorEnabled=!1,this.impressionTimestamp=0,this.wasEverViewableTimer={fired:!1},this.largeAdFullViewTimer={fired:!1},this.hasDispatchedViewEvent=!1,this.resetTimers=()=>{for(const e of this.pixelTimers.keys())this.clearPixelTimer(e);for(const e of this.continuousTimers.keys())this.unsetContinuousTimer(e);for(const e of this.cumulativeTimers.keys())this.pauseCumulativeTimer(e);this.wasEverViewableTimer.timer&&(clearTimeout(this.wasEverViewableTimer.timer),this.wasEverViewableTimer.timer=void 0),this.largeAdFullViewTimer.timer&&(clearTimeout(this.largeAdFullViewTimer.timer),this.largeAdFullViewTimer.timer=void 0)},this.adPubSub=i,this.getFiredRedditPixelsCount=e.getFiredRedditPixelsCount,this.isPixelFiringRefactorEnabled=e.postElement.isPixelFiringRefactorExperimentEnabled,this.postId=e.postId,this.impressionId=e.impressionId,this.postElement=e.postElement,this.galleryItems=e.galleryItems,n.updateEvents({postId:e.postId,impressionId:e.impressionId,events:e.events,galleryItems:e.galleryItems}),this.pixelTimers=new Map,this.cumulativeTimers=new Map,this.continuousTimers=new Map,this.setupUnloadFiring(),this.isProductAd=e.events.some((e=>e.type===a.PRODUCT_CLICK||e.type===a.PRODUCT_IMPRESSION))}setupUnloadFiring(){if(window.addEventListener(o.eventType,(()=>this.handleUnload())),me.has(this.postId)){const e=new URLSearchParams(l.search),i=Number.parseInt(e.get(h)||"");isNaN(i)||window.setTimeout((()=>this.fireUnloadPixel()),i)}}getCumulativeTimes(e){const i=this.updateCumulativeTimer(d.ANY_TOTAL_VIEW_TIME,e),t=this.updateCumulativeTimer(d.FIFTY_TOTAL_VIEW_TIME,e),s=this.updateCumulativeTimer(d.FULL_TOTAL_VIEW_TIME,e),r=this.updateCumulativeTimer(d.EIGHTY_TOTAL_VIEW_TIME,e);return{totalViewTime:i?.cumulativeTime||0,fiftyViewTime:t?.cumulativeTime||0,fullViewTime:s?.cumulativeTime||0,eightyViewTime:r?.cumulativeTime||0}}getContinuousTimes(e){const i=this.updateContinuousTimer(d.ANY_CONTINUOUS_VIEW_TIME,e),t=this.updateContinuousTimer(d.FIFTY_CONTINUOUS_VIEW_TIME,e),s=this.updateContinuousTimer(d.FULL_CONTINUOUS_VIEW_TIME,e),r=this.updateContinuousTimer(d.EIGHTY_CONTINUOUS_VIEW_TIME,e),n=this.updateContinuousTimer(d.THIRTY_CONTINUOUS_VIEW_TIME,e);return{maxAnyViewTime:i?.maxContinuousTime||0,maxFiftyViewTime:t?.maxContinuousTime||0,maxFullViewTime:s?.maxContinuousTime||0,maxEightyViewTime:r?.maxContinuousTime||0,maxThirtyViewTime:n?.maxContinuousTime||0}}getMetadata(e){const i=Date.now(),{totalViewTime:t,fiftyViewTime:s,fullViewTime:r,eightyViewTime:o}=this.getCumulativeTimes(i),{maxAnyViewTime:h,maxFiftyViewTime:m,maxFullViewTime:c,maxEightyViewTime:T,maxThirtyViewTime:E}=this.getContinuousTimes(i),I=this.pixelTimers.get(a.GROUP_M_VIEWABLE)?.fired||e===a.GROUP_M_VIEWABLE,p=e===a.VIEWABLE_IMPRESSION||this.wasEverViewableTimer.fired;e===a.IMPRESSION&&0===this.impressionTimestamp&&(this.impressionTimestamp=i);const _=this.postElement?.getBoundingClientRect(),v=Math.floor(_?.width??0),g=Math.floor(_?.height??0);let C;if(this.isPixelFiringRefactorEnabled)C=this.getFiredRedditPixelsCount?.()||0;else{const e=Object.keys(n.postPixels.get(this.postId)||{}),i=Object.keys(n.postPixels.get(this.impressionId)||{});C=Math.max(e.length,i.length)}const V=new URLSearchParams(l.search).get(u);return{[d.ANY_TOTAL_VIEW_TIME]:t,[d.FIFTY_TOTAL_VIEW_TIME]:s,[d.EIGHTY_TOTAL_VIEW_TIME]:o,[d.FULL_TOTAL_VIEW_TIME]:r,[d.ANY_CONTINUOUS_VIEW_TIME]:h,[d.FIFTY_CONTINUOUS_VIEW_TIME]:m,[d.THIRTY_CONTINUOUS_VIEW_TIME]:E,[d.EIGHTY_CONTINUOUS_VIEW_TIME]:T,[d.FULL_CONTINUOUS_VIEW_TIME]:c,[d.GLOBAL_COUNT]:C,[d.GROUP_M_VIEWABLE]:I?1:0,[d.AD_LOAD_TIME]:this.impressionTimestamp,[d.TIMESTAMP]:i,[d.WAS_EVER_VIEWABLE]:p?1:0,[d.LARGE_AD_FULL_VIEW]:this.largeAdFullViewTimer.fired?1:0,[d.HEIGHT]:g,[d.WIDTH]:v,[d.SCREEN_HEIGHT]:window.screen.height,[d.SCREEN_WIDTH]:window.screen.width,...null!==V&&{[d.TEST_ID]:V}}}getPixelScalingFields(e){return{encryptedTrackingPayload:this.postElement.encryptedTrackingPayload||"",additionalEventMetadata:this.postElement.additionalEventMetadata?this.postElement.additionalEventMetadata[e||0]:"",impressionId:this.impressionId}}firePixel(e,i){this.isPixelFiringRefactorEnabled?this.adPubSub.publish(m.FirePixel,{pixelEventType:e,metadata:this.getMetadata(e),galleryIndex:i}):n.firePixel({pixelEventType:e,postId:this.postId,impressionId:this.impressionId,metadata:this.getMetadata(e),pixelRequestBody:this.getPixelScalingFields(i),galleryIndex:i})}fireClickPixel(){this.firePixel(a.CLICK),this.isProductAd&&this.firePixel(a.PRODUCT_CLICK)}fireUnloadPixel(){this.firePixel(a.UNLOAD)}fireLeadGenerationPixel(){this.firePixel(a.LEAD_GENERATION)}measureViewChange(e){const i=this.postElement?.getBoundingClientRect(),t=Math.floor(i?.width??0),s=Math.floor(i?.height??0),o=s*t,l=o>=242500,h=s>document.documentElement.clientHeight;if(e.intersectionRatio){this.setCumulativeTimer(d.ANY_TOTAL_VIEW_TIME),this.setContinuousTimer(d.ANY_CONTINUOUS_VIEW_TIME),this.measureImpressionPixel(),this.galleryItems?.length?this.measureGalleryItemImpression():this.isProductAd&&this.measureProductImpression(),n.queuePostForUnload(this.postId,this.impressionId,this.isPixelFiringRefactorEnabled,this.getMetadata.bind(this),this.adPubSub.publish.bind(this),this.getPixelScalingFields.bind(this));const e=this.postElement,i=this.galleryItems;if(!this.hasDispatchedViewEvent&&e&&!e.isBlank){const t=r("observe-post-view-ad",{postId:this.postId,post:e,galleryItems:i||[]});this.postElement.dispatchEvent(t),this.hasDispatchedViewEvent=!0}}else this.unsetContinuousTimer(d.ANY_CONTINUOUS_VIEW_TIME),this.pauseCumulativeTimer(d.ANY_TOTAL_VIEW_TIME);if(e.intersectionRatio>=c.LARGE_AD_FULL_VIEW_THRESHOLD?this.setContinuousTimer(d.THIRTY_CONTINUOUS_VIEW_TIME):this.unsetContinuousTimer(d.THIRTY_CONTINUOUS_VIEW_TIME),e.intersectionRatio>=c.VIEWABILITY_THRESHOLD){this.setCumulativeTimer(d.FIFTY_TOTAL_VIEW_TIME),this.setContinuousTimer(d.FIFTY_CONTINUOUS_VIEW_TIME),this.pixelTimers.has(a.VIEWABLE_IMPRESSION)||this.setPixelTimer(a.VIEWABLE_IMPRESSION,1e3),this.wasEverViewableTimer.timer||this.wasEverViewableTimer.fired||(this.wasEverViewableTimer.timer=setTimeout((()=>{this.wasEverViewableTimer.timer&&(this.wasEverViewableTimer.fired=!0,this.wasEverViewableTimer.timer=void 0)}),1e3));const e=this.cumulativeTimers.get(d.FIFTY_TOTAL_VIEW_TIME);e&&(this.pixelTimers.has(a.VENDOR_FULLY_IN_VIEW_5_SECS)||this.setPixelTimer(a.VENDOR_FULLY_IN_VIEW_5_SECS,5e3-e.cumulativeTime),this.pixelTimers.has(a.VENDOR_FULLY_IN_VIEW_15_SECS)||this.setPixelTimer(a.VENDOR_FULLY_IN_VIEW_15_SECS,15e3-e.cumulativeTime))}else this.pixelTimers.has(a.VIEWABLE_IMPRESSION)&&this.clearPixelTimer(a.VIEWABLE_IMPRESSION),this.pixelTimers.has(a.VENDOR_FULLY_IN_VIEW_5_SECS)&&this.clearPixelTimer(a.VENDOR_FULLY_IN_VIEW_5_SECS),this.pixelTimers.has(a.VENDOR_FULLY_IN_VIEW_15_SECS)&&this.clearPixelTimer(a.VENDOR_FULLY_IN_VIEW_15_SECS),this.pauseCumulativeTimer(d.FIFTY_TOTAL_VIEW_TIME),this.unsetContinuousTimer(d.FIFTY_CONTINUOUS_VIEW_TIME);e.intersectionRatio>=c.EIGHTY_VIEWABILITY_THRESHOLD?(this.setCumulativeTimer(d.EIGHTY_TOTAL_VIEW_TIME),this.setContinuousTimer(d.EIGHTY_CONTINUOUS_VIEW_TIME)):(this.pauseCumulativeTimer(d.EIGHTY_TOTAL_VIEW_TIME),this.unsetContinuousTimer(d.EIGHTY_CONTINUOUS_VIEW_TIME)),e.intersectionRatio>=c.FULL_VIEWABILITY_THRESHOLD?(this.setCumulativeTimer(d.FULL_TOTAL_VIEW_TIME),this.setContinuousTimer(d.FULL_CONTINUOUS_VIEW_TIME)):(this.pauseCumulativeTimer(d.FULL_TOTAL_VIEW_TIME),this.unsetContinuousTimer(d.FULL_CONTINUOUS_VIEW_TIME)),e.intersectionRatio<c.VIEWABILITY_THRESHOLD&&this.wasEverViewableTimer.timer&&(clearTimeout(this.wasEverViewableTimer.timer),this.wasEverViewableTimer.timer=void 0);l&&e.intersectionRatio>=c.LARGE_AD_FULL_VIEW_THRESHOLD||e.intersectionRatio>=c.FULL_VIEWABILITY_THRESHOLD?this.largeAdFullViewTimer.timer||this.largeAdFullViewTimer.fired||(this.largeAdFullViewTimer.timer=setTimeout((()=>{this.largeAdFullViewTimer.timer&&(this.largeAdFullViewTimer.fired=!0,this.largeAdFullViewTimer.timer=void 0)}),1e3)):this.largeAdFullViewTimer.timer&&(clearTimeout(this.largeAdFullViewTimer.timer),this.largeAdFullViewTimer.timer=void 0),h?1!==e.intersectionRatio||this.pixelTimers.has(a.GROUP_M_VIEWABLE)?o*e.intersectionRatio<1&&this.pixelTimers.has(a.GROUP_M_VIEWABLE)&&this.clearPixelTimer(a.GROUP_M_VIEWABLE):this.setPixelTimer(a.GROUP_M_VIEWABLE,1e3):e.intersectionRatio>=c.FULL_VIEWABILITY_THRESHOLD?(this.pixelTimers.has(a.GROUP_M_VIEWABLE)||this.setPixelTimer(a.GROUP_M_VIEWABLE,1e3),this.pixelTimers.has(a.VENDOR_FULLY_IN_VIEW)||this.setPixelTimer(a.VENDOR_FULLY_IN_VIEW,100)):(this.pixelTimers.has(a.GROUP_M_VIEWABLE)&&this.clearPixelTimer(a.GROUP_M_VIEWABLE),this.pixelTimers.has(a.VENDOR_FULLY_IN_VIEW)&&this.clearPixelTimer(a.VENDOR_FULLY_IN_VIEW))}clearPixelTimer(e){const i=this.pixelTimers.get(e);i?.timer&&(clearTimeout(i.timer),this.pixelTimers.delete(e))}setPixelTimer(e,i){const t=this.pixelTimers.get(e)?.fired;t||(this.pixelTimers.get(e)?.timer&&this.clearPixelTimer(e),this.pixelTimers.set(e,{timer:setTimeout((()=>{this.pixelTimers.get(e)&&(this.firePixel(e),this.pixelTimers.set(e,{fired:!0,timer:void 0}))}),i)}))}measureUpvote(){this.firePixel(a.UPVOTE)}measureDownvote(){this.firePixel(a.DOWNVOTE)}measureAdReminderRsvp(){this.firePixel(a.ENGAGED_CLICK)}handleClickRedirect(e,i){const t=this.getMetadata(a.CLICK);this.isPixelFiringRefactorEnabled?this.adPubSub.publish(m.FireDebugPixel,{pixel:T(e,t),pixelEvent:{url:e,type:a.CLICK,metadata:t},impressionId:this.impressionId,postId:this.postId}):n.fireDebugPixel({pixel:T(e,t),pixelEvent:{url:e,type:a.CLICK,metadata:t},impressionId:this.impressionId,postId:this.postId}),this.isProductAd&&this.firePixel(a.PRODUCT_CLICK,i)}measureImpressionPixel(){this.firePixel(a.IMPRESSION)}measureGalleryItemImpression(e=0){this.firePixel(a.GALLERY_ITEM_IMPRESSION,e),this.isProductAd&&this.firePixel(a.PRODUCT_IMPRESSION,e)}measureProductImpression(){this.firePixel(a.PRODUCT_IMPRESSION)}measureCommentsView(){this.firePixel(a.COMMENTS_VIEW)}measureCommentSubmitted(){this.firePixel(a.COMMENT)}measureCommentUpvote(){this.firePixel(a.COMMENT_UPVOTE)}measureCommentDownvote(){this.firePixel(a.COMMENT_DOWNVOTE)}handleUnload(){n.fireQueuedUnloadPixels()}setCumulativeTimer(e){const i=this.cumulativeTimers.get(e),t=Date.now();if(i&&i.previousDate){const s=t-i.previousDate+i.cumulativeTime;this.cumulativeTimers.set(e,{previousDate:t,cumulativeTime:s})}else this.cumulativeTimers.set(e,{previousDate:t,cumulativeTime:i?.cumulativeTime||0})}updateCumulativeTimer(e,i){const t=this.cumulativeTimers.get(e);if(t&&t.previousDate){const s=i-t.previousDate+(t.cumulativeTime||0);this.cumulativeTimers.set(e,{previousDate:i,cumulativeTime:s})}return this.cumulativeTimers.get(e)}pauseCumulativeTimer(e){const i=this.updateCumulativeTimer(e,Date.now());i&&this.cumulativeTimers.set(e,{previousDate:null,cumulativeTime:i.cumulativeTime||0})}setContinuousTimer(e){const i=this.continuousTimers.get(e),t=Date.now();if(i&&i.previousDate){const s=i.currentContinuousTime+(t-i.previousDate),r=Math.max(s,i.maxContinuousTime);this.continuousTimers.set(e,{previousDate:t,currentContinuousTime:s,maxContinuousTime:r})}else this.continuousTimers.set(e,{previousDate:t,currentContinuousTime:i?.currentContinuousTime||0,maxContinuousTime:i?.maxContinuousTime||0})}updateContinuousTimer(e,i){const t=this.continuousTimers.get(e);if(t&&t.previousDate){const s=t.currentContinuousTime+(i-t.previousDate),r=Math.max(s,t.maxContinuousTime);this.continuousTimers.set(e,{previousDate:i,currentContinuousTime:s,maxContinuousTime:r})}return this.continuousTimers.get(e)}unsetContinuousTimer(e){const i=this.continuousTimers.get(e),t=Date.now();if(i&&i.previousDate){const s=Math.max(i.currentContinuousTime+(t-i.previousDate),i.maxContinuousTime);this.continuousTimers.set(e,{previousDate:null,currentContinuousTime:0,maxContinuousTime:s})}}}function Te(e=0){return 1e3*e}class Ee extends ce{get visible(){return!!this.videoIntersectionRatio}get viewable(){return(this.videoIntersectionRatio||0)>=c.VIEWABILITY_THRESHOLD}get currentQuartileState(){switch((this.viewable?1:0)+(this.videoVolume&&this.videoVolume>0?2:0)){case 0:return E.NOT_VISIBLE_NOT_AUDIBLE;case 1:return E.VISIBLE_NOT_AUDIBLE;case 2:return E.AUDIBLE_NOT_VISIBLE;case 3:return E.VISIBLE_AND_AUDIBLE;default:return E.NO_EVENT}}constructor(e,i){super(e,i),this.videoDuration=1/0,this.videoCurrentTime=0,this.seekingInitialized=!1,this.hasSeeked=!1,this.accumulatedWatchedTime=0,this.videoWasFullscreen=!1,this.videoWasVisible=!1,this.quartileState=new Map,this.dimensions=e.dimensions,this.thresholds=I(b)}minTimeRequired({timePercent:e=1/0,time:i=1/0}){const t=Number.isFinite(e)?e*this.videoDuration:1/0,s=Number.isFinite(i)?i:1/0;return Math.min(t,s)}setViewablePixelTimer(e){const i=Date.now(),t=this.pixelTimers.get(e.pixelEvent);if(t?.fired||t?.timer)return;let s=e.time;e.timePercent&&this.videoDuration&&(s=Math.min(this.videoDuration*e.timePercent,e.time));const r=t?.timeLeft?t?.timeLeft:s;this.pixelTimers.set(e.pixelEvent,{timer:setTimeout((()=>{this.firePixel(e.pixelEvent),this.pixelTimers.set(e.pixelEvent,{fired:!0,timer:void 0})}),r),timeLeft:r,lastSetTime:i})}resetViewablePixelTimer(e){const i=this.pixelTimers.get(e.pixelEvent);i?.fired||i&&!i.fired&&this.clearPixelTimer(e.pixelEvent)}pauseViewablePixelTimer(e){const i=this.pixelTimers.get(e.pixelEvent);if(i&&!i?.fired&&void 0!==this.videoCurrentTime&&void 0!==this.videoDuration){const t=Date.now();if(i.timer&&i.lastSetTime){const s=e.time-(t-i.lastSetTime);clearTimeout(i.timer),this.pixelTimers.set(e.pixelEvent,{timeLeft:s})}}}videoStateChange(){this.visible&&!this.videoWasVisible&&(this.videoWasVisible=!0),this.videoPlaying&&(this.updateQuartileState(),this.firePixel(a.VIDEO_STARTED),this.videoVolume&&this.firePixel(a.VIDEO_PLAYED_WITH_SOUND),p.forEach((e=>{this.videoViewabilityStateChange(e)}))),_.forEach((e=>{this.videoWatchedPercentStateChange(e)})),v.forEach((e=>{this.videoWatchedSecondsStateChange(e)})),this.videoGroupMViewableChange()}videoViewabilityStateChange(e){this.videoIntersectionRatio&&this.videoIntersectionRatio>=e.threshold?this.videoPlaying?this.setViewablePixelTimer(e):this.pauseViewablePixelTimer(e):this.resetViewablePixelTimer({pixelEvent:e.pixelEvent,time:e.time})}videoWatchedPercentStateChange(e){if("number"==typeof this.videoCurrentTime&&"number"==typeof this.videoDuration){this.videoCurrentTime/this.videoDuration>=e.timePercent&&(e.quartileKey&&!this.quartileState.has(e.quartileKey)&&(e.quartileKey!==g.VIDEO_STATE_Q0||this.videoPlaying)&&this.quartileState.set(e.quartileKey,this.currentQuartileState),C(e)&&this.firePixel(e.pixelEvent))}}updateQuartileState(){_.forEach((e=>{if(e.quartileKey&&"number"==typeof this.videoCurrentTime&&"number"==typeof this.videoDuration){this.videoCurrentTime/this.videoDuration>=e.timePercent&&e.quartileKey&&!this.quartileState.has(e.quartileKey)&&this.quartileState.set(e.quartileKey,this.currentQuartileState)}}))}videoWatchedSecondsStateChange(e){this.accumulatedWatchedTime>=this.minTimeRequired(e)&&this.firePixel(e.pixelEvent)}setMediaDetails(e){Number.isFinite(e.volume)&&(this.videoVolume=e.muted?0:e.volume),Number.isFinite(e.duration)&&(this.videoDuration=Te(e.duration)),Number.isFinite(e.currentTime)&&(this.videoCurrentTime=Te(e.currentTime))}updateAccumulatedWatchTime(e){const i=e-this.videoCurrentTime;return this.accumulatedWatchedTime+=i,i}updateThresholds(e){const{visibleThresholds:i}=this.getHiddenAndVisibleThresholds();i.forEach((i=>{this.thresholds[i.key].totalTime+=e,this.thresholds[i.key].currentContinuousTime+=e;const{currentContinuousTime:t,maxContinuousTime:s}=this.thresholds[i.key];t>s&&(this.thresholds[i.key].maxContinuousTime=t)})),this.resetContinuousTimerForHiddenThresholds()}getHiddenAndVisibleThresholds(){const e=[],i=[];return V.forEach((t=>{this.meetsViewabilityRequirements(t)?e.push(t):i.push(t)})),{visibleThresholds:e,hiddenThresholds:i}}resetContinuousTimerForHiddenThresholds(){this.resetContinuousTimerForThresholds(this.getHiddenAndVisibleThresholds().hiddenThresholds)}resetContinuousTimerForThresholds(e){e.forEach((e=>{this.thresholds[e.key].currentContinuousTime=0}))}measureViewChange(e){(e.id===f.IN_FEED_AD_VIDEO||e.id===f.COMMENT_PAGE_AD_VIDEO)&&(this.videoIntersectionRatio=e.intersectionRatio),super.measureViewChange(e),this.videoStateChange(),this.resetContinuousTimerForHiddenThresholds()}measureVideoPlay(e){this.videoPlaying=!0,this.setMediaDetails(e),this.videoStateChange()}measureVideoPause(e){this.videoPlaying=!1,this.setMediaDetails(e),this.videoStateChange(),p.forEach((e=>{this.pauseViewablePixelTimer(e)}))}measureVideoSeek(e){this.hasSeeked=!0,this.seekingInitialized||(this.videoPlaying=!1,this.setMediaDetails(e),p.forEach((e=>{this.resetViewablePixelTimer({pixelEvent:e.pixelEvent,time:e.time})})),this.seekingInitialized=!0)}measureVideoSeeked(e){this.seekingInitialized=!1,this.hasSeeked=!0,this.videoCurrentTime=Te(e.currentTime),e.paused||this.measureVideoPlay(e)}measureVolumeChange(e){this.setMediaDetails(e),this.videoStateChange(),e.volume&&!e.muted&&this.videoPlaying&&p.forEach((e=>{this.firePixel(e.pixelEvent),this.pixelTimers.set(e.pixelEvent,{fired:!0})}))}measureFullscreenChange(e){this.videoFullscreen=e.fullscreen,this.videoStateChange(),e.fullscreen&&(this.videoWasFullscreen=!0,this.firePixel(a.VIDEO_PLAYED_EXPANDED),this.videoPlaying&&p.forEach((e=>{this.firePixel(e.pixelEvent),this.pixelTimers.set(e.pixelEvent,{fired:!0})})))}measureVideoTimeUpdate(e){const i=this.updateAccumulatedWatchTime(Te(e.currentTime));this.updateThresholds(i),this.videoCurrentTime=Te(e.currentTime),this.videoStateChange()}getMetadata(e){const i=super.getMetadata(e),t=this.thresholds.HALF_DURATION_80_IN_VIEW_AUDIBLE.totalTime;return{...i,[x.IS_VIDEO_AD]:1,[x.TOTAL_MRC_VIEWABLE_TIME]:Math.floor(this.thresholds.TOTAL_MRC_VIEWABLE_TIME.totalTime),[x.VIDEO_AD_DURATION]:isFinite(this.videoDuration)?Math.floor(this.videoDuration):0,[x.TOTAL_PLAY_TIME]:Math.floor(this.accumulatedWatchedTime),[x.VOLUME]:Math.floor(100*(this.videoVolume??0)),[x.IS_VISIBLE]:this.visible?1:0,[x.VIDEO_HEIGHT]:this.visible&&this.dimensions?this.dimensions.height:0,[x.TOTAL_AUDIBLE_TIME]:Math.floor(this.thresholds.TOTAL_AUDIBLE_TIME.totalTime),[x.VIDEO_STATE_Q0]:this.quartileState.get(g.VIDEO_STATE_Q0)??E.NO_EVENT,[x.VIDEO_STATE_Q1]:this.quartileState.get(g.VIDEO_STATE_Q1)??E.NO_EVENT,[x.VIDEO_STATE_Q2]:this.quartileState.get(g.VIDEO_STATE_Q2)??E.NO_EVENT,[x.VIDEO_STATE_Q3]:this.quartileState.get(g.VIDEO_STATE_Q3)??E.NO_EVENT,[x.VIDEO_STATE_Q4]:this.quartileState.get(g.VIDEO_STATE_Q4)??E.NO_EVENT,[x.VIDEO_WIDTH]:this.visible&&this.dimensions?this.dimensions.width:0,[x.WAS_FULL_SCREEN]:this.videoWasFullscreen?1:0,[x.HALF_DURATION_80_IN_VIEW_AUDIBLE]:t>=15e3||this.videoDuration&&t>=.5*this.videoDuration?1:0,[x.FULL_IN_VIEW_AUDIBLE_TIME]:Math.floor(this.thresholds.FULL_IN_VIEW_AUDIBLE_TIME.totalTime),[x.EIGHTY_TOTAL_VIDEO_VIEW_TIME]:Math.floor(this.thresholds.EIGHTY_IN_VIEW_TIME.totalTime),[x.FULL_IN_VIEW_TIME]:Math.floor(this.thresholds.FULL_IN_VIEW_TIME.totalTime),[x.WAS_FULL_IN_VIEW_1SEC]:this.thresholds.FULL_IN_VIEW_TIME.maxContinuousTime>=1e3?1:0,[x.ANY_CONTINUOUS_VIDEO_VIEW_TIME]:Math.floor(this.thresholds.ANY_IN_VIEW_TIME.maxContinuousTime),[x.FIFTY_CONTINUOUS_VIDEO_VIEW_TIME]:Math.floor(this.thresholds.FIFTY_IN_VIEW_TIME.maxContinuousTime),[x.FULL_CONTINUOUS_VIDEO_VIEW_TIME]:Math.floor(this.thresholds.FULL_IN_VIEW_TIME.maxContinuousTime),[x.HAS_SEEKED]:this.hasSeeked?1:0}}isAdequatelyInView(e){return!!this.videoFullscreen||(this.videoIntersectionRatio||0)>=e}meetsViewabilityRequirements(e){return this.isAdequatelyInView(e.threshold)&&(!e.playing||this.videoPlaying)&&(!e.withSound||this.videoVolume&&this.videoVolume>0)}videoGroupMViewableChange(){const e=this.dimensions?.height*this.dimensions?.width;let i=this.thresholds.FULL_IN_VIEW_AUDIBLE_TIME.totalTime;e>=3e5&&(i=this.thresholds.HALF_DURATION_80_IN_VIEW_AUDIBLE.totalTime),i/this.videoDuration>=c.VIEWABILITY_THRESHOLD&&this.firePixel(a.VIDEO_GROUP_M_VIEWABLE)}}const Ie=(e,{ignoredTags:i=new Set}={})=>{const t=(e=>{const i=window.getComputedStyle(e).borderRadius,t=Number.parseInt(i)/2,s=e.getBoundingClientRect();return document.elementFromPoint(s.left+t,s.top+t)})(e);return{overlappingElement:t,isOverlapped:!(!t||e.isSameNode(t)||e.contains(t)||i.has(t.tagName)||!((e,i)=>{const t=e.getBoundingClientRect(),s=i.getBoundingClientRect();return!(t.top>s.bottom||t.right<s.left||t.bottom<s.top||t.left>s.right)})(e,t))}},pe=(e,i)=>{if((e=>{const i=e.getBoundingClientRect();if(i.width*i.height==0)return!0;const t=window.innerWidth||document.documentElement.clientWidth,s=window.innerHeight||document.documentElement.clientHeight;return i.right<0||i.bottom<0||i.left>t||i.top>s})(e))return 0;const t=e.getBoundingClientRect(),s=i.getBoundingClientRect(),r=window.innerHeight||document.documentElement.clientHeight,n=Math.min(r,t.bottom);return Math.max(0,n-s.bottom)/t.height},_e="observe-gallery-item-impression",ve=(e,i)=>{if(!e||!e.title)return 0;if(!1===e.renderTitleTruncation)return e.title.length;const t=e?.querySelector('[click-location="title"]')?.shadowRoot?.querySelector("a"),s=document.body,r=document.createElement("div");if(r.id="dummyDiv",r.className=t?.className,r.className=r.className.replace(/line-clamp-\d+/,""),r.classList.add("px-md"),i||(r.classList.add("font-normal"),r.classList.add("text-14")),r.style.position="absolute",r.style.left="-9999px",r.style.top="-9999px",r.style.visibility="hidden",s?.appendChild(r),r.style.width=t?.clientWidth+"px",r.textContent=e.title,r.offsetHeight<=t?.offsetHeight)return r?.remove(),e.title.length;let n=0;r.textContent="…";for(let i=0;i<e.title.length;i++){const s=e.title?.slice(0,i+1);if(r.textContent=s+"…",r.offsetHeight>t?.offsetHeight)break;n+=1}return r?.remove(),n},ge=({postId:e,post:i,galleryItems:t,page_request_id:s,adsCorrelationId:r})=>{const n=i?.querySelector(`[click-location=${P.MEDIA}]`);let a;n&&(a=n.getBoundingClientRect());const o={post:{id:e,subreddit_id:i?.subredditId,subreddit_name:i?.subredditPrefixedName,author_id:i?.authorId,promoted:!0,title:i?.postTitle||i?.title,domain:i?.domain,nsfw:i?.nsfw,number_comments:i?.commentCount,type:i?.postType,created_timestamp:w(i?.createdTimestamp||""),spoiler:i?.spoiler,url:i?.outboundLinkUrl},ad_metadata:{impression_id:i?.impressionId||"",placement:re({post:i}),ad_correlation_id:r},feed:y(),action_info:{page_request_id:s},screen:{height:window.screen.height,width:window.screen.width}};i&&ne(i)&&(o.action_info||(o.action_info={}),o.action_info.position=i.feedIndex,o.screen||(o.screen={}),o.screen={},o.screen.view_type=L(i.viewType));const l=t&&t.length>0||!1;if(i&&ae(i)&&(o.view_stats={characters_displayed:ve(i,l)},o.parent={post_id:i?.parentElement?.querySelector("shreddit-post")?.id},o.action_info||(o.action_info={}),o.action_info.position=(e=>{if(e.shouldTrackPosition&&!e.isBlank)return e.placement===O.COMMENTS_PAGE?0:[...document.querySelectorAll('shreddit-comments-page-ad[placement="comments_page"], shreddit-comments-page-ad[placement="comment_trees"], shreddit-comment[depth="0"]')].findIndex((i=>i.id===e.id))||void 0})(i)),t&&t.length>0){const e=t.map((e=>e.media?.id||""));o.gallery={num_items:t.length,media_ids:e,id:t[0].id},o.media={id:t[0].media?t[0].media.id:"",width:t[0].media?t[0].media.width:0,height:t[0].media?t[0].media.height:0}}else a&&(o.media={id:e,height:Math.round(a?.height),width:Math.round(a?.width)});return M(oe,o)},Ce=e=>e.map((e=>{const i=a[e.type];return{...e,type:i}}));function Ve(e){const i=new Map;return e.forEach((e=>{const t=i.get(e.type)||[];t.push(e),i.set(e.type,t)})),i}function fe(e){return!!e.encryptedTrackingId}function xe(e,i){return e.encryptedTrackingId+i.additionalEventMetadata}function be({pixelEvent:e,pixelRequestBody:i,metadata:t}){if(!e.encryptedTrackingId)return;const s=t?function(e){return Object.entries(e).reduce(((e,[i,t])=>(e[i]=t.toString(),e)),{})}(t):{};return fetch("https://alb.reddit.com/track",{method:"POST",mode:"no-cors",body:JSON.stringify({encryptedTrackingId:e.encryptedTrackingId,encryptedTrackingPayload:i.encryptedTrackingPayload,additionalEventMetadata:i.additionalEventMetadata,clientImpressionID:i.impressionId,...s})}).then((i=>{if(!i.ok){const i="Sentry"in window?window.Sentry:void 0;i?.captureException&&i.captureException(new Error(`Error in POST response from pixel server for pixel of type ${e.type}`))}})),xe(e,i)}class Oe{constructor(e,i){this.firedPixels=new Set,this.firedRedditPixels=new Set,this.firePixel=({pixelEventType:e,metadata:i,galleryIndex:t})=>{const s=this.postEvents?.get(e)||[];if(this.host.galleryItems){const i=this.getGalleryUrls(e,t)||[];s.push(...i)}const r=this.getPixelScalingFields(t);return this.firePixelsFromEvents({pixelEvents:s,metadata:i,pixelRequestBody:r})},this.fireDebugPixel=e=>{const i=r("pixelFired",e);window.dispatchEvent(i)},this.firePixelsFromEvents=({pixelEvents:e,metadata:i,pixelRequestBody:t})=>{const s=[];return e.forEach((e=>{const r=this.firePixelRequest({pixelEvent:e,metadata:i,pixelRequestBody:t});r&&s.push(r)})),s},this.firePixelRequest=({pixelEvent:e,metadata:i,pixelRequestBody:t})=>{if(this.hasPixelAlreadyFired(e,t))return;let s;if(fe(e)){if(!t)return;s=be({pixelEvent:e,metadata:i,pixelRequestBody:t})}else s=function(e,i){const t=!N(e.url),s=new Image;let r=e.url;return i&&!t&&(r=T(r,i)),s.src=r,e.url}(e,i),N(e.url)||e.type!==a.IMPRESSION||function(e){const i=e===S.DESKTOP?"shreddit_desktop":"shreddit_mobile";A({type:D.Counter,name:"ads_third_party_impression_tracker_total",value:1,labels:{client_platform:i}})}(this.deviceType);return s&&(this.firedPixels.add(s),(fe(e)||N(s))&&this.firedRedditPixels.add(s)),fe(e)?this.fireDebugPixel({pixel:xe(e,t),pixelEvent:{encryptedTrackingId:e.encryptedTrackingId,type:e.type,metadata:i},encryptedTrackingPayload:t?.encryptedTrackingPayload,additionalEventMetadata:t?.additionalEventMetadata,postId:this.host.postId,impressionId:this.host.impressionId}):this.fireDebugPixel({pixel:e.url,pixelEvent:{url:e.url,type:e.type,metadata:N(e.url)?i:void 0},postId:this.host.postId,impressionId:this.host.impressionId}),s},this.hasPixelAlreadyFired=(e,i)=>fe(e)?!!i&&this.firedPixels.has(xe(e,i)):this.firedPixels.has(e.url),this.pubSub=i,this.deviceType=document.querySelector("shreddit-app")?.deviceType||S.MOBILE,this.host=e,this.host.addController(this)}hostConnected(){const e=Ce(this.host.adEvents);this.postEvents=Ve(e),this.host.galleryItems&&(this.galleryEvents=this.host.galleryItems.map((e=>Ve(Ce(e.adEvents))))),this.pubSub.subscribe(m.FirePixel,(e=>this.firePixel(e))),this.pubSub.subscribe(m.FireDebugPixel,(e=>this.fireDebugPixel(e)))}get firedRedditPixelsCount(){return this.firedRedditPixels.size}getPixelScalingFields(e){return{encryptedTrackingPayload:this.host.encryptedTrackingPayload||"",additionalEventMetadata:this.host.additionalEventMetadata?this.host.additionalEventMetadata[e||0]:"",impressionId:this.host.impressionId}}getGalleryUrls(e,i){const t=void 0===i&&e===a.IMPRESSION,s=t?0:i;if(void 0===s)return;const r=t?a.GALLERY_ITEM_IMPRESSION:e;return this.galleryEvents?.[s]&&this.galleryEvents[s].get(r)||[]}}const Pe=Symbol("mixins/with-ad-observer"),we=new Set(["SHREDDIT-APP","FACEPLATE-PARTIAL"]);function ye(e){const i=R(e);if(U(i,Pe))return i;class t extends i{constructor(){super(...arguments),this.eventController=new F(this),this.pubsub=new W(this),this.adPubSub=new k,this.isPixelFiringRefactorEnabled=!1,this.isOverlapped=!1,this.isVideo=!1,this.isGallery=!1,this.visibilityChangeHandler=this.onVisibilityChange.bind(this),this.isAdObserved=!1,this.onCommentCreated=()=>{this.adMeasurer?.measureCommentSubmitted()},this.onCommentUpvoted=()=>{this.adMeasurer?.measureCommentUpvote()},this.onCommentDownvoted=()=>{this.adMeasurer?.measureCommentDownvote()},this.onHideAd=({impressionId:e,action:i})=>{this.impressionId===e&&i===he.hide&&this.adMeasurer?.resetTimers()},this.checkAndMeasureIfAdIsBeingOverlapped=H((()=>{if(!this.postElement||!this.postElement.isConnected)return;const{hidden:e}=this.getHiddenAndVisibilityChangeForDocument();if(document[e])return void this.measureOutOfViewChange();const{isOverlapped:i,overlappingElement:t}=Ie(this.postElement,{ignoredTags:we});if(i&&t){this.isOverlapped=!0;const e={intersectionRatio:pe(this.postElement,t)};this.adMeasurer?.measureViewChange(e),this.lastIOEvent=e}else this.isOverlapped&&(this.isOverlapped=!1,this.measureBackInViewChange())}),30),this.handleIntersectingEvent=this.eventController.define("io-event-is-intersecting",(e=>{this.isIntersectingChange(e)})),this.handleNotIntersectingEvent=this.eventController.define("io-event-is-not-intersecting",(e=>{this.isIntersectingChange(e)})),this.updateViewChangeDetails=e=>{this.lastIOEvent=e,e.intersectionRatio>0&&(this.lastVisibleIOEvent=e)},this.measureOutOfViewChange=()=>{const e={intersectionRatio:0};this.adMeasurer?.measureViewChange(e),this.updateViewChangeDetails(e)},this.measureBackInViewChange=()=>{this.lastVisibleIOEvent&&(this.adMeasurer?.measureViewChange({...this.lastVisibleIOEvent}),this.updateViewChangeDetails(this.lastVisibleIOEvent))},this.handleAnalyticEvent=this.eventController.define("track-event",(e=>{const i=e.detail.details;if(i.post?.id!==this.postId)return;const{source:t,action:s,noun:r}=i;if("gallery"===t&&this.isGallery){if("forward"!==r&&"backward"!==r)return;const e="forward"===r?this.galleryIndex+1:this.galleryIndex-1;if(e<0||e>=this.galleryItemLength)return;this.galleryIndex=e,this.adMeasurer?.measureGalleryItemImpression(this.galleryIndex),this.lastIOEvent&&this.adMeasurer?.measureViewChange(this.lastIOEvent)}if("post_detail"===t&&"click"===s)switch(r){case"upvote_comment":this.isPixelFiringRefactorEnabled?this.firePixel(a.COMMENT_UPVOTE):this.adMeasurer?.measureCommentUpvote();break;case"downvote_comment":this.isPixelFiringRefactorEnabled?this.firePixel(a.COMMENT_DOWNVOTE):this.adMeasurer?.measureCommentDownvote();break;case"submit_comment":this.isPixelFiringRefactorEnabled?this.firePixel(a.COMMENT):this.adMeasurer?.measureCommentSubmitted()}if("post"===t&&"click"===s)switch(r){case"comments":this.isPixelFiringRefactorEnabled?this.firePixel(a.COMMENTS_VIEW):this.adMeasurer?.measureCommentsView();break;case"upvote":this.isPixelFiringRefactorEnabled?this.firePixel(a.UPVOTE):this.adMeasurer?.measureUpvote();break;case"downvote":this.isPixelFiringRefactorEnabled?this.firePixel(a.DOWNVOTE):this.adMeasurer?.measureDownvote()}"event_post"===t&&"click"===s&&"rsvp"===r&&(this.isPixelFiringRefactorEnabled?this.firePixel(a.ENGAGED_CLICK):this.adMeasurer?.measureAdReminderRsvp())})),this.handlePostViewAdEvent=this.eventController.define("observe-post-view-ad",(e=>{const i=e.detail.post,{postId:t,galleryItems:s}=e.detail,r=B();this.trackEvent(ge({postId:t,post:i,galleryItems:s,page_request_id:r,adsCorrelationId:i.adsCorrelationId}))})),this.handleAdClickEvent=this.eventController.define("observe-ad-click",(e=>{const{postId:i,impressionId:t,outboundUrl:s,galleryIndex:r}=e.detail;if(i!==this.postId&&t!==this.impressionId)return;Y(s)&&this.adMeasurer?.handleClickRedirect(s,r);const n=r??this.galleryIndex;this.isPixelFiringRefactorEnabled?this.firePixel(a.CLICK,n):this.adMeasurer?.firePixel(a.CLICK,n)})),this.handleLeadGenSubmissionEvent=this.eventController.define(le,(e=>{this.isPixelFiringRefactorEnabled?this.firePixel(a.LEAD_GENERATION):this.adMeasurer?.fireLeadGenerationPixel()}))}getMetadataForPixelEvent(e){return this.adMeasurer?.getMetadata(e)}enableAdObserver(e){if(this.isAdObserved)return;const{adType:i,...t}=e;this.postId=e.postId,this.impressionId=e.impressionId,this.postElement=e.postElement,this.isVideo=i===G.VIDEO,Array.isArray(e.galleryItems)&&(this.isGallery=!0,this.galleryIndex=0,this.galleryItemLength=e.galleryItems.length),this.overlappingObserver=new MutationObserver(this.checkAndMeasureIfAdIsBeingOverlapped),this.isPixelFiringRefactorEnabled=e.postElement.isPixelFiringRefactorExperimentEnabled,this.pixelFiringController=new Oe(e.postElement,this.adPubSub),t.getFiredRedditPixelsCount=()=>this.pixelFiringController?.firedRedditPixelsCount||0,this.adMeasurer=this.isVideo?new Ee(t,this.adPubSub):new ce(t,this.adPubSub),this.isVideo&&this.setupVideoEvents(),this.isGallery&&this.setupGalleryEvents(),this.isAdObserved=!0}connectedCallback(){super.connectedCallback(),this.setupVisibilityTracking(),this.pubsub.subscribe(q.AdUpdated,this.onHideAd),this.postElement&&this.postElement.isPDP&&(this.pubsub.subscribe(q.CommentCreated,this.onCommentCreated),this.pubsub.subscribe(q.CommentUpvoted,this.onCommentUpvoted),this.pubsub.subscribe(q.CommentDownvoted,this.onCommentDownvoted))}disconnectedCallback(){super.disconnectedCallback(),this.teardownVisibilityTracking(),this.pubsub.unsubscribe(q.AdUpdated,this.onHideAd),this.postElement&&this.postElement.isPDP&&(this.pubsub.unsubscribe(q.CommentCreated,this.onCommentCreated),this.pubsub.unsubscribe(q.CommentUpvoted,this.onCommentUpvoted),this.pubsub.unsubscribe(q.CommentDownvoted,this.onCommentDownvoted))}firePixel(e,i){this.adMeasurer&&this.adPubSub.publish(m.FirePixel,{pixelEventType:e,metadata:this.adMeasurer.getMetadata(e),galleryIndex:i})}measureOutOfViewChangeIgnoringPrompts(e){e.relatedTarget&&this.measureOutOfViewChange()}onVisibilityChange(){const{hidden:e}=this.getHiddenAndVisibilityChangeForDocument();this.lastIOEvent&&(document[e]?this.measureOutOfViewChange():this.measureBackInViewChange())}setupVisibilityTracking(){const{visibilityChange:e}=this.getHiddenAndVisibilityChangeForDocument();document.addEventListener(e,this.visibilityChangeHandler),window.addEventListener("blur",this.measureOutOfViewChangeIgnoringPrompts),window.addEventListener("focus",this.measureBackInViewChange),this.overlappingObserver?.observe(document.body,{childList:!0,subtree:!0,attributes:!0,characterData:!1})}teardownVisibilityTracking(){const{visibilityChange:e}=this.getHiddenAndVisibilityChangeForDocument();document.removeEventListener(e,this.visibilityChangeHandler),window.removeEventListener("blur",this.measureOutOfViewChangeIgnoringPrompts),window.removeEventListener("focus",this.measureBackInViewChange),this.overlappingObserver?.disconnect()}isIntersectingChange(e){const{details:i,id:t}=e.detail,s={id:t,intersectionRatio:i.intersectionRatio};this.updateViewChangeDetails(s),this.adMeasurer?.measureViewChange(s),(i.intersectionRatio||this.isOverlapped)&&this.checkAndMeasureIfAdIsBeingOverlapped()}getHiddenAndVisibilityChangeForDocument(){let e=te.Standard,i=se.hidden;return void 0!==document.hidden?(e=te.Standard,i=se.hidden):void 0!==document.webkitHidden&&(e=te.Webkit,i=se.webkitHidden),{hidden:e,visibilityChange:i}}setupVideoEvents(){this.handleVideoFullscreenEvent=this.eventController.define(K,(e=>{this.adMeasurer?.measureFullscreenChange(e.detail)})),this.handleVideoPauseEvent=this.eventController.define(Q,(e=>{this.adMeasurer?.measureVideoPause(e.detail)})),this.handleVideoPlayEvent=this.eventController.define(j,(e=>{this.adMeasurer?.measureVideoPlay(e.detail)})),this.handleVideoVolumeEvent=this.eventController.define(z,(e=>{this.adMeasurer?.measureVolumeChange(e.detail)})),this.handleVideoSeekingEvent=this.eventController.define($,(e=>{e.detail.fromReconnect||this.adMeasurer?.measureVideoSeek(e.detail)})),this.handleVideoSeekedEvent=this.eventController.define(J,(e=>{e.detail.fromReconnect||this.adMeasurer?.measureVideoSeeked(e.detail)})),this.handleVideoTimeUpdateEvent=this.eventController.define(X,(e=>{setTimeout((()=>{this.adMeasurer?.measureVideoTimeUpdate(e.detail)}))}))}setupGalleryEvents(){this.handleGalleryItemImpressionEvent=this.eventController.define(_e,(e=>{const{postId:i,itemIndex:t}=e.detail;i===this.postId&&this.adMeasurer?.measureGalleryItemImpression(t)}))}}return t[Pe]=!0,t}export{_e as O,ye as W,Ce as e};
